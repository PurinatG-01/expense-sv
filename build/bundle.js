var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function i(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(e,n,r){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}(n,r))}function s(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}function u(t,e,n,r,i,o,a){const u=function(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|i[r];return t}return e.dirty|i}return e.dirty}(e,r,i,o);if(u){const i=s(e,n,r,a);t.p(i,u)}}function c(t,e,n=e){return t.set(n),e}function h(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function f(t){t.parentNode.removeChild(t)}function p(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function v(t){return document.createTextNode(t)}function y(){return v(" ")}function m(){return v("")}function g(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function b(t){return function(e){return e.preventDefault(),t.call(this,e)}}function w(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function I(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function E(t){return""===t?null:+t}function T(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function _(t,e){t.value=null==e?"":e}function S(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}let A;function N(t){A=t}function k(){const t=function(){if(!A)throw new Error("Function called outside component initialization");return A}();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const i=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);r.slice().forEach((e=>{e.call(t,i)}))}}}const D=[],x=[],O=[],C=[],R=Promise.resolve();let P=!1;function L(t){O.push(t)}let M=!1;const F=new Set;function V(){if(!M){M=!0;do{for(let t=0;t<D.length;t+=1){const e=D[t];N(e),U(e.$$)}for(N(null),D.length=0;x.length;)x.pop()();for(let t=0;t<O.length;t+=1){const e=O[t];F.has(e)||(F.add(e),e())}O.length=0}while(D.length);for(;C.length;)C.pop()();P=!1,M=!1,F.clear()}}function U(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(L)}}const j=new Set;let q;function B(){q={r:0,c:[],p:q}}function K(){q.r||r(q.c),q=q.p}function G(t,e){t&&t.i&&(j.delete(t),t.i(e))}function H(t,e,n,r){if(t&&t.o){if(j.has(t))return;j.add(t),q.c.push((()=>{j.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function z(t){t&&t.c()}function W(t,n,o,a){const{fragment:s,on_mount:u,on_destroy:c,after_update:h}=t.$$;s&&s.m(n,o),a||L((()=>{const n=u.map(e).filter(i);c?c.push(...n):r(n),t.$$.on_mount=[]})),h.forEach(L)}function $(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Q(t,e){-1===t.$$.dirty[0]&&(D.push(t),P||(P=!0,R.then(V)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function X(e,i,o,a,s,u,c=[-1]){const h=A;N(e);const l=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:s,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:[]),callbacks:n(),dirty:c,skip_bound:!1};let p=!1;if(l.ctx=o?o(e,i.props||{},((t,n,...r)=>{const i=r.length?r[0]:n;return l.ctx&&s(l.ctx[t],l.ctx[t]=i)&&(!l.skip_bound&&l.bound[t]&&l.bound[t](i),p&&Q(e,t)),n})):[],l.update(),p=!0,r(l.before_update),l.fragment=!!a&&a(l.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);l.fragment&&l.fragment.l(t),t.forEach(f)}else l.fragment&&l.fragment.c();i.intro&&G(e.$$.fragment),W(e,i.target,i.anchor,i.customElement),V()}N(h)}class Y{$destroy(){$(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function J(t,e,n){const r=t.slice();return r[4]=e[n],r}function Z(t){let e,n=t[0],r=[];for(let e=0;e<n.length;e+=1)r[e]=tt(J(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=m()},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);l(t,e,n)},p(t,i){if(9&i){let o;for(n=t[0],o=0;o<n.length;o+=1){const a=J(t,n,o);r[o]?r[o].p(a,i):(r[o]=tt(a),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){p(r,t),t&&f(e)}}}function tt(t){let e;return{c(){e=d("div"),S(e,"background-color",t[4].color),S(e,"flex-grow",t[3](t[4].value))},m(t,n){l(t,e,n)},p(t,n){1&n&&S(e,"background-color",t[4].color),1&n&&S(e,"flex-grow",t[3](t[4].value))},d(t){t&&f(e)}}}function et(e){let n,r,i,o,a,s,u=e[2]&&Z(e);return{c(){n=d("div"),r=d("h3"),i=v("Total expense : "),o=v(e[1]),a=y(),s=d("div"),u&&u.c(),I(r,"class","mb-2 text-lg font-semibold text-gray-600 bg-transparent dark:text-gray-100"),I(s,"class","flex h-4 overflow-hidden rounded-2xl"),I(n,"class","p-4 mb-4 duration-200 border border-gray-200 shadow-lg dark:border-gray-600 dark:bg-gray-800 rounded-2xl")},m(t,e){l(t,n,e),h(n,r),h(r,i),h(r,o),h(n,a),h(n,s),u&&u.m(s,null)},p(t,[e]){2&e&&T(o,t[1]),t[2]?u?u.p(t,e):(u=Z(t),u.c(),u.m(s,null)):u&&(u.d(1),u=null)},i:t,o:t,d(t){t&&f(n),u&&u.d()}}}function nt(t,e,n){let r=0,i=null;let{data:o}=e;return t.$$set=t=>{"data"in t&&n(0,o=t.data)},t.$$.update=()=>{3&t.$$.dirty&&(n(2,i=o),n(1,r=0),o.forEach((t=>{n(1,r+=t.value)})))},[o,r,i,t=>Math.round(t/r*100)]}class rt extends Y{constructor(t){super(),X(this,t,nt,et,o,{data:0})}}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var it=function(t,e){return(it=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function ot(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}it(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var at=function(){return(at=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function st(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function ut(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function ct(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function ht(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function lt(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=lt(t[n],e[n]));return t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ft=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function pt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function dt(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var vt=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,yt.prototype.create),o}return ot(e,t),e}(Error),yt=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?mt(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new vt(i,s,r);return u},t}();function mt(t,e){return t.replace(gt,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var gt=/\{\$([^}]+)}/g;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function bt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function wt(t,e){var n=new It(t,e);return n.subscribe.bind(n)}var It=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=Et),void 0===r.error&&(r.error=Et),void 0===r.complete&&(r.complete=Et);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function Et(){}
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Tt(t){return t&&t._delegate?t._delegate:t}var _t=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),St="[DEFAULT]",At=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=St);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new ft;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=at({identifier:St,optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService({instanceIdentifier:i});if(!o){if(r)return null;throw Error("Service "+this.name+" is not available")}return o}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t))try{this.getOrInitializeService({instanceIdentifier:St})}catch(t){}try{for(var r=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=ct(i.value,2),a=o[0],s=o[1],u=this.normalizeInstanceIdentifier(a);try{var c=this.getOrInitializeService({instanceIdentifier:u});s.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=St),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return st(this,void 0,void 0,(function(){var t;return ut(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(ht(ht([],ct(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),ct(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=St),this.instances.has(t)},t.prototype.initialize=function(t){void 0===t&&(t={});var e=t.instanceIdentifier,n=void 0===e?St:e,r=t.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(n);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");return this.getOrInitializeService({instanceIdentifier:o,options:i})},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);return!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===St?void 0:e),options:i}),this.instances.set(n,o)),o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:St:t},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Nt,kt=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new At(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function Dt(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var xt,Ot=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(xt||(xt={}));var Ct,Rt={debug:xt.DEBUG,verbose:xt.VERBOSE,info:xt.INFO,warn:xt.WARN,error:xt.ERROR,silent:xt.SILENT},Pt=xt.INFO,Lt=((Nt={})[xt.DEBUG]="log",Nt[xt.VERBOSE]="log",Nt[xt.INFO]="info",Nt[xt.WARN]="warn",Nt[xt.ERROR]="error",Nt),Mt=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Lt[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,Dt(["["+i+"]  "+t.name+":"],n))}},Ft=function(){function t(t){this.name=t,this._logLevel=Pt,this._logHandler=Mt,this._userLogHandler=null,Ot.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in xt))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?Rt[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Dt([this,xt.DEBUG],t)),this._logHandler.apply(this,Dt([this,xt.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Dt([this,xt.VERBOSE],t)),this._logHandler.apply(this,Dt([this,xt.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Dt([this,xt.INFO],t)),this._logHandler.apply(this,Dt([this,xt.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Dt([this,xt.WARN],t)),this._logHandler.apply(this,Dt([this,xt.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Dt([this,xt.ERROR],t)),this._logHandler.apply(this,Dt([this,xt.ERROR],t))},t}();function Vt(t){Ot.forEach((function(e){e.setLogLevel(t)}))}var Ut,jt=((Ct={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Ct["bad-app-name"]="Illegal App name: '{$appName}",Ct["duplicate-app"]="Firebase App named '{$appName}' already exists",Ct["app-deleted"]="Firebase App named '{$appName}' already deleted",Ct["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Ct["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Ct),qt=new yt("app","Firebase",jt),Bt="@firebase/app",Kt="[DEFAULT]",Gt=((Ut={})[Bt]="fire-core",Ut["@firebase/analytics"]="fire-analytics",Ut["@firebase/auth"]="fire-auth",Ut["@firebase/database"]="fire-rtdb",Ut["@firebase/functions"]="fire-fn",Ut["@firebase/installations"]="fire-iid",Ut["@firebase/messaging"]="fire-fcm",Ut["@firebase/performance"]="fire-perf",Ut["@firebase/remote-config"]="fire-rc",Ut["@firebase/storage"]="fire-gcs",Ut["@firebase/firestore"]="fire-fst",Ut["fire-js"]="fire-js",Ut["firebase-wrapper"]="fire-js-all",Ut),Ht=new Ft("@firebase/app"),zt=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=lt(void 0,t),this.container=new kt(e.name),this._addComponent(new _t("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=Kt),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=Kt),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){Ht.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw qt.create("app-deleted",{appName:this.name_})},t}();zt.prototype.name&&zt.prototype.options||zt.prototype.delete||console.log("dc");
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Wt(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name=Kt);var a=o.name;if("string"!=typeof a||!a)throw qt.create("bad-app-name",{appName:String(a)});if(bt(e,a))throw qt.create("duplicate-app",{appName:a});var s=new t(n,o,r);return e[a]=s,s},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=Gt[t])&&void 0!==r?r:t;n&&(i+="-"+n);var a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return a&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void Ht.warn(u.join(" "))}o(new _t(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:Vt,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw qt.create("invalid-log-argument");!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=Rt[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:xt[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=Ot;r<i.length;r++)n(i[r])}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t,e)},apps:null,SDK_VERSION:"8.3.2",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!bt(e,t=t||Kt))throw qt.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return Ht.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var s=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw qt.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&lt(s,o.serviceProps),r[a]=s,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,a);return n.apply(this,o.multipleInstances?t:[])}}for(var u=0,c=Object.keys(e);u<c.length;u++){var h=c[u];e[h]._addComponent(o)}return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var $t=function t(){var e=Wt(zt);return e.INTERNAL=at(at({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){lt(e,t)},createSubscribe:wt,ErrorFactory:yt,deepExtend:lt}),e}(),Qt=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){Ht.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Xt=self.firebase.SDK_VERSION;Xt&&Xt.indexOf("LITE")>=0&&Ht.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Yt=$t.initializeApp;$t.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return dt()&&Ht.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Yt.apply(void 0,t)};var Jt=$t;!function(t,e){t.INTERNAL.registerComponent(new _t("platform-logger",(function(t){return new Qt(t)}),"PRIVATE")),t.registerVersion(Bt,"0.6.18",e),t.registerVersion("fire-js","")}(Jt);
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
Jt.registerVersion("firebase","8.3.2","app"),function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function r(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function i(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:r(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in i||(i[a]={}),i=i[a]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function r(){this.a=null}function o(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var a=n.setTimeout;r.prototype.c=function(t){a(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},r.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new r;return e.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Qa(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=i(t),a=r.next();!a.done;a=r.next())o(a.value).Qa(e,n)}))},e.all=function(t){var n=i(t),r=n.next();return r.done?o([]):new e((function(t,e){function i(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,o(r.value).Qa(i(a.length-1),e),r=n.next()}while(!r.done)}))},e}));var o=o||{},a=this||self,s=/^[\w+/_-]+[=]{0,2}$/,u=null;function c(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&s.test(t)?t:""}function h(){}function l(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function f(t){var e=l(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){return"function"==l(t)}function d(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var v="closure_uid_"+(1e9*Math.random()>>>0),y=0;function m(t,e,n){return t.call.apply(t.bind,arguments)}function g(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?m:g).apply(null,arguments)}function w(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var I=Date.now;function E(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function T(t){return t}function _(t,e,n){this.code=N+t,this.message=e||k[t]||"",this.a=n||null}function S(t){var e=t&&t.code;return e?new _(e.substring(N.length),t.message,t.serverResponse):null}E(_,Error),_.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},_.prototype.toJSON=function(){return this.w()};var A,N="auth/",k={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},D={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function x(t){for(var e in D)if(D[e].id===t)return{firebaseEndpoint:(t=D[e]).Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function O(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function C(t){if(Error.captureStackTrace)Error.captureStackTrace(this,C);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function R(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");C.call(this,n+t[r])}function P(t,e){throw new R("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function L(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function M(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function F(){this.b=this.a=null}A=x("__EID__")?"__EID__":void 0,E(C,Error),C.prototype.name="CustomError",E(R,C),R.prototype.name="AssertionError",L.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var V=new L((function(){return new j}),(function(t){t.reset()}));function U(){var t=be,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function j(){this.next=this.b=this.a=null}F.prototype.add=function(t,e){var n=V.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},j.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},j.prototype.reset=function(){this.next=this.b=this.a=null};var q=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},B=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var K=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(r[i++]=s)}return r},G=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},H=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function z(t,e){return 0<=q(t,e)}function W(t,e){var n;return(n=0<=(e=q(t,e)))&&Array.prototype.splice.call(t,e,1),n}function $(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function Q(t){return Array.prototype.concat.apply([],arguments)}function X(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Y,J=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},Z=/&/g,tt=/</g,et=/>/g,nt=/"/g,rt=/'/g,it=/\x00/g,ot=/[\x00&<>"']/;function at(t,e){return-1!=t.indexOf(e)}function st(t,e){return t<e?-1:t>e?1:0}t:{var ut=a.navigator;if(ut){var ct=ut.userAgent;if(ct){Y=ct;break t}}Y=""}function ht(t){return at(Y,t)}function lt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ft(t){for(var e in t)return!1;return!0}function pt(t){var e,n={};for(e in t)n[e]=t[e];return n}var dt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<dt.length;o++)n=dt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function yt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||a).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(d(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;P("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function mt(t,e){this.a=t===It&&e||"",this.b=wt}function gt(t){return t instanceof mt&&t.constructor===mt&&t.b===wt?t.a:(P("expected object of type Const, got '"+t+"'"),"type_error:Const")}mt.prototype.sa=!0,mt.prototype.ra=function(){return this.a},mt.prototype.toString=function(){return"Const{"+this.a+"}"};var bt,wt={},It={};function Et(){if(void 0===bt){var t=null,e=a.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:T,createScript:T,createScriptURL:T})}catch(t){a.console&&a.console.error(t.message)}bt=t}else bt=t}return bt}function Tt(t,e){this.a=e===kt?t:""}function _t(t){return t instanceof Tt&&t.constructor===Tt?t.a:(P("expected object of type TrustedResourceUrl, got '"+t+"' of type "+l(t)),"type_error:TrustedResourceUrl")}function St(t,e){var n=gt(t);if(!Nt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=Et();return new Tt(t=e?e.createScriptURL(t):t,kt)}(t=n.replace(At,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof mt?gt(t):encodeURIComponent(String(t))})))}Tt.prototype.sa=!0,Tt.prototype.ra=function(){return this.a.toString()},Tt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var At=/%{(\w+)}/g,Nt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,kt={};function Dt(t,e){this.a=e===Mt?t:""}function xt(t){return t instanceof Dt&&t.constructor===Dt?t.a:(P("expected object of type SafeUrl, got '"+t+"' of type "+l(t)),"type_error:SafeUrl")}Dt.prototype.sa=!0,Dt.prototype.ra=function(){return this.a.toString()},Dt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Ot=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Ct=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Rt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Pt(t){if(t instanceof Dt)return t;if(t="object"==typeof t&&t.sa?t.ra():String(t),Rt.test(t))t=new Dt(t,Mt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Ct);t=e&&Ot.test(e[1])?new Dt(t,Mt):null}return t}function Lt(t){return t instanceof Dt?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Rt.test(t)||(t="about:invalid#zClosurez"),new Dt(t,Mt))}var Mt={},Ft=new Dt("about:invalid#zClosurez",Mt);function Vt(t,e,n){this.a=n===Ut?t:""}Vt.prototype.sa=!0,Vt.prototype.ra=function(){return this.a.toString()},Vt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Ut={};function jt(t,e,n,r){return t=t instanceof Dt?t:Lt(t),e=e||a,n=n instanceof mt?gt(n):n||"",e.open(xt(t),n,r,void 0)}function qt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Bt(t){return ot.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(Z,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(tt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(et,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(nt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(rt,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(it,"&#0;"))),t}function Kt(t){return Kt[" "](t),t}Kt[" "]=h;var Gt,Ht,zt=ht("Opera"),Wt=ht("Trident")||ht("MSIE"),$t=ht("Edge"),Qt=$t||Wt,Xt=ht("Gecko")&&!(at(Y.toLowerCase(),"webkit")&&!ht("Edge"))&&!(ht("Trident")||ht("MSIE"))&&!ht("Edge"),Yt=at(Y.toLowerCase(),"webkit")&&!ht("Edge");function Zt(){var t=a.document;return t?t.documentMode:void 0}t:{var te="",ee=(Ht=Y,Xt?/rv:([^\);]+)(\)|;)/.exec(Ht):$t?/Edge\/([\d\.]+)/.exec(Ht):Wt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ht):Yt?/WebKit\/(\S+)/.exec(Ht):zt?/(?:Version)[ \/]?(\S+)/.exec(Ht):void 0);if(ee&&(te=ee?ee[1]:""),Wt){var ne=Zt();if(null!=ne&&ne>parseFloat(te)){Gt=String(ne);break t}}Gt=te}var re,ie={};function oe(t){return function(t,e){var n=ie;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=J(String(Gt)).split("."),r=J(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=st(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||st(0==a[2].length,0==s[2].length)||st(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}if(a.document&&Wt){var ae=Zt();re=ae||(parseInt(Gt,10)||void 0)}else re=void 0;var se=re;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Ht){}var ue=!Wt||9<=Number(se);function ce(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function he(t,e){lt(e,(function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:pe.hasOwnProperty(n)?t.setAttribute(pe[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var le,fe,pe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function de(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!f(o)||d(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(d(o)){var a="function"==typeof o.item||"string"==typeof o.item;break t}if(p(o)){a="function"==typeof o.item;break t}}a=!1}B(a?X(o):o,r)}}}function ve(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ye(t){a.setTimeout((function(){throw t}),0)}function me(t,e){fe||function(){if(a.Promise&&a.Promise.resolve){var t=a.Promise.resolve(void 0);fe=function(){t.then(we)}}else fe=function(){var t=we;!p(a.setImmediate)||a.Window&&a.Window.prototype&&!ht("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(le||(le=function(){var t=a.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ht("Presto")&&(t=function(){var t=ve(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=b((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ht("Trident")&&!ht("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Gb;n.Gb=null,t()}},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}return function(t){a.setTimeout(t,0)}}()),le(t)):a.setImmediate(t)}}(),ge||(fe(),ge=!0),be.add(t,e)}var ge=!1,be=new F;function we(){for(var t;t=U();){try{t.a.call(t.b)}catch(t){ye(t)}M(V,t)}ge=!1}function Ie(t,e){if(this.a=Ee,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=h)try{var n=this;t.call(e,(function(t){Le(n,Te,t)}),(function(t){if(!(t instanceof Be))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Le(n,_e,t)}))}catch(t){Le(this,_e,t)}}var Ee=0,Te=2,_e=3;function Se(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Se.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ae=new L((function(){return new Se}),(function(t){t.reset()}));function Ne(t,e,n){var r=Ae.get();return r.g=t,r.b=e,r.f=n,r}function ke(t){if(t instanceof Ie)return t;var e=new Ie(h);return Le(e,Te,t),e}function De(t){return new Ie((function(e,n){n(t)}))}function xe(t,e,n){Me(t,e,n,null)||me(w(e,t))}function Oe(t){return new Ie((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Pb:!0,value:o}:{Pb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)xe(t[o],w(i,o,!0),w(i,o,!1));else e(r)}))}function Ce(t,e){if(t.a==Ee)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==t&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==Ee&&1==r?Ce(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Ve(n),Ue(n,i,_e,e)))}t.c=null}else Le(t,_e,e)}function Re(t,e){t.b||t.a!=Te&&t.a!=_e||Fe(t),t.f?t.f.next=e:t.b=e,t.f=e}function Pe(t,e,n,r){var i=Ne(null,null,null);return i.a=new Ie((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Be?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,Re(t,i),i.a}function Le(t,e,n){t.a==Ee&&(t===n&&(e=_e,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Me(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Fe(t),e!=_e||n instanceof Be||function(t,e){t.g=!0,me((function(){t.g&&qe.call(null,e)}))}(t,n)))}function Me(t,e,n,r){if(t instanceof Ie)return Re(t,Ne(e||h,n||null,r)),!0;if(O(t))return t.then(e,n,r),!0;if(d(t))try{var i=t.then;if(p(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}function a(t){s||(s=!0,n.call(i,t))}var s=!1;try{e.call(t,a,o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function Fe(t){t.h||(t.h=!0,me(t.gc,t))}function Ve(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Ue(t,e,n,r){if(n==_e&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,je(e,n,r);else try{e.c?e.g.call(e.f):je(e,n,r)}catch(t){qe.call(null,t)}M(Ae,e)}function je(t,e,n){e==Te?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}Ie.prototype.then=function(t,e,n){return Pe(this,p(t)?t:null,p(e)?e:null,n)},Ie.prototype.$goog_Thenable=!0,(t=Ie.prototype).oa=function(t,e){return(t=Ne(t,t,e)).c=!0,Re(this,t),this},t.o=function(t,e){return Pe(this,null,t,e)},t.cancel=function(t){if(this.a==Ee){var e=new Be(t);me((function(){Ce(this,e)}),this)}},t.$c=function(t){this.a=Ee,Le(this,Te,t)},t.ad=function(t){this.a=Ee,Le(this,_e,t)},t.gc=function(){for(var t;t=Ve(this);)Ue(this,t,this.a,this.i);this.h=!1};var qe=ye;function Be(t){C.call(this,t)}function Ke(){this.xa=this.xa,this.pa=this.pa}E(Be,C),Be.prototype.name="cancel";function Ge(t){!t.xa&&(t.xa=!0,t.Da(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,v)&&t[v]||(t[v]=++y)}(t)}Ke.prototype.xa=!1,Ke.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var He=Object.freeze||function(t){return t},ze=!Wt||9<=Number(se),We=Wt&&!oe("9"),$e=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",h,e),a.removeEventListener("test",h,e)}catch(t){}return t}();function Qe(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Xe(t,e){if(Qe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Xt){t:{try{Kt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ye[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Qe.prototype.preventDefault=function(){this.defaultPrevented=!0},E(Xe,Qe);var Ye=He({2:"touch",3:"pen",4:"mouse"});Xe.prototype.preventDefault=function(){Xe.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,We)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Xe.prototype.g=function(){return this.a};var Je="closure_listenable_"+(1e6*Math.random()|0),Ze=0;function tn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++Ze,this.va=this.Pa=!1}function en(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function nn(t){this.src=t,this.a={},this.b=0}function rn(t,e){var n=e.type;n in t.a&&W(t.a[n],e)&&(en(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function on(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}nn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=on(t,e,r,i);return-1<a?(e=t[a],n||(e.Pa=!1)):((e=new tn(e,this.src,o,!!r,i)).Pa=n,t.push(e)),e};var an="closure_lm_"+(1e6*Math.random()|0),sn={};function un(t,e,n,r,i){if(r&&r.once)hn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)un(t,e[o],n,r,i);else n=bn(n),t&&t[Je]?In(t,e,n,d(r)?!!r.capture:!!r,i):cn(t,e,n,!1,r,i)}function cn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=d(i)?!!i.capture:!!i,s=mn(t);if(s||(t[an]=s=new nn(t)),!(n=s.add(e,n,r,a,o)).proxy)if(r=function(){var t=yn,e=ze?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)$e||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(pn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function hn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else n=bn(n),t&&t[Je]?En(t,e,n,d(r)?!!r.capture:!!r,i):cn(t,e,n,!0,r,i)}function ln(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ln(t,e[o],n,r,i);else r=d(r)?!!r.capture:!!r,n=bn(n),t&&t[Je]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=on(o=t.a[e],n,r,i))&&(en(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=mn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=on(e,n,r,i)),(n=-1<t?e[t]:null)&&fn(n))}function fn(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[Je])rn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(pn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=mn(e))?(rn(n,t),0==n.b&&(n.src=null,e[an]=null)):en(t)}}}function pn(t){return t in sn?sn[t]:sn[t]="on"+t}function dn(t,e,n,r){var i=!0;if((t=mn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=vn(o,r),i=i&&!1!==o)}return i}function vn(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&fn(t),n.call(r,e)}function yn(t,e){if(t.va)return!0;if(!ze){if(!e)t:{e=["window","event"];for(var n=a,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Xe(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=dn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=dn(r[i],t,!1,e),n=n&&o}return n}return vn(t,new Xe(e,this))}function mn(t){return(t=t[an])instanceof nn?t:null}var gn="__closure_events_fn_"+(1e9*Math.random()>>>0);function bn(t){return p(t)?t:(t[gn]||(t[gn]=function(e){return t.handleEvent(e)}),t[gn])}function wn(){Ke.call(this),this.v=new nn(this),this.ac=this,this.gb=null}function In(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function En(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function Tn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.va&&a.capture==n){var s=a.listener,u=a.Va||a.src;a.Pa&&rn(t.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function _n(t,e,n){if(p(t))n&&(t=b(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function Sn(t){var e=null;return new Ie((function(n,r){-1==(e=_n((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw a.clearTimeout(e),t}))}function An(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"==typeof t)return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Nn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(f(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function kn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof kn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Dn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];xn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)xn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function xn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}E(wn,Ke),wn.prototype[Je]=!0,wn.prototype.addEventListener=function(t,e,n,r){un(this,t,e,n,r)},wn.prototype.removeEventListener=function(t,e,n,r){ln(this,t,e,n,r)},wn.prototype.dispatchEvent=function(t){var e,n=this.gb;if(n)for(e=[];n;n=n.gb)e.push(n);n=this.ac;var r=t.type||t;if("string"==typeof t)t=new Qe(t,n);else if(t instanceof Qe)t.target=t.target||n;else{var i=t;vt(t=new Qe(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=Tn(a,r,!0,t)&&i}if(i=Tn(a=t.b=n,r,!0,t)&&i,i=Tn(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Tn(a=t.b=e[o],r,!1,t)&&i;return i},wn.prototype.Da=function(){if(wn.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)en(n[r]);delete e.a[t],e.b--}}this.gb=null},(t=kn.prototype).W=function(){Dn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return Dn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return xn(this.b,t)?this.b[t]:e},t.set=function(t,e){xn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var On=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Cn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Cn?(this.i=void 0!==e?e:t.i,Rn(this,t.c),this.l=t.l,this.a=t.a,Pn(this,t.g),this.f=t.f,Ln(this,tr(t.b)),this.h=t.h):t&&(n=String(t).match(On))?(this.i=!!e,Rn(this,n[1]||"",!0),this.l=jn(n[2]||""),this.a=jn(n[3]||"",!0),Pn(this,n[4]),this.f=jn(n[5]||"",!0),Ln(this,n[6]||"",!0),this.h=jn(n[7]||"")):(this.i=!!e,this.b=new $n(null,this.i))}function Rn(t,e,n){t.c=n?jn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Pn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Ln(t,e,n){e instanceof $n?(t.b=e,function(t,e){e&&!t.f&&(Qn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Yn(this,e),Zn(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=qn(e,zn)),t.b=new $n(e,t.i))}function Mn(t,e,n){t.b.set(e,n)}function Fn(t,e){return t.b.get(e)}function Vn(t){return t instanceof Cn?new Cn(t):new Cn(t,void 0)}function Un(t,e,n,r){var i=new Cn(null,void 0);return t&&Rn(i,t),e&&(i.a=e),n&&Pn(i,n),r&&(i.f=r),i}function jn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Bn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Bn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Cn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(qn(e,Kn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(qn(e,Kn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(qn(n,"/"==n.charAt(0)?Hn:Gn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",qn(n,Wn)),t.join("")},Cn.prototype.resolve=function(t){var e=new Cn(this),n=!!t.c;n?Rn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Pn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(at(i,"./")||at(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Ln(e,tr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Kn=/[#\/\?@]/g,Gn=/[#\?:]/g,Hn=/[#\?]/g,zn=/[#\?@]/g,Wn=/#/g;function $n(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Qn(t){t.a||(t.a=new kn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Xn(t){var e=Nn(t);if(void 0===e)throw Error("Keys are undefined");var n=new $n(null,void 0);t=An(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Zn(n,i,o):n.add(i,o)}return n}function Yn(t,e){Qn(t),e=er(t,e),xn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,xn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Dn(t)))}function Jn(t,e){return Qn(t),e=er(t,e),xn(t.a.b,e)}function Zn(t,e,n){Yn(t,e),0<n.length&&(t.c=null,t.a.set(er(t,e),X(n)),t.b+=n.length)}function tr(t){var e=new $n;return e.c=t.c,t.a&&(e.a=new kn(t.a),e.b=t.b),e}function er(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function nr(t){var e=[];return ir(new rr,t,e),e.join("")}function rr(){}function ir(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),ir(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&("function"!=typeof(o=e[r])&&(n.push(i),sr(r,n),n.push(":"),ir(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":sr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=$n.prototype).add=function(t,e){Qn(this),this.c=null,t=er(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Qn(this),this.a.forEach((function(n,r){B(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){Qn(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.W=function(t){Qn(this);var e=[];if("string"==typeof t)Jn(this,t)&&(e=Q(e,this.a.get(er(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=Q(e,t[n])}return e},t.set=function(t,e){return Qn(this),this.c=null,Jn(this,t=er(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.W(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var or={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},ar=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function sr(t,e){e.push('"',t.replace(ar,(function(t){var e=or[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),or[t]=e),e})),'"')}function ur(){var t=kr();return Wt&&!!se&&11==se||/Edge\/\d+/.test(t)}function cr(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function hr(t,e){e=e||a.window;var n="about:blank";t&&(n=xt(Pt(t)||Ft)),e.location.href=n}function lr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<lr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function fr(t){return!!((t=(t||kr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function pr(t){t=t||a.window;try{t.close()}catch(t){}}function dr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=kr().toLowerCase(),r&&(e.target=r,at(n,"crios/")&&(e.target="_blank")),Sr(kr())==Tr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Dt?n:Pt(void 0!==n.href?n.href:String(n))||Ft,n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((ht("iPhone")&&!ht("iPod")&&!ht("iPad")||ht("iPad")||ht("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(yt(a=ve(document,"A"),"HTMLAnchorElement"),e=e instanceof Dt?e:Lt(e),a.href=xt(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=jt("",r,n,a),t=xt(e),a&&(Qt&&at(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Bt(t)+'">',t=new Vt(t=(r=Et())?r.createHTML(t):t,null,Ut),r=a.document)&&(r.write(function(t){return t instanceof Vt&&t.constructor===Vt?t.a:(P("expected object of type SafeHtml, got '"+t+"' of type "+l(t)),"type_error:SafeHtml")}(t)),r.close())):(a=jt(e,r,n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var vr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yr=/^[^@]+@[^@]+$/;function mr(){var t=null;return new Ie((function(e){"complete"==a.document.readyState?e():(t=function(){e()},hn(window,"load",t))})).o((function(e){throw ln(window,"load",t),e}))}function gr(t){return t=t||kr(),!("file:"!==Rr()&&"ionic:"!==Rr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function br(){var t=a.window;try{return!(!t||t==t.top)}catch(t){return!1}}function wr(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function Ir(){return Jt.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Jt.INTERNAL.hasOwnProperty("node")?"Node":wr()?"Worker":"Browser"}function Er(){var t=Ir();return"ReactNative"===t||"Node"===t}var Tr="Firefox",_r="Chrome";function Sr(t){var e=t.toLowerCase();return at(e,"opera/")||at(e,"opr/")||at(e,"opios/")?"Opera":at(e,"iemobile")?"IEMobile":at(e,"msie")||at(e,"trident/")?"IE":at(e,"edge/")?"Edge":at(e,"firefox/")?Tr:at(e,"silk/")?"Silk":at(e,"blackberry")?"Blackberry":at(e,"webos")?"Webos":!at(e,"safari/")||at(e,"chrome/")||at(e,"crios/")||at(e,"android")?!at(e,"chrome/")&&!at(e,"crios/")||at(e,"edge/")?at(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":_r:"Safari"}var Ar={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Nr(t,e){e=e||[];var n,r=[],i={};for(n in Ar)i[Ar[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Ir())?r=Sr(i=kr()):"Worker"===r&&(r=Sr(i=kr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function kr(){return a.navigator&&a.navigator.userAgent||""}function Dr(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function xr(){try{var t=a.localStorage,e=Vr();if(t)return t.setItem(e,"1"),t.removeItem(e),!ur()||!!a.indexedDB}catch(t){return wr()&&!!a.indexedDB}return!1}function Or(){return(Cr()||"chrome-extension:"===Rr()||gr())&&!Er()&&xr()&&!wr()}function Cr(){return"http:"===Rr()||"https:"===Rr()}function Rr(){return a.location&&a.location.protocol||null}function Pr(t){return!fr(t=t||kr())&&Sr(t)!=Tr}function Lr(t){return void 0===t?null:nr(t)}function Mr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Fr(t){if(null!==t)return JSON.parse(t)}function Vr(t){return t||Math.floor(1e9*Math.random()).toString()}function Ur(t){return"Safari"!=Sr(t=t||kr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function jr(){var t=a.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function qr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=kr(),e=Ir(),this.b=fr(t)||"ReactNative"===e}function Br(){var t=a.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Kr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Gr(){return!(!Dr("fireauth.oauthhelper",a)&&!Dr("fireauth.iframe",a))}qr.prototype.get=function(){var t=a.navigator;return!t||"boolean"!=typeof t.onLine||!Cr()&&"chrome-extension:"!==Rr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Hr,zr={};function Wr(t){zr[t]||(zr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var $r={};Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:2}),Hr=2==$r.abcd}catch(Ht){Hr=!1}function Qr(t,e,n){Hr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Xr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Qr(t,n,e[n])}function Yr(t){var e={};return Xr(e,t),e}function Jr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Qr(e,n,Jr(t[n]));return e}function Zr(t){var e=t&&(t[ii]?"phone":null);if(!(e&&t&&t[ri]))throw new _("internal-error","Internal assert: invalid MultiFactorInfo object");Qr(this,"uid",t[ri]),Qr(this,"displayName",t[ei]||null);var n=null;t[ni]&&(n=new Date(t[ni]).toUTCString()),Qr(this,"enrollmentTime",n),Qr(this,"factorId",e)}function ti(t){try{var e=new oi(t)}catch(t){e=null}return e}Zr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ei="displayName",ni="enrolledAt",ri="mfaEnrollmentId",ii="phoneInfo";function oi(t){Zr.call(this,t),Qr(this,"phoneNumber",t[ii])}function ai(t){var e={},n=t[hi],r=t[fi],i=t[pi];if(t=ti(t[li]),!i||i!=ui&&i!=ci&&!n||i==ci&&!r||i==si&&!t)throw Error("Invalid checkActionCode response!");i==ci?(e[vi]=n||null,e[mi]=n||null,e[di]=r):(e[vi]=r||null,e[mi]=r||null,e[di]=n||null),e[yi]=t||null,Qr(this,bi,i),Qr(this,gi,Jr(e))}E(oi,Zr),oi.prototype.w=function(){var t=oi.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var si="REVERT_SECOND_FACTOR_ADDITION",ui="EMAIL_SIGNIN",ci="VERIFY_AND_CHANGE_EMAIL",hi="email",li="mfaInfo",fi="newEmail",pi="requestType",di="email",vi="fromEmail",yi="multiFactorInfo",mi="previousEmail",gi="data",bi="operation";function wi(t){var e=Fn(t=Vn(t),Ii)||null,n=Fn(t,Ei)||null,r=Fn(t,Si)||null;if(r=r&&Ni[r]||null,!e||!n||!r)throw new _("argument-error",Ii+", "+Ei+"and "+Si+" are required in a valid action code URL.");Xr(this,{apiKey:e,operation:r,code:n,continueUrl:Fn(t,Ti)||null,languageCode:Fn(t,_i)||null,tenantId:Fn(t,Ai)||null})}var Ii="apiKey",Ei="oobCode",Ti="continueUrl",_i="languageCode",Si="mode",Ai="tenantId",Ni={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:si,signIn:ui,verifyAndChangeEmail:ci,verifyEmail:"VERIFY_EMAIL"};function ki(t){try{return new wi(t)}catch(t){return null}}function Di(t){var e=t[Pi];if(void 0===e)throw new _("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new _("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[xi];if(n&&"object"==typeof n){e=n[Fi];var r=n[Li];if(n=n[Mi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new _("argument-error",Li+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new _("argument-error",Mi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new _("argument-error",Fi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new _("missing-android-pkg-name")}}else if(void 0!==n)throw new _("argument-error",xi+" property must be a non null object when specified.");if(this.f=null,(e=t[Ri])&&"object"==typeof e){if("string"==typeof(e=e[Vi])&&e.length)this.f=e;else if(void 0!==e)throw new _("argument-error",Vi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new _("argument-error",Ri+" property must be a non null object when specified.");if(void 0!==(e=t[Ci])&&"boolean"!=typeof e)throw new _("argument-error",Ci+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Oi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new _("argument-error",Oi+" property must be a non empty string when specified.");this.i=t||null}var xi="android",Oi="dynamicLinkDomain",Ci="handleCodeInApp",Ri="iOS",Pi="url",Li="installApp",Mi="minimumVersion",Fi="packageName",Vi="bundleId";function Ui(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var ji=null;function qi(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=ji[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!ji){ji={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===ji[o]&&(ji[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e.push(t)})),e}function Bi(t){var e=Gi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Ki(t){try{return new Bi(t)}catch(t){return null}}function Gi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=qi(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var a=r[e++],s=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else o=r[e++],a=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(t.join(""))}catch(t){}return null}Bi.prototype.T=function(){return this.f},Bi.prototype.l=function(){return this.c},Bi.prototype.toString=function(){return this.h};var Hi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),zi=["client_id","response_type","scope","redirect_uri","state"],Wi={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:zi},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:zi},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:zi},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:Hi},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function $i(t){for(var e in Wi)if(Wi[e].fa==t)return Wi[e];return null}function Qi(t){var e={};e["facebook.com"]=to,e["google.com"]=no,e["github.com"]=eo,e["twitter.com"]=ro;var n=t&&t[Yi];try{if(n)return e[n]?new e[n](t):new Zi(t);if(void 0!==t[Xi])return new Ji(t)}catch(t){}return null}var Xi="idToken",Yi="providerId";function Ji(t){var e=t[Yi];if(!e&&t[Xi]){var n=Ki(t[Xi]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Qr(this,"providerId",e),Qr(this,"isNewUser",n)}function Zi(t){Ji.call(this,t),Qr(this,"profile",Jr((t=Fr(t.rawUserInfo||"{}"))||{}))}function to(t){if(Zi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function eo(t){if(Zi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",this.profile&&this.profile.login||null)}function no(t){if(Zi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function ro(t){if(Zi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",t.screenName||null)}function io(t){var e=Vn(t),n=Fn(e,"link"),r=Fn(Vn(n),"link");return e=Fn(e,"deep_link_id"),Fn(Vn(e),"link")||e||r||n||t}function oo(t,e){if(!t&&!e)throw new _("internal-error","Internal assert: no raw session string available");if(t&&e)throw new _("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?ao:so}E(Zi,Ji),E(to,Zi),E(eo,Zi),E(no,Zi),E(ro,Zi);var ao="enroll",so="signin";function uo(){}function co(t,e){return t.then((function(t){if(t[Ja]){var n=Ki(t[Ja]);if(!n||e!=n.i)throw new _("user-mismatch");return t}throw new _("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==N+"user-not-found"?new _("user-mismatch"):t}))}function ho(t,e){if(!e)throw new _("internal-error","failed to construct a credential");this.a=e,Qr(this,"providerId",t),Qr(this,"signInMethod",t)}function lo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function fo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new ho(t.providerId,t.pendingToken)}catch(t){}return null}function po(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Qr(this,"idToken",e.idToken),e.accessToken&&Qr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Qr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new _("internal-error","failed to construct a credential");Qr(this,"accessToken",e.oauthToken),Qr(this,"secret",e.oauthTokenSecret)}Qr(this,"providerId",t),Qr(this,"signInMethod",n)}function vo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Xn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function yo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new po(t.providerId,e,t.signInMethod)}catch(t){}}return null}function mo(t,e){this.Qc=e||[],Xr(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=($i(t)||{}).Ja||null,this.ob=null}function go(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new _("argument-error",'SAML provider IDs must be prefixed with "saml."');mo.call(this,t,[])}function bo(t){mo.call(this,t,zi),this.a=[]}function wo(){bo.call(this,"facebook.com")}function Io(t){if(!t)throw new _("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new wo).credential({accessToken:e})}function Eo(){bo.call(this,"github.com")}function To(t){if(!t)throw new _("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new Eo).credential({accessToken:e})}function _o(){bo.call(this,"google.com"),this.Ca("profile")}function So(t,e){var n=t;return d(t)&&(n=t.idToken,e=t.accessToken),(new _o).credential({idToken:n,accessToken:e})}function Ao(){mo.call(this,"twitter.com",Hi)}function No(t,e){var n=t;if(d(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new _("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new po("twitter.com",n,"twitter.com")}function ko(t,e,n){this.a=t,this.f=e,Qr(this,"providerId","password"),Qr(this,"signInMethod",n===xo.EMAIL_LINK_SIGN_IN_METHOD?xo.EMAIL_LINK_SIGN_IN_METHOD:xo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Do(t){return t&&t.email&&t.password?new ko(t.email,t.password,t.signInMethod):null}function xo(){Xr(this,{providerId:"password",isOAuthProvider:!1})}function Oo(t,e){if(!(e=Co(e)))throw new _("argument-error","Invalid email link!");return new ko(t,e.code,xo.EMAIL_LINK_SIGN_IN_METHOD)}function Co(t){return(t=ki(t=io(t)))&&t.operation===ui?t:null}function Ro(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new _("internal-error");this.a=t,Qr(this,"providerId","phone"),this.fa="phone",Qr(this,"signInMethod","phone")}function Po(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return B(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Ro(e)}return null}function Lo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function Mo(t){try{this.a=t||Jt.auth()}catch(t){throw new _("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Xr(this,{providerId:"phone",isOAuthProvider:!1})}function Fo(t,e){if(!t)throw new _("missing-verification-id");if(!e)throw new _("missing-verification-code");return new Ro({eb:t,cb:e})}function Vo(t){if(t.temporaryProof&&t.phoneNumber)return new Ro({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return So(o,n);case"facebook.com":return Io(n);case"github.com":return To(n);case"twitter.com":return No(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new ho(e,a):new po(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new bo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Uo(t){if(!t.isOAuthProvider)throw new _("invalid-oauth-provider")}function jo(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new _("invalid-auth-event");if(this.g&&this.a)throw new _("invalid-auth-event");if(this.g&&!this.f)throw new _("invalid-auth-event")}function qo(t){return(t=t||{}).type?new jo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&S(t.error),t.postBody,t.tenantId):null}function Bo(){this.b=null,this.a=[]}oo.prototype.Ha=function(){return this.a?ke(this.a):ke(this.b)},oo.prototype.w=function(){return this.type==ao?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},uo.prototype.ka=function(){},uo.prototype.b=function(){},uo.prototype.c=function(){},uo.prototype.w=function(){},ho.prototype.ka=function(t){return ws(t,lo(this))},ho.prototype.b=function(t,e){var n=lo(this);return n.idToken=e,Is(t,n)},ho.prototype.c=function(t,e){return co(Es(t,lo(this)),e)},ho.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},po.prototype.ka=function(t){return ws(t,vo(this))},po.prototype.b=function(t,e){var n=vo(this);return n.idToken=e,Is(t,n)},po.prototype.c=function(t,e){return co(Es(t,vo(this)),e)},po.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},mo.prototype.Ka=function(t){return this.Ib=pt(t),this},E(go,mo),E(bo,mo),bo.prototype.Ca=function(t){return z(this.a,t)||this.a.push(t),this},bo.prototype.Qb=function(){return X(this.a)},bo.prototype.credential=function(t,e){var n;if(!(n=d(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new _("argument-error","credential failed: must provide the ID token and/or the access token.");return new po(this.providerId,n,this.providerId)},E(wo,bo),Qr(wo,"PROVIDER_ID","facebook.com"),Qr(wo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),E(Eo,bo),Qr(Eo,"PROVIDER_ID","github.com"),Qr(Eo,"GITHUB_SIGN_IN_METHOD","github.com"),E(_o,bo),Qr(_o,"PROVIDER_ID","google.com"),Qr(_o,"GOOGLE_SIGN_IN_METHOD","google.com"),E(Ao,mo),Qr(Ao,"PROVIDER_ID","twitter.com"),Qr(Ao,"TWITTER_SIGN_IN_METHOD","twitter.com"),ko.prototype.ka=function(t){return this.signInMethod==xo.EMAIL_LINK_SIGN_IN_METHOD?ru(t,xs,{email:this.a,oobCode:this.f}):ru(t,Js,{email:this.a,password:this.f})},ko.prototype.b=function(t,e){return this.signInMethod==xo.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Os,{idToken:e,email:this.a,oobCode:this.f}):ru(t,Gs,{idToken:e,email:this.a,password:this.f})},ko.prototype.c=function(t,e){return co(this.ka(t),e)},ko.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Xr(xo,{PROVIDER_ID:"password"}),Xr(xo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Xr(xo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Ro.prototype.ka=function(t){return t.fb(Lo(this))},Ro.prototype.b=function(t,e){var n=Lo(this);return n.idToken=e,ru(t,tu,n)},Ro.prototype.c=function(t,e){var n=Lo(this);return n.operation="REAUTH",co(t=ru(t,eu,n),e)},Ro.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Mo.prototype.fb=function(t,e){var n=this.a.a;return ke(e.verify()).then((function(r){if("string"!=typeof r)throw new _("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=d(t)?t.session:null,o=d(t)?t.phoneNumber:t;return(i&&i.type==ao?i.Ha().then((function(t){return function(t,e){return ru(t,zs,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==so?i.Ha().then((function(e){return function(t,e){return ru(t,Ws,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return ru(t,Bs,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new _("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Xr(Mo,{PROVIDER_ID:"phone"}),Xr(Mo,{PHONE_SIGN_IN_METHOD:"phone"}),jo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},jo.prototype.T=function(){return this.h},jo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Ko,Go=null;function Ho(t){var e="unauthorized-domain",n=void 0,r=Vn(t);t=r.a,"chrome-extension"==(r=r.c)?n=qt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=qt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",_.call(this,e,n)}function zo(t,e,n){_.call(this,t,n),(t=e||{}).Jb&&Qr(this,"email",t.Jb),t.ea&&Qr(this,"phoneNumber",t.ea),t.credential&&Qr(this,"credential",t.credential),t.Zb&&Qr(this,"tenantId",t.Zb)}function Wo(t){if(t.code){var e=t.code||"";0==e.indexOf(N)&&(e=e.substring(N.length));var n={credential:Vo(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new _(e,t.message||void 0);return new zo(e,n,t.message)}return null}function $o(){}function Qo(t){return t.c||(t.c=t.b())}function Xo(){}function Yo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Jo(){}function Zo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=b(this.qc,this),this.a.onerror=b(this.Sb,this),this.a.onprogress=b(this.rc,this),this.a.ontimeout=b(this.vc,this)}function ta(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function ea(t,e,n){this.reset(t,e,n,void 0,void 0)}function na(t){this.f=t,this.b=this.c=this.a=null}function ra(t,e){this.name=t,this.value=e}E(Ho,_),E(zo,_),zo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&vt(t,e),t},zo.prototype.toJSON=function(){return this.w()},$o.prototype.c=null,E(Xo,$o),Xo.prototype.a=function(){var t=Yo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Xo.prototype.b=function(){var t={};return Yo(this)&&(t[0]=!0,t[1]=!0),t},Ko=new Xo,E(Jo,$o),Jo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Zo;throw Error("Unsupported browser")},Jo.prototype.b=function(){return{}},(t=Zo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ta(this,4)},t.Sb=function(){this.status=500,this.response=this.responseText="",ta(this,4)},t.vc=function(){this.Sb()},t.rc=function(){this.status=200,ta(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ea.prototype.a=null,ea.prototype.reset=function(t,e,n,r,i){delete this.a},ra.prototype.toString=function(){return this.name};var ia=new ra("SEVERE",1e3),oa=new ra("WARNING",900),aa=new ra("CONFIG",700),sa=new ra("FINE",500);function ua(t){return t.c?t.c:t.a?ua(t.a):(P("Root logger has no level set."),null)}na.prototype.log=function(t,e,n){if(t.value>=ua(this).value)for(p(e)&&(e=e()),t=new ea(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var ca={},ha=null;function la(t){var e;if(ha||(ha=new na(""),ca[""]=ha,ha.c=aa),!(e=ca[t])){e=new na(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=la(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,ca[t]=e}return e}function fa(t,e){t&&t.log(sa,e,void 0)}function pa(t){this.f=t}function da(t){wn.call(this),this.u=t,this.h=void 0,this.readyState=va,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=la("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}E(pa,$o),pa.prototype.a=function(){return new da(this.f)},pa.prototype.b=function(t){return function(){return t}}({}),E(da,wn);var va=0;function ya(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function ma(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ga(t)}function ga(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ba(t){wn.call(this),this.headers=new kn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=wa,this.u=this.S=!1}(t=da.prototype).open=function(t,e){if(this.readyState!=va)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,ga(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ma(this)),this.readyState=va},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ga(this)),this.a&&(this.readyState=3,ga(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):void 0!==a.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ya(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ma(this):ga(this),3==this.readyState&&ya(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,ma(this))},t.sc=function(t){this.a&&(this.response=t,ma(this))},t.Ua=function(t){var e=this.i;e&&e.log(oa,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ma(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(oa,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(oa,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(da.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),E(ba,wn);var wa="";ba.prototype.b=la("goog.net.XhrIo");var Ia=/^https?$/i,Ea=["POST","PUT"];function Ta(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.R=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Ko.a(),t.C=t.D?Qo(t.D):Qo(Ko),t.a.onreadystatechange=b(t.Vb,t);try{fa(t.b,Ca(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(e){return fa(t.b,Ca(t,"Error opening Xhr: "+e.message)),void Sa(t,e)}e=r||"";var o=new kn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||"string"==typeof t)B(t,e,void 0);else for(var n=Nn(t),r=An(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=_a,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=a.FormData&&e instanceof a.FormData,!z(Ea,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{Da(t),0<t.g&&(t.u=function(t){return Wt&&oe(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),fa(t.b,Ca(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=b(t.Ma,t)):t.s=_n(t.Ma,t.g,t)),fa(t.b,Ca(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){fa(t.b,Ca(t,"Send error: "+e.message)),Sa(t,e)}}function _a(t){return"content-type"==t.toLowerCase()}function Sa(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Aa(t),ka(t)}function Aa(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Na(t){if(t.c&&void 0!==o)if(t.C[1]&&4==xa(t)&&2==Oa(t))fa(t.b,Ca(t,"Local request error detected and ignored"));else if(t.i&&4==xa(t))_n(t.Vb,0,t);else if(t.dispatchEvent("readystatechange"),4==xa(t)){fa(t.b,Ca(t,"Request complete")),t.c=!1;try{var e,n=Oa(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var s=String(t.l).match(On)[1]||null;if(!s&&a.self&&a.self.location){var u=a.self.location.protocol;s=u.substr(0,u.length-1)}i=!Ia.test(s?s.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<xa(t)?t.a.statusText:""}catch(e){fa(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+Oa(t)+"]",Aa(t)}}finally{ka(t)}}}function ka(t,e){if(t.a){Da(t);var n=t.a,r=t.C[0]?h:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(ia,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Da(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(a.clearTimeout(t.s),t.s=null)}function xa(t){return t.a?t.a.readyState:0}function Oa(t){try{return 2<xa(t)?t.a.status:-1}catch(t){return-1}}function Ca(t,e){return e+" ["+t.R+" "+t.l+" "+Oa(t)+"]"}function Ra(t){var e=Ga;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Pa(t,e,n){t.a=!0,t.c=n,t.f=!e,Va(t)}function La(t){if(t.a){if(!t.v)throw new Ua(t);t.v=!1}}function Ma(t,e,n,r){t.g.push([e,n,r]),t.a&&Va(t)}function Fa(t){return H(t.g,(function(t){return p(t[1])}))}function Va(t){if(t.h&&t.a&&Fa(t)){var e=t.h,n=Ba[e];n&&(a.clearTimeout(n.a),delete Ba[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(O(e)||"function"==typeof a.Promise&&e instanceof a.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Fa(t)||(n=!0)}}t.c=e,r&&(u=b(t.m,t,!0),r=b(t.m,t,!1),e instanceof Ra?(Ma(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new qa(e),Ba[e.a]=e,t.h=e.a)}function Ua(){C.call(this)}function ja(){C.call(this)}function qa(t){this.a=a.setTimeout(b(this.c,this),0),this.b=t}(t=ba.prototype).Ma=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",fa(this.b,Ca(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(fa(this.b,Ca(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ka(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ka(this,!0)),ba.ab.Da.call(this)},t.Vb=function(){this.xa||(this.O||this.i||this.f?Na(this):this.Jc())},t.Jc=function(){Na(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case wa:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(ia,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return fa(this.b,"Can not get response: "+t.message),null}},Ra.prototype.cancel=function(t){if(this.a)this.c instanceof Ra&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new ja(this),La(this),Pa(this,!1,t))}},Ra.prototype.m=function(t,e){this.i=!1,Pa(this,t,e)},Ra.prototype.then=function(t,e,n){var r,i,o=new Ie((function(t,e){r=t,i=e}));return Ma(this,r,(function(t){t instanceof ja?o.cancel():i(t)})),o.then(t,e,n)},Ra.prototype.$goog_Thenable=!0,E(Ua,C),Ua.prototype.message="Deferred has already fired",Ua.prototype.name="AlreadyCalledError",E(ja,C),ja.prototype.message="Deferred was canceled",ja.prototype.name="CanceledError",qa.prototype.c=function(){throw delete Ba[this.a],this.b};var Ba={};function Ka(t){var e,n=document,r=_t(t).toString(),i=ve(document,"SCRIPT"),o={Wb:i,Ma:void 0},s=new Ra(o);return e=window.setTimeout((function(){Ha(i,!0);var t=new $a(Wa,"Timeout reached for loading script "+r);La(s),Pa(s,!1,t)}),5e3),o.Ma=e,i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ha(i,!1,e),La(s),Pa(s,!0,null))},i.onerror=function(){Ha(i,!0,e);var t=new $a(za,"Error while loading script "+r);La(s),Pa(s,!1,t)},vt(o={},{type:"text/javascript",charset:"UTF-8"}),he(i,o),function(t,e){yt(t,"HTMLScriptElement"),t.src=_t(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=a?e=c(e.document):(null===u&&(u=c(a.document)),e=u),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function Ga(){if(this&&this.Wb){var t=this.Wb;t&&"SCRIPT"==t.tagName&&Ha(t,!0,this.Ma)}}function Ha(t,e,n){null!=n&&a.clearTimeout(n),t.onload=h,t.onerror=h,t.onreadystatechange=h,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var za=0,Wa=1;function $a(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),C.call(this,n),this.code=t}function Qa(t){this.f=t}function Xa(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Za,this.g=pt(t.secureTokenHeaders||ts),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||es,this.a=pt(t.firebaseHeaders||ns),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Ir(),!(n=a.XMLHttpRequest||n&&Jt.INTERNAL.node&&Jt.INTERNAL.node.XMLHttpRequest)&&!wr())throw new _("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,wr()?this.f=new pa(self):Er()?this.f=new Qa(n):this.f=new Jo,this.b=null}E($a,C),E(Qa,$o),Qa.prototype.a=function(){return new this.f},Qa.prototype.b=function(){return{}};var Ya,Ja="idToken",Za=new qr(3e4,6e4),ts={"Content-Type":"application/x-www-form-urlencoded"},es=new qr(3e4,6e4),ns={"Content-Type":"application/json"};function rs(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function is(t,e){e&&(t.l=os("https://securetoken.googleapis.com/v1/token",e),t.h=os("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=os("https://identitytoolkit.googleapis.com/v2/",e))}function os(t,e){return t=Vn(t),e=Vn(e.url),t.f=t.a+t.f,Rn(t,e.c),t.a=e.a,Pn(t,e.g),t.toString()}function as(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function ss(t,e,n,r,i,o,s){(function(){var t=kr();return!((t=Sr(t)!=_r?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Wt&&se&&!(9<se))})()||wr()?t=b(t.u,t):(Ya||(Ya=new Ie((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{a[cs]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ma(t,null,e,void 0)}(Ka(St(us,{onload:cs})),(function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),t=b(t.s,t)),t(e,n,r,i,o,s)}Xa.prototype.T=function(){return this.b},Xa.prototype.u=function(t,e,n,r,i,o){if(wr()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new _("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new ba(this.f);if(o){s.g=Math.max(0,o);var u=setTimeout((function(){s.dispatchEvent("timeout")}),o)}In(s,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return fa(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),En(s,"ready",(function(){u&&clearTimeout(u),Ge(this)})),En(s,"timeout",(function(){u&&clearTimeout(u),Ge(this),e&&e(null)})),Ta(s,t,n,r,i)};var us=new mt(It,"https://apis.google.com/js/client.js?onload=%{onload}"),cs="__fcb"+Math.floor(1e6*Math.random()).toString();function hs(t,e,n,r,i,o,a){var s=Vn(e+n);Mn(s,"key",t.c),a&&Mn(s,"cb",I().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Mn(s,c,i[c]);return new Ie((function(e,n){ss(t,s.toString(),(function(t){t?t.error?n(ou(t,o||{})):e(t):n(new _("network-request-failed"))}),r,u?void 0:nr(Mr(i)),t.a,t.v.get())}))}function ls(t){if("string"!=typeof(t=t.email)||!yr.test(t))throw new _("invalid-email")}function fs(t){"email"in t&&ls(t)}function ps(t){if(!t[Ja]){if(t.mfaPendingCredential)throw new _("multi-factor-auth-required",null,pt(t));throw new _("internal-error")}}function ds(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new _("internal-error")}else{if(!t.sessionInfo)throw new _("missing-verification-id");if(!t.code)throw new _("missing-verification-code")}}Xa.prototype.s=function(t,e,n,r,i){var o=this;Ya.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Xa.prototype.zb=function(){return ru(this,Hs,{})},Xa.prototype.Bb=function(t,e){return ru(this,Ks,{idToken:t,email:e})},Xa.prototype.Cb=function(t,e){return ru(this,Gs,{idToken:t,password:e})};var vs={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ys(t){if(!t.phoneVerificationInfo)throw new _("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new _("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new _("missing-verification-code")}function ms(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new _("internal-error")}function gs(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(Jn(t=new $n(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function bs(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Wo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Wo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Wo(t)):t.errorMessage&&(e=iu(t.errorMessage)),e)throw e;ps(t)}function ws(t,e){return e.returnIdpCredential=!0,ru(t,$s,e)}function Is(t,e){return e.returnIdpCredential=!0,ru(t,Xs,e)}function Es(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,ru(t,Qs,e)}function Ts(t){if(!t.oobCode)throw new _("invalid-action-code")}(t=Xa.prototype).Db=function(t,e){var n={idToken:t},r=[];return lt(vs,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),ru(this,Ks,n)},t.vb=function(t,e){return vt(t={requestType:"PASSWORD_RESET",email:t},e),ru(this,Vs,t)},t.wb=function(t,e){return vt(t={requestType:"EMAIL_SIGNIN",email:t},e),ru(this,Ls,t)},t.ub=function(t,e){return vt(t={requestType:"VERIFY_EMAIL",idToken:t},e),ru(this,Ms,t)},t.Eb=function(t,e,n){return vt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),ru(this,Fs,t)},t.fb=function(t){return ru(this,Zs,t)},t.nb=function(t,e){return ru(this,qs,{oobCode:t,newPassword:e})},t.Ra=function(t){return ru(this,Ss,{oobCode:t})},t.jb=function(t){return ru(this,_s,{oobCode:t})};var _s={endpoint:"setAccountInfo",A:Ts,Z:"email",B:!0},Ss={endpoint:"resetPassword",A:Ts,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new _("internal-error")},B:!0},As={endpoint:"signupNewUser",A:function(t){if(ls(t),!t.password)throw new _("weak-password")},G:ps,V:!0,B:!0},Ns={endpoint:"createAuthUri",B:!0},ks={endpoint:"deleteAccount",N:["idToken"]},Ds={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new _("internal-error")}},xs={endpoint:"emailLinkSignin",N:["email","oobCode"],A:ls,G:ps,V:!0,B:!0},Os={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:ls,G:ps,V:!0},Cs={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:ys,G:ps,B:!0,Na:!0},Rs={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:ys,G:ps,B:!0,Na:!0},Ps={endpoint:"getAccountInfo"},Ls={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new _("internal-error");ls(t)},Z:"email",B:!0},Ms={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new _("internal-error")},Z:"email",B:!0},Fs={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new _("internal-error")},Z:"email",B:!0},Vs={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new _("internal-error");ls(t)},Z:"email",B:!0},Us={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},js={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new _("internal-error")}},qs={endpoint:"resetPassword",A:Ts,Z:"email",B:!0},Bs={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Ks={endpoint:"setAccountInfo",N:["idToken"],A:fs,V:!0},Gs={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(fs(t),!t.password)throw new _("weak-password")},G:ps,V:!0},Hs={endpoint:"signupNewUser",G:ps,V:!0,B:!0},zs={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new _("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new _("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new _("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new _("internal-error")},B:!0,Na:!0},Ws={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new _("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new _("internal-error")},B:!0,Na:!0},$s={endpoint:"verifyAssertion",A:ms,Ya:gs,G:bs,V:!0,B:!0},Qs={endpoint:"verifyAssertion",A:ms,Ya:gs,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new _("user-not-found");if(t.errorMessage)throw iu(t.errorMessage);ps(t)},V:!0,B:!0},Xs={endpoint:"verifyAssertion",A:function(t){if(ms(t),!t.idToken)throw new _("internal-error")},Ya:gs,G:bs,V:!0},Ys={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new _("invalid-custom-token")},G:ps,V:!0,B:!0},Js={endpoint:"verifyPassword",A:function(t){if(ls(t),!t.password)throw new _("wrong-password")},G:ps,V:!0,B:!0},Zs={endpoint:"verifyPhoneNumber",A:ds,G:ps,B:!0},tu={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new _("internal-error");ds(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Wo(t);ps(t)}},eu={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ds,G:ps,B:!0},nu={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Ja]^!!t.refreshToken)throw new _("internal-error")},B:!0,Na:!0};function ru(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.N))return De(new _("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return ke(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),hs(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)})).then((function(t){return r=t,e.Ya?e.Ya(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new _("internal-error");return r[e.Z]}))}function iu(t){return ou({error:{errors:[{message:t}],code:400,message:t}})}function ou(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new _(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",vt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new _(r[i],e);return!e&&t&&(e=Lr(t)),new _("internal-error",e)}function au(t){this.b=t,this.a=null,this.rb=function(t){return(hu||(hu=new Ie((function(t,e){function n(){jr(),Dr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){jr(),e(Error("Network Error"))},timeout:uu.get()})}if(Dr("gapi.iframes.Iframe"))t();else if(Dr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();a[r]=function(){Dr("gapi.load")?n():e(Error("Network Error"))},ke(Ka(r=St(su,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw hu=null,t})))).then((function(){return new Ie((function(e,n){Dr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Dr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),cu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var su=new mt(It,"https://apis.google.com/js/api.js?onload=%{onload}"),uu=new qr(3e4,6e4),cu=new qr(5e3,15e3),hu=null;function lu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?t=Un((t=Vn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):t=Un("https",this.l,null,"/__/auth/iframe"),this.a=t,Mn(this.a,"apiKey",this.h),Mn(this.a,"appName",this.i),this.b=null,this.c=[]}function fu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function pu(t){try{return Jt.app(t).auth().Ga()}catch(t){return[]}}function du(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function vu(t){var e=cr();return function(t){return ru(t,Us,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Vn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=Vn(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:vr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Ho(cr())}))}function yu(t){return t.m||(t.m=mr().then((function(){if(!t.u){var e=t.c,n=t.i,r=pu(t.b),i=new lu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=X(r||[]),t.u=i.toString()}t.v=new au(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.rb.then((function(){t.a.register("authEvent",e,Dr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=qo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",ke(n)}return n.status="ERROR",ke(n)}))}(t)}))),t.m}function mu(t){return t.l||(t.C=t.c?Nr(t.c,pu(t.b)):null,t.l=new Xa(t.g,x(t.i),t.C),t.f&&is(t.l,t.f)),t.l}function gu(t,e,n,r,i,o,a,s,u,c,h,l){return(t=new fu(t,e,n,r,i,l)).l=o,t.g=a,t.i=s,t.b=pt(u||null),t.f=c,t.yb(h).toString()}function bu(t){if(this.a=t||Jt.INTERNAL.reactNative&&Jt.INTERNAL.reactNative.AsyncStorage,!this.a)throw new _("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function wu(t){this.b=t,this.a={},this.f=b(this.c,this)}lu.prototype.toString=function(){return this.f?Mn(this.a,"v",this.f):Yn(this.a.b,"v"),this.b?Mn(this.a,"eid",this.b):Yn(this.a.b,"eid"),this.c.length?Mn(this.a,"fw",this.c.join(",")):Yn(this.a.b,"fw"),this.a.toString()},fu.prototype.yb=function(t){return this.h=t,this},fu.prototype.toString=function(){if(this.v){var t=Vn(this.v.url);t=Un(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Un("https",this.u,null,"/__/auth/handler");if(Mn(t,"apiKey",this.s),Mn(t,"appName",this.c),Mn(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=Jt.app(this.c).auth().la()}catch(t){n=null}for(var r in e.ob=n,Mn(t,"providerId",this.a.providerId),e=Mr((n=this.a).Ib))e[r]=e[r].toString();r=n.Qc,e=pt(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.pb&&n.ob&&!e[n.pb]&&(e[n.pb]=n.ob),ft(e)||Mn(t,"customParameters",Lr(e))}if("function"==typeof this.a.Qb&&((n=this.a.Qb()).length&&Mn(t,"scopes",n.join(","))),this.l?Mn(t,"redirectUrl",this.l):Yn(t.b,"redirectUrl"),this.g?Mn(t,"eventId",this.g):Yn(t.b,"eventId"),this.i?Mn(t,"v",this.i):Yn(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Fn(t,a)&&Mn(t,a,this.b[a]);return this.h?Mn(t,"tid",this.h):Yn(t.b,"tid"),this.f?Mn(t,"eid",this.f):Yn(t.b,"eid"),(a=pu(this.c)).length&&Mn(t,"fw",a.join(",")),t.toString()},(t=du.prototype).Ob=function(t,e,n){var r=new _("popup-closed-by-user"),i=new _("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return yu(t).then((function(){return function(t,e){return t.rb.then((function(){return new Ie((function(n){t.a.send(e.type,e,n,Dr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&pr(t),e(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(t){return new Ie((function(e){return function n(){Sn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!a)return Sn(n).then((function(){e(r)}))}))},t.Xb=function(){var t=kr();return!Pr(t)&&!Ur(t)},t.Tb=function(){return!1},t.Mb=function(t,e,n,r,i,o,a,s){if(!t)return De(new _("popup-blocked"));if(a&&!Pr())return this.ma().o((function(e){pr(t),i(e)})),r(),ke();this.a||(this.a=vu(mu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw pr(t),i(e),e}));return r(),e})).then((function(){(Uo(n),a)||hr(gu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,s,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Nb=function(t,e,n,r){this.a||(this.a=vu(mu(this)));var i=this;return this.a.then((function(){Uo(e),hr(gu(i.s,i.g,i.b,t,e,cr(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return yu(this).then((function(){return t.v.rb})).o((function(){throw t.a=null,new _("network-request-failed")}))},t.$b=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Sa=function(t){$(this.h,(function(e){return e==t}))},(t=bu.prototype).get=function(t){return ke(this.a.getItem(t)).then((function(t){return t&&Fr(t)}))},t.set=function(t,e){return ke(this.a.setItem(t,Lr(e)))},t.U=function(t){return ke(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var Iu,Eu=[];function Tu(t,e,n){ft(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function _u(t){this.a=t}function Su(t){this.c=t,this.b=!1,this.a=[]}function Au(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return De(Error("connection_unavailable"));var h=r?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Ie((function(n,r){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},t.a.push(c),l.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):r(Error("connection_unavailable"))})).then((function(e){return Nu(t,c),e})).o((function(e){throw Nu(t,c),e}))}function Nu(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),$(t.a,(function(t){return t==e}))}}function ku(){if(!Cu())throw new _("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=a.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;wr()&&self?(this.v=function(){var t=wr()?self:null;if(B(Eu,(function(n){n.b==t&&(e=n)})),!e){var e=new wu(t);Eu.push(e)}return e}(),Tu(this.v,"keyChanged",(function(e,n){return Fu(t).then((function(e){return 0<e.length&&B(t.a,(function(t){t(e)})),{keyProcessed:z(e,n.key)}}))})),Tu(this.v,"ping",(function(){return ke(["keyChanged"])}))):function(){var t=a.navigator;return t&&t.serviceWorker?ke().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):ke(null)}().then((function(e){(t.h=e)&&(t.g=new Su(new _u(e)),Au(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&z(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Du(t){return new Ie((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new Ie((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Du(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function xu(t){return t.i||(t.i=Du(t)),t.i}function Ou(t,e){var n=0;return new Ie((function r(i,o){xu(t).then(e).then(i).o((function(e){if(!(3<++n))return xu(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Cu(){try{return!!a.indexedDB}catch(t){return!1}}function Ru(t){return t.objectStore("firebaseLocalStorage")}function Pu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Lu(t){return new Ie((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Mu(t,e){return t.g&&t.h&&function(){var t=a.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Au(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):ke()}function Fu(t){return xu(t).then((function(t){var e=Ru(Pu(t,!1));return e.getAll?Lu(e.getAll()):new Ie((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=lr(t.c,n),t.c=n}return r}))}function Vu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Uu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=ke().then((function(){if(Cu()){var t=Vr(),r="__sak"+t;return Iu||(Iu=new ku),(n=Iu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){B(e.a,(function(e){e(t)}))})),t}))}function ju(){this.a={},this.type="inMemory"}function qu(){if(!function(){var t="Node"==Ir();if(!(t=Bu()||t&&Jt.INTERNAL.node&&Jt.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Ir())throw new _("internal-error","The LocalStorage compatibility library was not found.");throw new _("web-storage-unsupported")}this.a=Bu()||Jt.INTERNAL.node.localStorage,this.type="localStorage"}function Bu(){try{var t=a.localStorage,e=Vr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Ku(){this.type="nullStorage"}function Gu(){if(!function(){var t="Node"==Ir();if(!(t=Hu()||t&&Jt.INTERNAL.node&&Jt.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Ir())throw new _("internal-error","The SessionStorage compatibility library was not found.");throw new _("web-storage-unsupported")}this.a=Hu()||Jt.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Hu(){try{var t=a.sessionStorage,e=Vr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function zu(){var t={};t.Browser=Qu,t.Node=Xu,t.ReactNative=Yu,t.Worker=Ju,this.a=t[Ir()]}wu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];B(r,(function(e){i.push(ke().then((function(){return e(t.origin,t.data.data)})))})),Oe(i).then((function(r){var i=[];B(r,(function(t){i.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})})),B(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},_u.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Su.prototype.close=function(){for(;0<this.a.length;)Nu(this,this.a[0]);this.b=!0},(t=ku.prototype).set=function(t,e){var n=this,r=!1;return Ou(this,(function(e){return Lu((e=Ru(Pu(e,!0))).get(t))})).then((function(i){return Ou(n,(function(o){if(o=Ru(Pu(o,!0)),i)return i.value=e,Lu(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=t,a.value=e,Lu(o.add(a))}))})).then((function(){return n.c[t]=e,Mu(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return Ou(this,(function(e){return Lu(Ru(Pu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return Ou(this,(function(r){return n=!0,e.b++,Lu(Ru(Pu(r,!0)).delete(t))})).then((function(){return delete e.c[t],Mu(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){function e(){t.f=setTimeout((function(){t.l=Fu(t).then((function(e){0<e.length&&B(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}Vu(t),e()}(this),this.a.push(t)},t.ia=function(t){$(this.a,(function(e){return e==t})),0==this.a.length&&Vu(this)},(t=Uu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){$(this.a,(function(e){return e==t}))},(t=ju.prototype).get=function(t){return ke(this.a[t])},t.set=function(t,e){return this.a[t]=e,ke()},t.U=function(t){return delete this.a[t],ke()},t.ca=function(){},t.ia=function(){},(t=qu.prototype).get=function(t){var e=this;return ke().then((function(){return Fr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return ke().then((function(){var r=Lr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return ke().then((function(){e.a.removeItem(t)}))},t.ca=function(t){a.window&&un(a.window,"storage",t)},t.ia=function(t){a.window&&ln(a.window,"storage",t)},(t=Ku.prototype).get=function(){return ke(null)},t.set=function(){return ke()},t.U=function(){return ke()},t.ca=function(){},t.ia=function(){},(t=Gu.prototype).get=function(t){var e=this;return ke().then((function(){return Fr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return ke().then((function(){var r=Lr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return ke().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Wu,$u,Qu={F:qu,bb:Gu},Xu={F:qu,bb:Gu},Yu={F:bu,bb:Ku},Ju={F:qu,bb:Ku},Zu={rd:"local",NONE:"none",td:"session"};function tc(){var t=!(Ur(kr())||!br()),e=Pr(),n=xr();this.m=t,this.h=e,this.l=n,this.a={},Wu||(Wu=new zu),t=Wu;try{this.g=!ur()&&Gr()||!a.indexedDB?new t.a.F:new Uu(wr()?new ju:new t.a.F)}catch(t){this.g=new ju,this.h=!0}try{this.i=new t.a.bb}catch(t){this.i=new ju}this.v=new ju,this.f=b(this.Yb,this),this.b={}}function ec(){return $u||($u=new tc),$u}function nc(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function rc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ic(t,e,n){return n=rc(e,n),"local"==e.F&&(t.b[n]=null),nc(t,e.F).U(n)}function oc(t){t.c&&(clearInterval(t.c),t.c=null)}function ac(t){this.a=t,this.b=ec()}(t=tc.prototype).get=function(t,e){return nc(this,t.F).get(rc(t,e))},t.set=function(t,e,n){var r=rc(t,n),i=this,o=nc(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=rc(t,e),this.l&&(this.b[t]=a.localStorage.getItem(t)),ft(this.a)&&(nc(this,"local").ca(this.f),this.h||(ur()||!Gr())&&a.indexedDB||!this.l||function(t){oc(t),t.c=setInterval((function(){for(var e in t.a){var n=a.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Xe({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Yb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=rc(t,e),this.a[t]&&($(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),ft(this.a)&&(nc(this,"local").ia(this.f),oc(this))},t.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=a.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?nc(this,"local").ia(this.f):oc(this),this.m)if(n=a.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?a.localStorage.setItem(e,r):a.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===a.localStorage.getItem(e)||(o.b[e]=a.localStorage.getItem(e),o.mb(e))},Wt&&se&&10==se&&a.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else B(t,b(this.mb,this))},t.mb=function(t){this.a[t]&&B(this.a[t],(function(t){t()}))};var sc,uc={name:"authEvent",F:"local"};function cc(){this.a=ec()}function hc(t,e){this.b=lc,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0===sc&&(sc=a.Int32Array?new Int32Array(gc):gc),this.reset()}E(hc,(function(){this.b=-1}));for(var lc=64,fc=lc-1,pc=[],dc=0;dc<fc;dc++)pc[dc]=0;var vc=Q(128,pc);function yc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&h^~c&l)+(0|sc[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function mc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(yc(t),i=0);else{if(!f(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(yc(t),i=0)}}t.c=i,t.g+=n}hc.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):X(this.h)};var gc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function bc(){hc.call(this,8,wc)}E(bc,hc);var wc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Ic(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new cc,this.g=new ac(this.h),this.f=null,this.b=[],this.a=this.c=null}function Ec(t){return new _("invalid-cordova-configuration",t)}function Tc(t){var e=new bc;mc(e,t),t=[];var n=8*e.g;56>e.c?mc(e,vc,56-e.c):mc(e,vc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(yc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return G(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}function _c(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Sc(t){return t.f||(t.f=t.ma().then((function(){return new Ie((function(e){t.Ea((function n(r){return e(r),t.Sa(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Ac(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=io(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Fr(Fn(o=Vn(i),"firebaseError")||null))?S(o):null)?new jo(r.c,r.b,null,null,o,null,r.T()):new jo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}_c(t,i)}))}var n=new jo("unknown",null,null,null,new _("no-auth-event")),r=!1,i=Sn(500).then((function(){return Ac(t).then((function(){r||_c(t,n)}))})),o=a.handleOpenURL;a.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Dr("BuildInfo.packageName",a).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},Go||(Go=new Bo),function(t){var e=Go;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Dr("universalLinks.subscribe",a))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Ac(t){var e=null;return function(t){return t.b.get(uc,t.a).then((function(t){return qo(t)}))}(t.g).then((function(n){return e=n,ic((n=t.g).b,uc,n.a)})).then((function(){return e}))}function Nc(t){this.a=t,this.b=ec()}(t=Ic.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(gr(void 0)?mr().then((function(){return new Ie((function(t,e){var n=a.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):De(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Dr("universalLinks.subscribe",a))throw Ec("cordova-universal-links-plugin-fix is not installed");if(void 0===Dr("BuildInfo.packageName",a))throw Ec("cordova-plugin-buildinfo is not installed");if("function"!=typeof Dr("cordova.plugins.browsertab.openUrl",a))throw Ec("cordova-plugin-browsertab is not installed");if("function"!=typeof Dr("cordova.InAppBrowser.open",a))throw Ec("cordova-plugin-inappbrowser is not installed")}),(function(){throw new _("cordova-not-ready")}))},t.Ob=function(t,e){return e(new _("operation-not-supported-in-this-environment")),ke()},t.Mb=function(){return De(new _("operation-not-supported-in-this-environment"))},t.$b=function(){return!1},t.Xb=function(){return!0},t.Tb=function(){return!0},t.Nb=function(t,e,n,r){if(this.c)return De(new _("redirect-operation-pending"));var i=this,o=a.document,s=null,u=null,c=null,h=null;return this.c=ke().then((function(){return Uo(e),Sc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new jo(e,r,null,o,new _("no-auth-event"),null,i),u=Dr("BuildInfo.packageName",a);if("string"!=typeof u)throw new _("invalid-cordova-configuration");var c=Dr("BuildInfo.displayName",a),h={};if(kr().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=u;else{if(!kr().toLowerCase().match(/android/))return De(new _("operation-not-supported-in-this-environment"));h.apn=u}c&&(h.appDisplayName=c),o=Tc(o),h.sessionId=o;var l=gu(t.v,t.i,t.l,e,n,null,r,t.m,h,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(uc,s.w(),e)})).then((function(){var e=Dr("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof e)throw new _("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Dr("cordova.plugins.browsertab.openUrl",a)))throw new _("invalid-cordova-configuration");n(l)}else{if("function"!=typeof(n=Dr("cordova.InAppBrowser.open",a)))throw new _("invalid-cordova-configuration");e=kr(),t.a=n(l,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new Ie((function(t,e){u=function(){var e=Dr("cordova.plugins.browsertab.close",a);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){s||(s=Sn(2e3).then((function(){e(new _("redirect-cancelled-by-user"))})))},h=function(){Br()&&c()},o.addEventListener("resume",c,!1),kr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return Ac(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),s&&s.cancel(),u&&i.Sa(u),i.c=null}))},t.Ea=function(t){this.b.push(t),Sc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new jo("unknown",null,null,null,new _("no-auth-event")),t(e))}))},t.Sa=function(t){$(this.b,(function(e){return e==t}))};var kc={name:"pendingRedirect",F:"session"};function Dc(t){return ic(t.b,kc,t.a)}function xc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=b(this.s,this),this.b=new Hc,this.C=new Xc,this.g=new Nc(Kc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Oc(this.D,this.v,this.m,A,this.J)}function Oc(t,e,n,r,i){var o=Jt.SDK_VERSION||null;return gr()?new Ic(t,e,n,o,r,i):new du(t,e,n,o,r,i)}function Cc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Rc(t){t.a.Xb()&&Cc(t).o((function(e){var n=new jo("unknown",null,null,null,new _("operation-not-supported-in-this-environment"));Uc(e)&&t.s(n)})),t.a.Tb()||zc(t.b)}function Pc(t,e){z(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(kc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Dc(t.g).then((function(){Cc(t).o((function(e){var n=new jo("unknown",null,null,null,new _("operation-not-supported-in-this-environment"));Uc(e)&&t.s(n)}))})):Rc(t)})).o((function(){Rc(t)}))}function Lc(t,e){$(t.h,(function(t){return t==e}))}xc.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=Oc(this.D,this.v,this.m,null,this.J),this.i={}},xc.prototype.s=function(t){if(!t)throw new _("invalid-auth-event");if(6e5<=I()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=I())),e=!0;break}}return zc(this.b),e};var Mc=new qr(2e3,1e4),Fc=new qr(3e4,6e4);function Vc(t,e,n,r,i,o,a){return t.a.Mb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,a)}function Uc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function jc(t,e,n,r,i){var o;return function(t){return t.b.set(kc,"pending",t.a)}(t.g).then((function(){return t.a.Nb(e,n,r,i).o((function(e){if(Uc(e))throw new _("operation-not-supported-in-this-environment");return o=e,Dc(t.g).then((function(){throw o}))})).then((function(){return t.a.$b()?new Ie((function(){})):Dc(t.g).then((function(){return t.qa()})).then((function(){})).o((function(){}))}))}))}function qc(t,e,n,r,i){return t.a.Ob(r,(function(t){e.na(n,null,t,i)}),Mc.get())}xc.prototype.qa=function(){return this.b.qa()};var Bc={};function Kc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Gc(t,e,n,r){var i=Kc(e,n,r);return Bc[i]||(Bc[i]=new xc(t,e,n,r)),Bc[i]}function Hc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function zc(t){t.g||(t.g=!0,Qc(t,!1,null,null))}function Wc(t){t.g&&!t.i&&Qc(t,!1,null,null)}function $c(t,e){if(t.b=function(){return ke(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Qc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return De(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):$c(t,n):$c(t,{user:null}),t.f=[],t.c=[]}function Xc(){}function Yc(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function Jc(t,e){this.a=e,Qr(this,"verificationId",t)}function Zc(t,e,n,r){return new Mo(t).fb(e,n).then((function(t){return new Jc(t,r)}))}function th(t){var e=Gi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new _("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Xr(this,{token:t,expirationTime:Kr(1e3*e.exp),authTime:Kr(1e3*e.auth_time),issuedAtTime:Kr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function eh(t,e,n){var r=e&&e[rh];if(!r)throw new _("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=pt(e),this.g=n,this.c=new oo(null,r),this.b=[];var i=this;B(e[nh]||[],(function(t){(t=ti(t))&&i.b.push(t)})),Qr(this,"auth",this.a),Qr(this,"session",this.c),Qr(this,"hints",this.b)}Hc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Hc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Qc(this,!0,null,t.a),ke()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.T(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){Qc(t,s,e,null)})).o((function(e){Qc(t,s,null,e)}))}(this,t,e):De(new _("invalid-auth-event")):(Qc(this,!1,null,null),ke())}else De(new _("invalid-auth-event"))},Hc.prototype.qa=function(){var t=this;return new Ie((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new _("timeout");t.a&&t.a.cancel(),t.a=Sn(Fc.get()).then((function(){t.b||(t.g=!0,Qc(t,!0,null,e))}))}(t))}))},Xc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),ke()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):De(new _("invalid-auth-event"))}else De(new _("invalid-auth-event"))},Jc.prototype.confirm=function(t){return t=Fo(this.verificationId,t),this.a(t)};var nh="mfaInfo",rh="mfaPendingCredential";function ih(t,e,n,r){_.call(this,"multi-factor-auth-required",r,e),this.b=new eh(t,e,n),Qr(this,"resolver",this.b)}function oh(t,e,n){if(t&&d(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new ih(e,t.serverResponse,n,t.message)}catch(t){}return null}function ah(){}function sh(t){Qr(this,"factorId",t.fa),this.a=t}function uh(t){if(sh.call(this,t),this.a.fa!=Mo.PROVIDER_ID)throw new _("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function ch(t,e){for(var n in Qe.call(this,t),e)this[n]=e[n]}function hh(t,e){this.a=t,this.b=[],this.c=b(this.yc,this),un(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&B(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ri]=t.uid),t.displayName&&(r[ei]=t.displayName),t.enrollmentTime&&(r[ni]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ii]=t.phoneNumber);try{e=new oi(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),lh(this,n)}function lh(t,e){t.b=e,Qr(t,"enrolledFactors",e)}function fh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function ph(t,e){t.stop(),t.b=Sn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=a.document,e=null;return Br()||!t?ke():new Ie((function(n){e=function(){Br()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){ph(t,!0)})).o((function(e){t.i(e)&&ph(t,!1)}))}function dh(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function vh(t,e){void 0===e&&(t.b?e=(e=t.b).a-e.g:e=0),t.c=Date.now()+1e3*e}function yh(t,e){t.b=Ki(e[Ja]||""),t.a=e.refreshToken,vh(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function mh(t,e){return function(t,e){return new Ie((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?ss(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(ou(t)):t.access_token&&t.refresh_token?n(t):r(new _("internal-error")):r(new _("network-request-failed"))}),"POST",Xn(e).toString(),t.g,t.m.get()):r(new _("internal-error"))}))}(t.f,e).then((function(e){return t.b=Ki(e.access_token),t.a=e.refresh_token,vh(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function gh(t,e){this.a=t||null,this.b=e||null,Xr(this,{lastSignInTime:Kr(e||null),creationTime:Kr(t||null)})}function bh(t,e,n,r,i,o){Xr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function wh(t,e,n){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=Jt.SDK_VERSION?Nr(Jt.SDK_VERSION):null;this.a=new Xa(this.l,x(A),r),t.emulatorConfig&&is(this.a,t.emulatorConfig),this.b=new dh(this.a),kh(this,e[Ja]),yh(this.b,e),Qr(this,"refreshToken",this.b.a),Oh(this,n||{}),wn.call(this),this.R=!1,this.s&&Or()&&(this.i=Gc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=function(t){return new fh((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.b.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.aa=b(this.hb,this);var i=this;this.ya=null,this.Oa=function(t){i.wa(t.h)},this.ja=null,this.Aa=function(t){is(i.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){Th(i,t.f)},this.ba=null,this.O=new hh(this,n),Qr(this,"multiFactor",this.O)}function Ih(t,e){t.ja&&ln(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&un(e,"languageCodeChanged",t.Oa)}function Eh(t,e){t.X&&ln(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&un(e,"emulatorConfigChanged",t.Aa)}function Th(t,e){t.$=e,as(t.a,Jt.SDK_VERSION?Nr(Jt.SDK_VERSION,t.$):null)}function _h(t,e){t.ba&&ln(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&un(e,"frameworkChanged",t.Ba)}function Sh(t){try{return Jt.app(t.m).auth()}catch(e){throw new _("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Ah(t){t.D||t.u.b||(t.u.start(),ln(t,"tokenChanged",t.aa),un(t,"tokenChanged",t.aa))}function Nh(t){ln(t,"tokenChanged",t.aa),t.u.stop()}function kh(t,e){t.za=e,Qr(t,"_lat",e)}function Dh(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return Oe(e).then((function(){return t}))}function xh(t){t.i&&!t.R&&(t.R=!0,Pc(t.i,t))}function Oh(t,e){Xr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new gh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Ch(){}function Rh(t){return ke().then((function(){if(t.D)throw new _("app-deleted")}))}function Ph(t){return G(t.providerData,(function(t){return t.providerId}))}function Lh(t,e){e&&(Mh(t,e.providerId),t.providerData.push(e))}function Mh(t,e){$(t.providerData,(function(t){return t.providerId==e}))}function Fh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Qr(t,e,n)}function Vh(t,e){t!=e&&(Xr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Qr(t,"metadata",function(t){return new gh(t.a,t.b)}(e.metadata)):Qr(t,"metadata",new gh),B(e.providerData,(function(e){Lh(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),Qr(t,"refreshToken",t.b.a),lh(t.O,e.O.b))}function Uh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return ru(t.a,Ps,{idToken:e}).then(b(t.Kc,t))}(t,e).then((function(){return n||Fh(t,"isAnonymous",!1),e}))}))}function jh(t,e){e[Ja]&&t.za!=e[Ja]&&(yh(t.b,e),t.dispatchEvent(new ch("tokenChanged")),kh(t,e[Ja]),Fh(t,"refreshToken",t.b.a))}function qh(t,e){return Uh(t).then((function(){if(z(Ph(t),e))return Dh(t).then((function(){throw new _("provider-already-linked")}))}))}function Bh(t,e,n){return Yr({user:t,credential:Vo(e),additionalUserInfo:e=Qi(e),operationType:n})}function Kh(t,e){return jh(t,e),t.reload().then((function(){return t}))}function Gh(t,e,n,r,i){if(!Or())return De(new _("operation-not-supported-in-this-environment"));if(t.h&&!i)return De(t.h);var o=$i(n.providerId),a=Vr(t.uid+":::"),s=null;(!Pr()||br())&&t.s&&n.isOAuthProvider&&(s=gu(t.s,t.l,t.m,e,n,null,a,Jt.SDK_VERSION||null,null,null,t.tenantId));var u=dr(s,o&&o.ua,o&&o.ta);return r=r().then((function(){if(zh(t),!i)return t.I().then((function(){}))})).then((function(){return Vc(t.i,u,e,n,a,!!s,t.tenantId)})).then((function(){return new Ie((function(n,r){t.na(e,null,new _("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=a,t.c=qc(t.i,t,e,u,a)}))})).then((function(t){return u&&pr(u),t?Yr(t):null})).o((function(t){throw u&&pr(u),t})),Wh(t,r,i)}function Hh(t,e,n,r,i){if(!Or())return De(new _("operation-not-supported-in-this-environment"));if(t.h&&!i)return De(t.h);var o=null,a=Vr(t.uid+":::");return r=r().then((function(){if(zh(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=a,Dh(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Xh,t.w(),e.a)),e})).then((function(){return jc(t.i,e,n,a,t.tenantId)})).o((function(e){if(o=e,t.ha)return Yh(t.ha);throw o})).then((function(){if(o)throw o})),Wh(t,r,i)}function zh(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new _("internal-error");throw new _("auth-domain-config-required")}}function Wh(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),De(t.h)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new ch("userInvalidated")),t.h=e),e}))}(t,e,n);return t.J.push(r),r.oa((function(){W(t.J,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=oh(e.w(),Sh(t),b(t.jc,t))),n||e}))}function $h(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Ja]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new wh(e,n,t);return t.providerData&&B(t.providerData,(function(t){t&&Lh(i,Yr(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Qh(t){this.a=t,this.b=ec()}eh.prototype.Rc=function(t){var e=this;return t.sb(this.a.a,this.c).then((function(t){var n=pt(e.f);return delete n[nh],delete n[rh],vt(n,t),e.g(n)}))},E(ih,_),ah.prototype.sb=function(t,e,n){return e.type==ao?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),vt(n,{phoneVerificationInfo:Lo(t.a)}),ru(e,Cs,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return vt(n={mfaPendingCredential:n},{phoneVerificationInfo:Lo(t.a)}),ru(e,Rs,n)}))}(this,t,e)},E(sh,ah),E(uh,sh),E(ch,Qe),(t=hh.prototype).yc=function(t){lh(this,function(t){var e=[];return B(t.mfaInfo||[],(function(t){(t=ti(t))&&e.push(t)})),e}(t.hd))},t.Rb=function(){return this.a.I().then((function(t){return new oo(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Rb().then((function(n){return t.sb(r,n,e)})).then((function(t){return jh(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return ru(r,nu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=K(e.b,(function(t){return t.uid!=n}));return lh(e,r),jh(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:G(this.b,(function(t){return t.w()}))}}},fh.prototype.start=function(){this.a=this.c,ph(this,!0)},fh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},dh.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},dh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?De(new _("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?mh(this,{grant_type:"refresh_token",refresh_token:this.a}):ke(null):ke({accessToken:this.b.toString(),refreshToken:this.a})},gh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},E(wh,wn),wh.prototype.wa=function(t){this.ya=t,rs(this.a,t)},wh.prototype.la=function(){return this.ya},wh.prototype.Ga=function(){return X(this.$)},wh.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},Qr(wh.prototype,"providerId","firebase"),(t=wh.prototype).reload=function(){var t=this;return Wh(this,Rh(this).then((function(){return Uh(t).then((function(){return Dh(t)})).then(Ch)})))},t.oc=function(t){return this.I(t).then((function(t){return new th(t)}))},t.I=function(t){var e=this;return Wh(this,Rh(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new _("internal-error");return t.accessToken!=e.za&&(kh(e,t.accessToken),e.dispatchEvent(new ch("tokenChanged"))),Fh(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new _("internal-error");Oh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?G(t,(function(t){return new bh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Lh(this,e[n]);Fh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new ch("userReloaded",{hd:t}))},t.Lc=function(t){return Wr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},t.tb=function(t){var e=this,n=null;return Wh(this,t.c(this.a,this.uid).then((function(t){return jh(e,t),n=Bh(e,t,"reauthenticate"),e.h=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return Wr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},t.qb=function(t){var e=this,n=null;return Wh(this,qh(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Bh(e,t,"link"),Kh(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return Wh(this,qh(this,"phone").then((function(){return Zc(Sh(n),t,e,b(n.qb,n))})))},t.Mc=function(t,e){var n=this;return Wh(this,ke().then((function(){return Zc(Sh(n),t,e,b(n.tb,n))})),!0)},t.Bb=function(t){var e=this;return Wh(this,this.I().then((function(n){return e.a.Bb(n,t)})).then((function(t){return jh(e,t),e.reload()})))},t.ed=function(t){var e=this;return Wh(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return jh(e,t),e.reload()})))},t.Cb=function(t){var e=this;return Wh(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return jh(e,t),e.reload()})))},t.Db=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Rh(this);var e=this;return Wh(this,this.I().then((function(n){return e.a.Db(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return jh(e,t),Fh(e,"displayName",t.displayName||null),Fh(e,"photoURL",t.photoUrl||null),B(e.providerData,(function(t){"password"===t.providerId&&(Qr(t,"displayName",e.displayName),Qr(t,"photoURL",e.photoURL))})),Dh(e)})).then(Ch))},t.cd=function(t){var e=this;return Wh(this,Uh(this).then((function(n){return z(Ph(e),t)?function(t,e,n){return ru(t,Ds,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return B(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),B(Ph(e),(function(t){n[t]||Mh(e,t)})),n[Mo.PROVIDER_ID]||Qr(e,"phoneNumber",null),Dh(e)})):Dh(e).then((function(){throw new _("no-such-provider")}))})))},t.delete=function(){var t=this;return Wh(this,this.I().then((function(e){return ru(t.a,ks,{idToken:e})})).then((function(){t.dispatchEvent(new ch("userDeleted"))}))).then((function(){for(var e=0;e<t.J.length;e++)t.J[e].cancel("app-deleted");Ih(t,null),Eh(t,null),_h(t,null),t.J=[],t.D=!0,Nh(t),Qr(t,"refreshToken",null),t.i&&Lc(t.i,t)}))},t.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?b(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?b(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?b(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?b(this.Lb,this):null},t.Ec=function(t){var e=this;return Gh(this,"linkViaPopup",t,(function(){return qh(e,t.providerId).then((function(){return Dh(e)}))}),!1)},t.Nc=function(t){return Gh(this,"reauthViaPopup",t,(function(){return ke()}),!0)},t.Fc=function(t){var e=this;return Hh(this,"linkViaRedirect",t,(function(){return qh(e,t.providerId)}),!1)},t.Oc=function(t){return Hh(this,"reauthViaRedirect",t,(function(){return ke()}),!0)},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Wh(this,this.I().then((function(n){return Is(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Bh(i,t,"link"),Kh(i,t)})).then((function(){return o})))},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Wh(this,ke().then((function(){return co(Es(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Bh(i,t,"reauthenticate"),jh(i,t),i.h=null,i.reload()})).then((function(){return o})),!0)},t.ub=function(t){var e=this,n=null;return Wh(this,this.I().then((function(e){return n=e,void 0===t||ft(t)?{}:Ui(new Di(t))})).then((function(t){return e.a.ub(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Eb=function(t,e){var n=this,r=null;return Wh(this,this.I().then((function(t){return r=t,void 0===e||ft(e)?{}:Ui(new Di(e))})).then((function(e){return n.a.Eb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return Wh(this,t=co(ke(t),n.uid).then((function(t){return e=Bh(n,t,"reauthenticate"),jh(n,t),n.h=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&vt(t,this.metadata.w()),B(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),vt(t,this.O.w()),t};var Xh={name:"redirectUser",F:"session"};function Yh(t){return ic(t.b,Xh,t.a)}function Jh(t){this.a=t,this.b=ec(),this.c=null,this.f=function(t){var e=el("local"),n=el("session"),r=el("none");return function(t,e,n){var r=rc(e,n),i=nc(t,e.F);return t.get(e,n).then((function(o){var s=null;try{s=Fr(a.localStorage.getItem(r))}catch(t){}if(s&&!o)return a.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&a.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(tl,t.a).then((function(t){return t?el(t):e}))}))}))})).then((function(e){return t.c=e,Zh(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(el("local"),this.a,b(this.g,this))}function Zh(t,e){var n,r=[];for(n in Zu)Zu[n]!==e&&r.push(ic(t.b,el(Zu[n]),t.a));return r.push(ic(t.b,tl,t.a)),function(t){return new Ie((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)xe(t[s],w(o,s),a);else e(i)}))}(r)}Jh.prototype.g=function(){var t=this,e=el("local");ol(this,(function(){return ke().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return Zh(t,"local").then((function(){t.c=e}))}))}))};var tl={name:"persistence",F:"session"};function el(t){return{name:"authUser",F:t}}function nl(t,e){return ol(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function rl(t){return ol(t,(function(){return ic(t.b,t.c,t.a)}))}function il(t,e,n){return ol(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),$h(t||{})}))}))}function ol(t,e){return t.f=t.f.then(e,e),t.f}function al(t){if(this.l=!1,Qr(this,"settings",new Yc),Qr(this,"app",t),!vl(this).options||!vl(this).options.apiKey)throw new _("invalid-api-key");t=Jt.SDK_VERSION?Nr(Jt.SDK_VERSION):null,this.a=new Xa(vl(this).options&&vl(this).options.apiKey,x(A),t),this.R=[],this.s=[],this.O=[],this.hb=Jt.INTERNAL.createSubscribe(b(this.zc,this)),this.X=void 0,this.bc=Jt.INTERNAL.createSubscribe(b(this.Ac,this)),pl(this,null),this.i=new Jh(vl(this).options.apiKey+":"+vl(this).name),this.D=new Qh(vl(this).options.apiKey+":"+vl(this).name),this.$=bl(this,function(t){var e=vl(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Xh,t.a).then((function(t){return t&&e&&(t.authDomain=e),$h(t||{})}))}(t.D,vl(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),Yh(t.D)}));return bl(t,e)}(t).then((function(){return il(t.i,e,t.P)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return nl(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:rl(t.i)}))):null})).then((function(e){pl(t,e||null)}));return bl(t,n)}(this)),this.h=bl(this,function(t){return t.$.then((function(){return ll(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(el("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=b(this.Zc,this),this.Ba=b(this.da,this),this.ya=b(this.mc,this),this.za=b(this.wc,this),this.Aa=b(this.xc,this),this.b=null,function(t){var e=vl(t).options.authDomain,n=vl(t).options.apiKey;e&&Or()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=Gc(e,n,vl(t).name,t.P),Pc(t.b,t),yl(t)&&xh(yl(t)),t.m){xh(t.m);var r=t.m;r.wa(t.la()),Ih(r,t),Th(r=t.m,t.J),_h(r,t),is((r=t.m).a,t.P),Eh(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=b(this.delete,this),this.INTERNAL.logFramework=b(this.Gc,this),this.u=0,wn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.P){var t=Vn(this.P.url);t=Yr({protocol:t.c,host:t.a,port:t.g,options:Yr({disableWarnings:this.P.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.P=null}function sl(t){Qe.call(this,"languageCodeChanged"),this.h=t}function ul(t){Qe.call(this,"emulatorConfigChanged"),this.c=t}function cl(t){Qe.call(this,"frameworkChanged"),this.f=t}function hl(t){return t.Oa||De(new _("auth-domain-config-required"))}function ll(t){if(!Or())return De(new _("operation-not-supported-in-this-environment"));var e=hl(t).then((function(){return t.b.qa()})).then((function(t){return t?Yr(t):null}));return bl(t,e)}function fl(t,e){var n={};return n.apiKey=vl(t).options.apiKey,n.authDomain=vl(t).options.authDomain,n.appName=vl(t).name,t.P&&(n.emulatorConfig=t.P),t.$.then((function(){return function(t,e,n,r){var i=new wh(t,e);return n&&(i.ha=n),r&&Th(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return yl(t)&&e.uid==yl(t).uid?(Vh(yl(t),e),t.da(e)):(pl(t,e),xh(e),t.da(e))})).then((function(){gl(t)}))}function pl(t,e){yl(t)&&(function(t,e){$(t.S,(function(t){return t==e}))}(yl(t),t.Ba),ln(yl(t),"tokenChanged",t.ya),ln(yl(t),"userDeleted",t.za),ln(yl(t),"userInvalidated",t.Aa),Nh(yl(t))),e&&(e.S.push(t.Ba),un(e,"tokenChanged",t.ya),un(e,"userDeleted",t.za),un(e,"userInvalidated",t.Aa),0<t.u&&Ah(e)),Qr(t,"currentUser",e),e&&(e.wa(t.la()),Ih(e,t),Th(e,t.J),_h(e,t),is(e.a,t.P),Eh(e,t))}function dl(t,e){var n=null,r=null;return bl(t,e.then((function(e){return n=Vo(e),r=Qi(e),fl(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=oh(e.w(),t,b(t.kc,t))),n||e})).then((function(){return Yr({user:yl(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function vl(t){return t.app}function yl(t){return t.currentUser}function ml(t){return yl(t)&&yl(t)._lat||null}function gl(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](ml(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](ml(t))}}function bl(t,e){return t.R.push(e),e.oa((function(){W(t.R,e)})),e}function wl(){}function Il(){this.a={},this.b=1e12}Jh.prototype.xb=function(t){var e=null,n=this;return function(t){var e=new _("invalid-persistence-type"),n=new _("unsupported-persistence-type");t:{for(r in Zu)if(Zu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(Ir()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Cu()&&"none"!==t)throw n;break;default:if(!xr()&&"none"!==t)throw n}}(t),ol(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,Zh(n,t)})).then((function(){if(n.c=el(t),e)return n.b.set(n.c,e,n.a)})):ke()}))},E(al,wn),E(sl,Qe),E(ul,Qe),E(cl,Qe),(t=al.prototype).xb=function(t){return bl(this,t=this.i.xb(t))},t.wa=function(t){this.aa===t||this.l||(this.aa=t,rs(this.a,this.aa),this.dispatchEvent(new sl(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=a.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new _("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),a.document&&!t&&mr().then((function(){var t=a.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),a.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.P={url:t,ec:e},this.settings.ib=!0,is(this.a,this.P),this.dispatchEvent(new ul(this.P))}},t.Gc=function(t){this.J.push(t),as(this.a,Jt.SDK_VERSION?Nr(Jt.SDK_VERSION,this.J):null),this.dispatchEvent(new cl(this.J))},t.Ga=function(){return X(this.J)},t.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:vl(this).options.apiKey,authDomain:vl(this).options.authDomain,appName:vl(this).name,currentUser:yl(this)&&yl(this).w()}},t.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?b(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return dl(i,ws(i.a,o))}))},t.Xc=function(t){if(!Or())return De(new _("operation-not-supported-in-this-environment"));var e=this,n=$i(t.providerId),r=Vr(),i=null;(!Pr()||br())&&vl(this).options.authDomain&&t.isOAuthProvider&&(i=gu(vl(this).options.authDomain,vl(this).options.apiKey,vl(this).name,"signInViaPopup",t,null,r,Jt.SDK_VERSION||null,null,null,this.T(),this.P));var o=dr(i,n&&n.ua,n&&n.ta);return bl(this,n=hl(this).then((function(n){return Vc(n,o,"signInViaPopup",t,r,!!i,e.T())})).then((function(){return new Ie((function(t,n){e.na("signInViaPopup",null,new _("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=qc(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&pr(o),t?Yr(t):null})).o((function(t){throw o&&pr(o),t})))},t.Yc=function(t){if(!Or())return De(new _("operation-not-supported-in-this-environment"));var e=this;return bl(this,hl(this).then((function(){return function(t){return ol(t,(function(){return t.b.set(tl,t.c.F,t.a)}))}(e.i)})).then((function(){return jc(e.b,"signInViaRedirect",t,void 0,e.T())})))},t.qa=function(){var t=this;return ll(this).then((function(e){return t.b&&Wc(t.b.b),e})).o((function(e){throw t.b&&Wc(t.b.b),e}))},t.dd=function(t){if(!t)return De(new _("null-user"));if(this.S!=t.tenantId)return De(new _("tenant-id-mismatch"));var e=this,n={};n.apiKey=vl(this).options.apiKey,n.authDomain=vl(this).options.authDomain,n.appName=vl(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[Ja]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new wh(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&Th(e,r),Vh(e,t),e}(t,n,e.D,e.Ga());return bl(this,this.h.then((function(){if(vl(e).options.apiKey!=t.l)return r.reload()})).then((function(){return yl(e)&&t.uid==yl(e).uid?(Vh(yl(e),t),e.da(t)):(pl(e,r),xh(r),e.da(r))})).then((function(){gl(e)})))},t.Ab=function(){var t=this;return bl(this,this.h.then((function(){return t.b&&Wc(t.b.b),yl(t)?(pl(t,null),rl(t.i).then((function(){gl(t)}))):ke()})))},t.Zc=function(){var t=this;return il(this.i,vl(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=yl(t)&&e){n=yl(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Vh(yl(t),e),yl(t).I();(yl(t)||e)&&(pl(t,e),e&&(xh(e),e.ha=t.D),t.b&&Pc(t.b,t),gl(t))}}))},t.da=function(t){return nl(this.i,t)},t.mc=function(){gl(this),this.da(yl(this))},t.wc=function(){this.Ab()},t.xc=function(){this.Ab()},t.kc=function(t){var e=this;return this.h.then((function(){return dl(e,ke(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(yl(e))}))},t.Ac=function(t){var e=this;!function(t,e){t.O.push(e),bl(t,t.h.then((function(){!t.l&&z(t.O,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(ml(t)))})))}(this,(function(){t.next(yl(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(yl(r)):"function"==typeof t.next&&t.next(yl(r))})),this.hb(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"==typeof t?t(yl(r)):"function"==typeof t.next&&t.next(yl(r))})),this.bc(t,e,n)},t.nc=function(t){var e=this;return bl(this,this.h.then((function(){return yl(e)?yl(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return dl(e,ru(e.a,Ys,{token:t}))})).then((function(t){var n=t.user;return Fh(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return dl(n,ru(n.a,Js,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return dl(n,ru(n.a,As,{email:t,password:e}))}))},t.$a=function(t){var e=this;return this.h.then((function(){return dl(e,t.ka(e.a))}))},t.Sc=function(t){return Wr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},t.zb=function(){var t=this;return this.h.then((function(){var e=yl(t);if(e&&e.isAnonymous){var n=Yr({providerId:null,isNewUser:!1});return Yr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return dl(t,t.a.zb()).then((function(e){var n=e.user;return Fh(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return yl(this)&&yl(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&yl(this)&&Ah(yl(this))},t.Pc=function(t){var e=this;B(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&yl(this)&&Nh(yl(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),bl(this,this.h.then((function(){e.l||z(e.s,t)&&t(ml(e))})))},t.removeAuthTokenListener=function(t){$(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i).b.removeListener(el("local"),t.a,this.ja),this.b&&(Lc(this.b,this),Wc(this.b.b)),Promise.resolve()},t.hc=function(t){return bl(this,function(t,e){return ru(t,Ns,{identifier:e,continueUri:Cr()?cr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Bc=function(t){return!!Co(t)},t.wb=function(t,e){var n=this;return bl(this,ke().then((function(){var t=new Di(e);if(!t.c)throw new _("argument-error",Ci+" must be true when sending sign in link to email");return Ui(t)})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.jd=function(t){return this.Ra(t).then((function(t){return t.data.email}))},t.nb=function(t,e){return bl(this,this.a.nb(t,e).then((function(){})))},t.Ra=function(t){return bl(this,this.a.Ra(t).then((function(t){return new ai(t)})))},t.jb=function(t){return bl(this,this.a.jb(t).then((function(){})))},t.vb=function(t,e){var n=this;return bl(this,ke().then((function(){return void 0===e||ft(e)?{}:Ui(new Di(e))})).then((function(e){return n.a.vb(t,e)})).then((function(){})))},t.Wc=function(t,e){return bl(this,Zc(this,t,e,b(this.$a,this)))},t.Vc=function(t,e){var n=this;return bl(this,ke().then((function(){var r=e||cr(),i=Oo(t,r);if(!(r=Co(r)))throw new _("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new _("tenant-id-mismatch");return n.$a(i)})))},wl.prototype.render=function(){},wl.prototype.reset=function(){},wl.prototype.getResponse=function(){},wl.prototype.execute=function(){};var El=null;function Tl(t,e){return(e=_l(e))&&t.a[e]||null}function _l(t){return(t=void 0===t?1e12:t)?t.toString():null}function Sl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ce(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():un(this.f,"click",this.i)}function Al(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Nl(){}function kl(){}Il.prototype.render=function(t,e){return this.a[this.b.toString()]=new Sl(t,e),this.b++},Il.prototype.reset=function(t){var e=Tl(this,t);t=_l(t),e&&t&&(e.delete(),delete this.a[t])},Il.prototype.getResponse=function(t){return(t=Tl(this,t))?t.getResponse():null},Il.prototype.execute=function(t){(t=Tl(this,t))&&t.execute()},Sl.prototype.getResponse=function(){return Al(this),this.b},Sl.prototype.execute=function(){Al(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},Sl.prototype.delete=function(){Al(this),this.g=!0,clearTimeout(this.a),this.a=null,ln(this.f,"click",this.i)},Qr(Nl,"FACTOR_ID","phone"),kl.prototype.g=function(){return El||(El=new Il),ke(El)},kl.prototype.c=function(){};var Dl=null;function xl(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Ol=new mt(It,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Cl=new qr(3e4,6e4);xl.prototype.g=function(t){var e=this;return new Ie((function(n,r){var i=setTimeout((function(){r(new _("network-request-failed"))}),Cl.get());!a.grecaptcha||t!==e.f&&!e.b?(a[e.a]=function(){if(a.grecaptcha){e.f=t;var o=a.grecaptcha.render;a.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(a.grecaptcha)}else clearTimeout(i),r(new _("internal-error"));delete a[e.a]},ke(Ka(St(Ol,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new _("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(a.grecaptcha))}))},xl.prototype.c=function(){this.b--};var Rl=null;function Pl(t,e,n,r,i,o,s){if(Qr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,s?(Dl||(Dl=new kl),s=Dl):(Rl||(Rl=new xl),s=Rl),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Fl])throw new _("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Vl],!a.document)throw new _("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ce(e)||!this.i&&ce(e).hasChildNodes())throw new _("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Xa(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Ll];this.a[Ll]=function(t){if(Ul(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Dr(c,a);"function"==typeof e&&e(t)}};var h=this.a[Ml];this.a[Ml]=function(){if(Ul(u,null),"function"==typeof h)h();else if("string"==typeof h){var t=Dr(h,a);"function"==typeof t&&t()}}}var Ll="callback",Ml="expired-callback",Fl="sitekey",Vl="size";function Ul(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function jl(t,e){return t.h.push(e),e.oa((function(){W(t.h,e)})),e}function ql(t){if(t.D)throw new _("internal-error","RecaptchaVerifier instance has been destroyed.")}function Bl(t,e,n){var r=!1;try{this.b=n||Jt.app()}catch(t){throw new _("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new _("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Jt.SDK_VERSION?Nr(Jt.SDK_VERSION,o):null,Pl.call(this,n,t,e,(function(){try{var t=i.b.auth().la()}catch(e){t=null}return t}),o,x(A),r)}function Kl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new _("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Gl.length)throw new _("internal-error","Argument validator received an unsupported number of arguments.");n=Gl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new _("argument-error",t+" failed: "+r)}(t=Pl.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=jl(this,ke().then((function(){if(Cr()&&!wr())return mr();throw new _("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,ru(t.s,js,{})})).then((function(e){t.a[Fl]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){ql(this);var t=this;return jl(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=ce(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!ue&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Bt(a.name),'"'),a.type){o.push(' type="',Bt(a.type),'"');var s={};vt(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=ve(i,o),a&&("string"==typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):he(o,a)),2<r.length&&de(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){ql(this);var t=this;return jl(this,this.render().then((function(e){return new Ie((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){$(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){ql(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){ql(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ce(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},E(Bl,Pl);var Gl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Hl(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function zl(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Wl(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:d}}function $l(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Ql(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Xl(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function Yl(t,e){return d(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Jl(t){return d(t)&&"string"==typeof t.uid}function Zl(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function tf(t,e){for(var n in e){var r=e[n].name;t[r]=rf(r,t[n],e[n].j)}}function ef(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:w((function(t){return this[t]}),n),set:w((function(t,e,n,r){Kl(t,[n],[r],!0),this[e]=r}),r,n,e[n].kb),enumerable:!0})}}function nf(t,e,n,r){t[e]=rf(e,n,r)}function rf(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Kl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}tf(al.prototype,{jb:{name:"applyActionCode",j:[Hl("code")]},Ra:{name:"checkActionCode",j:[Hl("code")]},nb:{name:"confirmPasswordReset",j:[Hl("code"),Hl("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Hl("email"),Hl("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Hl("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Hl("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Zl(Wl(),$l(),"nextOrObserver"),$l("opt_error",!0),$l("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Zl(Wl(),$l(),"nextOrObserver"),$l("opt_error",!0),$l("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[Hl("email"),Zl(Wl("opt_actionCodeSettings",!0),Ql(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[Hl("email"),Wl("actionCodeSettings")]},xb:{name:"setPersistence",j:[Hl("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Xl()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[Xl()]},Tc:{name:"signInWithCustomToken",j:[Hl("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Hl("email"),Hl("password")]},Vc:{name:"signInWithEmailLink",j:[Hl("email"),Hl("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Hl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[Zl({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof wh)}},Ql(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Hl(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Hl("url"),Wl("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Hl("code")]}}),ef(al.prototype,{lc:{name:"languageCode",kb:Zl(Hl(),Ql(),"languageCode")},ti:{name:"tenantId",kb:Zl(Hl(),Ql(),"tenantId")}}),al.Persistence=Zu,al.Persistence.LOCAL="local",al.Persistence.SESSION="session",al.Persistence.NONE="none",tf(wh.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[zl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[zl("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Xl()]},qb:{name:"linkWithCredential",j:[Xl()]},Dc:{name:"linkWithPhoneNumber",j:[Hl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Xl()]},tb:{name:"reauthenticateWithCredential",j:[Xl()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Hl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[Zl(Wl("opt_actionCodeSettings",!0),Ql(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Hl(null,!0)]},cd:{name:"unlink",j:[Hl("provider")]},Bb:{name:"updateEmail",j:[Hl("email")]},Cb:{name:"updatePassword",j:[Hl("password")]},ed:{name:"updatePhoneNumber",j:[Xl("phone")]},Db:{name:"updateProfile",j:[Wl("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[Hl("email"),Zl(Wl("opt_actionCodeSettings",!0),Ql(null,!0),"opt_actionCodeSettings",!0)]}}),tf(Il.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),tf(wl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),tf(Ie.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),ef(Yc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:zl("appVerificationDisabledForTesting")}}),tf(Jc.prototype,{confirm:{name:"confirm",j:[Hl("verificationCode")]}}),nf(uo,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[yo,Do,Po,fo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[Zl(Hl(),Wl(),"json")]),nf(xo,"credential",(function(t,e){return new ko(t,e)}),[Hl("email"),Hl("password")]),tf(ko.prototype,{w:{name:"toJSON",j:[Hl(null,!0)]}}),tf(wo.prototype,{Ca:{name:"addScope",j:[Hl("scope")]},Ka:{name:"setCustomParameters",j:[Wl("customOAuthParameters")]}}),nf(wo,"credential",Io,[Zl(Hl(),Wl(),"token")]),nf(xo,"credentialWithLink",Oo,[Hl("email"),Hl("emailLink")]),tf(Eo.prototype,{Ca:{name:"addScope",j:[Hl("scope")]},Ka:{name:"setCustomParameters",j:[Wl("customOAuthParameters")]}}),nf(Eo,"credential",To,[Zl(Hl(),Wl(),"token")]),tf(_o.prototype,{Ca:{name:"addScope",j:[Hl("scope")]},Ka:{name:"setCustomParameters",j:[Wl("customOAuthParameters")]}}),nf(_o,"credential",So,[Zl(Hl(),Zl(Wl(),Ql()),"idToken"),Zl(Hl(),Ql(),"accessToken",!0)]),tf(Ao.prototype,{Ka:{name:"setCustomParameters",j:[Wl("customOAuthParameters")]}}),nf(Ao,"credential",No,[Zl(Hl(),Wl(),"token"),Hl("secret",!0)]),tf(bo.prototype,{Ca:{name:"addScope",j:[Hl("scope")]},credential:{name:"credential",j:[Zl(Hl(),Zl(Wl(),Ql()),"optionsOrIdToken"),Zl(Hl(),Ql(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Wl("customOAuthParameters")]}}),tf(po.prototype,{w:{name:"toJSON",j:[Hl(null,!0)]}}),tf(ho.prototype,{w:{name:"toJSON",j:[Hl(null,!0)]}}),nf(Mo,"credential",Fo,[Hl("verificationId"),Hl("verificationCode")]),tf(Mo.prototype,{fb:{name:"verifyPhoneNumber",j:[Zl(Hl(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Yl(t.session,ao)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Yl(t.session,so)&&Jl(t.multiFactorHint):t.session&&t.multiFactorUid?Yl(t.session,so)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),tf(Ro.prototype,{w:{name:"toJSON",j:[Hl(null,!0)]}}),tf(_.prototype,{toJSON:{name:"toJSON",j:[Hl(null,!0)]}}),tf(zo.prototype,{toJSON:{name:"toJSON",j:[Hl(null,!0)]}}),tf(Ho.prototype,{toJSON:{name:"toJSON",j:[Hl(null,!0)]}}),tf(ih.prototype,{toJSON:{name:"toJSON",j:[Hl(null,!0)]}}),tf(eh.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}]}}),tf(hh.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}},Hl("displayName",!0)]},bd:{name:"unenroll",j:[Zl({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Jl},Hl(),"multiFactorInfoIdentifier")]}}),tf(Bl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),nf(wi,"parseLink",ki,[Hl("link")]),nf(Nl,"assertion",(function(t){return new uh(t)}),[Xl("phone")]),function(){if(void 0===Jt||!Jt.INTERNAL||!Jt.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ui,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:si,VERIFY_AND_CHANGE_EMAIL:ci,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:al,AuthCredential:uo,Error:_};nf(t,"EmailAuthProvider",xo,[]),nf(t,"FacebookAuthProvider",wo,[]),nf(t,"GithubAuthProvider",Eo,[]),nf(t,"GoogleAuthProvider",_o,[]),nf(t,"TwitterAuthProvider",Ao,[]),nf(t,"OAuthProvider",bo,[Hl("providerId")]),nf(t,"SAMLAuthProvider",go,[Hl("providerId")]),nf(t,"PhoneAuthProvider",Mo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof al)}}]),nf(t,"RecaptchaVerifier",Bl,[Zl(Hl(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Wl("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof Jt.app.App)}}]),nf(t,"ActionCodeURL",wi,[]),nf(t,"PhoneMultiFactorGenerator",Nl,[]),Jt.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new al(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),Jt.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:b((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:b(t.nc,t),addAuthTokenListener:b(t.cc,t),removeAuthTokenListener:b(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Jt.registerVersion("@firebase/auth","0.16.4"),Jt.INTERNAL.extendNamespace({User:wh})}()}.apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var Zt=function(t,e){return(Zt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function te(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var ee,ne="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},re=re||{},ie=ne||self;function oe(){}function ae(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function se(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var ue="closure_uid_"+(1e9*Math.random()>>>0),ce=0;function he(t,e,n){return t.call.apply(t.bind,arguments)}function le(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function fe(t,e,n){return(fe=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?he:le).apply(null,arguments)}function pe(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function de(){return Date.now()}function ve(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function ye(){this.j=this.j,this.i=this.i}ye.prototype.j=!1,ye.prototype.ja=function(){var t;!this.j&&(this.j=!0,this.G(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,ue)&&t[ue]||(t[ue]=++ce))},ye.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var me=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ge=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function be(t){return Array.prototype.concat.apply([],arguments)}function we(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Ie(t){return/^[\s\xa0]*$/.test(t)}var Ee,Te=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function _e(t,e){return-1!=t.indexOf(e)}function Se(t,e){return t<e?-1:t>e?1:0}t:{var Ae=ie.navigator;if(Ae){var Ne=Ae.userAgent;if(Ne){Ee=Ne;break t}}Ee=""}function ke(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function De(t){var e={};for(var n in t)e[n]=t[n];return e}var xe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Oe(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<xe.length;o++)n=xe[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ce(t){return Ce[" "](t),t}Ce[" "]=oe;var Re,Pe,Le=_e(Ee,"Opera"),Me=_e(Ee,"Trident")||_e(Ee,"MSIE"),Fe=_e(Ee,"Edge"),Ve=Fe||Me,Ue=_e(Ee,"Gecko")&&!(_e(Ee.toLowerCase(),"webkit")&&!_e(Ee,"Edge"))&&!(_e(Ee,"Trident")||_e(Ee,"MSIE"))&&!_e(Ee,"Edge"),je=_e(Ee.toLowerCase(),"webkit")&&!_e(Ee,"Edge");function qe(){var t=ie.document;return t?t.documentMode:void 0}t:{var Be="",Ke=(Pe=Ee,Ue?/rv:([^\);]+)(\)|;)/.exec(Pe):Fe?/Edge\/([\d\.]+)/.exec(Pe):Me?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Pe):je?/WebKit\/(\S+)/.exec(Pe):Le?/(?:Version)[ \/]?(\S+)/.exec(Pe):void 0);if(Ke&&(Be=Ke?Ke[1]:""),Me){var Ge=qe();if(null!=Ge&&Ge>parseFloat(Be)){Re=String(Ge);break t}}Re=Be}var He,ze={};function We(t){return function(t,e){var n=ze;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=Te(String(Re)).split("."),r=Te(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=Se(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||Se(0==a[2].length,0==s[2].length)||Se(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}if(ie.document&&Me){var $e=qe();He=$e||(parseInt(Re,10)||void 0)}else He=void 0;var Qe=He,Xe=!Me||9<=Number(Qe),Ye=Me&&!We("9"),Je=function(){if(!ie.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ie.addEventListener("test",oe,e),ie.removeEventListener("test",oe,e)}catch(t){}return t}();function Ze(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function tn(t,e){if(Ze.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Ue){t:{try{Ce(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:en[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Ze.prototype.b=function(){this.defaultPrevented=!0},ve(tn,Ze);var en={2:"touch",3:"pen",4:"mouse"};tn.prototype.b=function(){tn.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ye)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var nn="closure_listenable_"+(1e6*Math.random()|0),rn=0;function on(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++rn,this.Y=this.Z=!1}function an(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function sn(t){this.src=t,this.a={},this.b=0}function un(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=me(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(an(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function cn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}sn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=cn(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):((e=new on(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var hn="closure_lm_"+(1e6*Math.random()|0),ln={};function fn(t,e,n,r,i){if(r&&r.once)return dn(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)fn(t,e[o],n,r,i);return null}return n=En(n),t&&t[nn]?t.va(e,n,se(r)?!!r.capture:!!r,i):pn(t,e,n,!1,r,i)}function pn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=se(i)?!!i.capture:!!i;if(a&&!Xe)return null;var s=wn(t);if(s||(t[hn]=s=new sn(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=bn,e=Xe?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Je||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(mn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function dn(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)dn(t,e[o],n,r,i);return null}return n=En(n),t&&t[nn]?t.wa(e,n,se(r)?!!r.capture:!!r,i):pn(t,e,n,!0,r,i)}function vn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)vn(t,e[o],n,r,i);else r=se(r)?!!r.capture:!!r,n=En(n),t&&t[nn]?(t=t.c,(e=String(e).toString())in t.a&&(-1<(n=cn(o=t.a[e],n,r,i))&&(an(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=wn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=cn(e,n,r,i)),(n=-1<t?e[t]:null)&&yn(n))}function yn(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[nn])un(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(mn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=wn(e))?(un(n,t),0==n.b&&(n.src=null,e[hn]=null)):an(t)}}}function mn(t){return t in ln?ln[t]:ln[t]="on"+t}function gn(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&yn(t),n.call(r,e)}function bn(t,e){if(t.Y)return!0;if(!Xe){if(!e)t:{e=["window","event"];for(var n=ie,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return gn(t,e=new tn(e,this))}return gn(t,new tn(e,this))}function wn(t){return(t=t[hn])instanceof sn?t:null}var In="__closure_events_fn_"+(1e9*Math.random()>>>0);function En(t){return"function"==typeof t?t:(t[In]||(t[In]=function(e){return t.handleEvent(e)}),t[In])}function Tn(){ye.call(this),this.c=new sn(this),this.J=this,this.C=null}function _n(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Ze(e,t);else if(e instanceof Ze)e.target=e.target||t;else{var i=e;Oe(e=new Ze(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.a=n[o];i=Sn(a,r,!0,e)&&i}if(i=Sn(a=e.a=t,r,!0,e)&&i,i=Sn(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Sn(a=e.a=n[o],r,!1,e)&&i}function Sn(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.Y&&a.capture==n){var s=a.listener,u=a.ca||a.src;a.Z&&un(t.c,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}ve(Tn,ye),Tn.prototype[nn]=!0,(ee=Tn.prototype).addEventListener=function(t,e,n,r){fn(this,t,e,n,r)},ee.removeEventListener=function(t,e,n,r){vn(this,t,e,n,r)},ee.G=function(){if(Tn.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)an(n[r]);delete e.a[t],e.b--}}this.C=null},ee.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},ee.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var An=ie.JSON.stringify;function Nn(){this.b=this.a=null}var kn,Dn=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new On}),(function(t){t.reset()}));function xn(){var t=Ln,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function On(){this.next=this.b=this.a=null}function Cn(t){ie.setTimeout((function(){throw t}),0)}function Rn(t,e){kn||function(){var t=ie.Promise.resolve(void 0);kn=function(){t.then(Mn)}}(),Pn||(kn(),Pn=!0),Ln.add(t,e)}Nn.prototype.add=function(t,e){var n=Dn.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},On.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},On.prototype.reset=function(){this.next=this.b=this.a=null};var Pn=!1,Ln=new Nn;function Mn(){for(var t;t=xn();){try{t.a.call(t.b)}catch(t){Cn(t)}var e=Dn;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Pn=!1}function Fn(t,e){Tn.call(this),this.b=t||1,this.a=e||ie,this.f=fe(this.Za,this),this.g=de()}function Vn(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Un(t,e,n){if("function"==typeof t)n&&(t=fe(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=fe(t.handleEvent,t)}return 2147483647<Number(e)?-1:ie.setTimeout(t,e||0)}function jn(t){t.a=Un((function(){t.a=null,t.c&&(t.c=!1,jn(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}ve(Fn,Tn),(ee=Fn.prototype).aa=!1,ee.M=null,ee.Za=function(){if(this.aa){var t=de()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),_n(this,"tick"),this.aa&&(Vn(this),this.start()))}},ee.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=de())},ee.G=function(){Fn.X.G.call(this),Vn(this),delete this.a};var qn=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Zt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:jn(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(ie.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(ye);function Bn(t){ye.call(this),this.b=t,this.a={}}ve(Bn,ye);var Kn=[];function Gn(t,e,n,r){Array.isArray(n)||(n&&(Kn[0]=n.toString()),n=Kn);for(var i=0;i<n.length;i++){var o=fn(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Hn(t){ke(t.a,(function(t,e){this.a.hasOwnProperty(e)&&yn(t)}),t),t.a={}}function zn(){this.a=!0}function Wn(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return An(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}Bn.prototype.G=function(){Bn.X.G.call(this),Hn(this)},Bn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},zn.prototype.info=function(){};var $n={},Qn=null;function Xn(){return Qn=Qn||new Tn}function Yn(t){Ze.call(this,$n.Fa,t)}function Jn(t){var e=Xn();_n(e,new Yn(e,t))}function Zn(t,e){Ze.call(this,$n.STAT_EVENT,t),this.stat=e}function tr(t){var e=Xn();_n(e,new Zn(e,t))}function er(t){Ze.call(this,$n.Ga,t)}function nr(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return ie.setTimeout((function(){t()}),e)}$n.Fa="serverreachability",ve(Yn,Ze),$n.STAT_EVENT="statevent",ve(Zn,Ze),$n.Ga="timingevent",ve(er,Ze);var rr={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},ir={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function or(){}function ar(t){var e;return(e=t.a)||(e=t.a={}),e}function sr(){}or.prototype.a=null;var ur,cr={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function hr(){Ze.call(this,"d")}function lr(){Ze.call(this,"c")}function fr(){}function pr(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Bn(this),this.P=dr,t=Ve?125:void 0,this.R=new Fn(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}ve(hr,Ze),ve(lr,Ze),ve(fr,or),ur=new fr;var dr=45e3,vr={},yr={};function mr(t,e,n){t.H=1,t.i=Ur(Rr(e)),t.j=n,t.I=!0,gr(t,null)}function gr(t,e){t.u=de(),Ir(t),t.l=Rr(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Jr(n.b,"t",r),t.D=0,t.a=zi(t.g,t.g.C?e:null),0<t.O&&(t.F=new qn(fe(t.Ca,t,t.a),t.O)),Gn(t.J,t.a,"readystatechange",t.Xa),e=t.B?De(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Jn(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var h=c[0];c=c[1];var l=h.split("_");a=2<=l.length&&"type"==l[1]?a+(h+"=")+c+"&":a+(h+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function br(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=wr(t,n);if(i==yr){4==e&&(t.h=4,tr(14),r=!1),Wn(t.c,t.f,null,"[Incomplete Response]");break}if(i==vr){t.h=4,tr(15),Wn(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Wn(t.c,t.f,i,null),Ar(t,i)}4==e&&0==n.length&&(t.h=1,tr(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Vi(e),e.F=!0,tr(11))):(Wn(t.c,t.f,n,"[Invalid Chunked Response]"),Sr(t),_r(t))}function wr(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?yr:(n=Number(e.substring(n,r)),isNaN(n)?vr:(r+=1)+n>e.length?yr:(e=e.substr(r,n),t.D=r+n,e))}function Ir(t){t.T=de()+t.P,Er(t,t.P)}function Er(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=nr(fe(t.Va,t),e)}function Tr(t){t.o&&(ie.clearTimeout(t.o),t.o=null)}function _r(t){0==t.g.v||t.A||qi(t.g,t)}function Sr(t){Tr(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Vn(t.R),Hn(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Ar(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||oi(n.b,t)))if(n.I=t.N,!t.C&&oi(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;ji(n),Di(n)}Fi(n),tr(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=nr(fe(n.Sa,n),6e3));if(1>=ii(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else Ki(n,11)}else if((t.C||n.a==t)&&ji(n),!Ie(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var a=i[4];null!=a&&(n.pa=a,n.c.info("SVER="+n.pa));var s=i[5];if(null!=s&&"number"==typeof s&&0<s){var u=1.5*s;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=u.b;!l.a&&(_e(h,"spdy")||_e(h,"quic")||_e(h,"h2"))&&(l.f=l.g,l.a=new Set,l.b&&(ai(l,l.b),l.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Vr(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=de()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((u=n).la=Hi(u,u.C?u.ga:null,u.fa),p.C){si(u.b,p);var d=p,v=u.D;v&&d.setTimeout(v),d.o&&(Tr(d),Ir(d)),u.a=p}else Mi(u);0<n.g.length&&Ci(n)}else"stop"!=i[0]&&"close"!=i[0]||Ki(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Ki(n,7):ki(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Jn(4)}catch(t){}}function Nr(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ae(t)||"string"==typeof t)ge(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(ae(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(ae(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function kr(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof kr)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Dr(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];xr(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)xr(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function xr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(ee=pr.prototype).setTimeout=function(t){this.P=t},ee.Xa=function(t){t=t.target;var e=this.F;e&&3==_i(t)?e.f():this.Ca(t)},ee.Ca=function(t){try{if(t==this.a)t:{var e=_i(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Ve&&!this.a.$())){this.A||4!=e||7==n||Jn(8==n||0>=r?3:2),Tr(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var a,s=this.a;if((a=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ie(a)){var u=a;break e}}u=null}if(!u){this.b=!1,this.h=3,tr(12),Sr(this),_r(this);break t}Wn(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ar(this,u)}this.I?(br(this,e,o),Ve&&this.b&&3==e&&(Gn(this.J,this.R,"tick",this.Wa),this.R.start())):(Wn(this.c,this.f,o,null),Ar(this,o)),4==e&&Sr(this),this.b&&!this.A&&(4==e?qi(this.g,this):(this.b=!1,Ir(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,tr(12)):(this.h=0,tr(13)),Sr(this),_r(this)}}}catch(t){}},ee.Wa=function(){if(this.a){var t=_i(this.a),e=this.a.$();this.D<e.length&&(Tr(this),br(this,t,e),this.b&&4!=t&&Ir(this))}},ee.cancel=function(){this.A=!0,Sr(this)},ee.Va=function(){this.o=null;var t=de();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(Jn(3),tr(17)),Sr(this),this.h=2,_r(this)):Er(this,this.T-t)},(ee=kr.prototype).K=function(){Dr(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},ee.L=function(){return Dr(this),this.a.concat()},ee.get=function(t,e){return xr(this.b,t)?this.b[t]:e},ee.set=function(t,e){xr(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},ee.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Or=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Cr(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Cr){this.a=void 0!==e?e:t.a,Pr(this,t.f),this.j=t.j,Lr(this,t.c),Mr(this,t.h),this.g=t.g,e=t.b;var n=new $r;n.c=e.c,e.a&&(n.a=new kr(e.a),n.b=e.b),Fr(this,n),this.i=t.i}else t&&(n=String(t).match(Or))?(this.a=!!e,Pr(this,n[1]||"",!0),this.j=jr(n[2]||""),Lr(this,n[3]||"",!0),Mr(this,n[4]),this.g=jr(n[5]||"",!0),Fr(this,n[6]||"",!0),this.i=jr(n[7]||"")):(this.a=!!e,this.b=new $r(null,this.a))}function Rr(t){return new Cr(t)}function Pr(t,e,n){t.f=n?jr(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Lr(t,e,n){t.c=n?jr(e,!0):e}function Mr(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Fr(t,e,n){e instanceof $r?(t.b=e,function(t,e){e&&!t.f&&(Qr(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Xr(this,e),Jr(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=qr(e,zr)),t.b=new $r(e,t.a))}function Vr(t,e,n){t.b.set(e,n)}function Ur(t){return Vr(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^de()).toString(36)),t}function jr(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qr(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Br),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Br(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Cr.prototype.toString=function(){var t=[],e=this.f;e&&t.push(qr(e,Kr,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(qr(e,Kr,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(qr(n,"/"==n.charAt(0)?Hr:Gr,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",qr(n,Wr)),t.join("")};var Kr=/[#\/\?@]/g,Gr=/[#\?:]/g,Hr=/[#\?]/g,zr=/[#\?@]/g,Wr=/#/g;function $r(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Qr(t){t.a||(t.a=new kr,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Xr(t,e){Qr(t),e=Zr(t,e),xr(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,xr((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Dr(t)))}function Yr(t,e){return Qr(t),e=Zr(t,e),xr(t.a.b,e)}function Jr(t,e,n){Xr(t,e),0<n.length&&(t.c=null,t.a.set(Zr(t,e),we(n)),t.b+=n.length)}function Zr(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(ee=$r.prototype).add=function(t,e){Qr(this),this.c=null,t=Zr(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},ee.forEach=function(t,e){Qr(this),this.a.forEach((function(n,r){ge(n,(function(n){t.call(e,n,r,this)}),this)}),this)},ee.L=function(){Qr(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},ee.K=function(t){Qr(this);var e=[];if("string"==typeof t)Yr(this,t)&&(e=be(e,this.a.get(Zr(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=be(e,t[n])}return e},ee.set=function(t,e){return Qr(this),this.c=null,Yr(this,t=Zr(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},ee.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},ee.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var ti=function(t,e){this.b=t,this.a=e};function ei(t){this.g=t||ni,ie.PerformanceNavigationTiming?t=0<(t=ie.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(ie.ia&&ie.ia.ya&&ie.ia.ya()&&ie.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var ni=10;function ri(t){return!!t.b||!!t.a&&t.a.size>=t.f}function ii(t){return t.b?1:t.a?t.a.size:0}function oi(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function ai(t,e){t.a?t.a.add(e):t.b=e}function si(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function ui(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=te(t.a.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return we(t.c)}function ci(){}function hi(){this.a=new ci}function li(t,e,n){var r=n||"";try{Nr(t,(function(t,n){var i=t;se(t)&&(i=An(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function fi(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}ei.prototype.cancel=function(){var t,e;if(this.c=ui(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=te(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},ci.prototype.stringify=function(t){return ie.JSON.stringify(t,void 0)},ci.prototype.parse=function(t){return ie.JSON.parse(t,void 0)};var pi=ie.JSON.parse;function di(t){Tn.call(this),this.headers=new kr,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=vi,this.D=this.F=!1}ve(di,Tn);var vi="",yi=/^https?$/i,mi=["POST","PUT"];function gi(t){return"content-type"==t.toLowerCase()}function bi(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,wi(t),Ei(t)}function wi(t){t.u||(t.u=!0,_n(t,"complete"),_n(t,"error"))}function Ii(t){if(t.b&&void 0!==re&&(!t.s[1]||4!=_i(t)||2!=t.W()))if(t.l&&4==_i(t))Un(t.za,0,t);else if(_n(t,"readystatechange"),4==_i(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Or)[1]||null;if(!o&&ie.self&&ie.self.location){var a=ie.self.location.protocol;o=a.substr(0,a.length-1)}i=!yi.test(o?o.toLowerCase():"")}e=i}if(e)_n(t,"complete"),_n(t,"success");else{t.h=6;try{var s=2<_i(t)?t.a.statusText:""}catch(n){s=""}t.f=s+" ["+t.W()+"]",wi(t)}}finally{Ei(t)}}}function Ei(t,e){if(t.a){Ti(t);var n=t.a,r=t.s[0]?oe:null;t.a=null,t.s=null,e||_n(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function Ti(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(ie.clearTimeout(t.m),t.m=null)}function _i(t){return t.a?t.a.readyState:0}function Si(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return ke(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Vr(t,e,n))}function Ai(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Ni(t){this.pa=0,this.g=[],this.c=new zn,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Ai("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Ai("baseRetryDelayMs",5e3,t),this.Ra=Ai("retryDelaySeedMs",1e4,t),this.Ma=Ai("forwardChannelMaxRetries",2,t),this.ma=Ai("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new ei(t&&t.concurrentRequestLimit),this.ka=new hi,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function ki(t){if(xi(t),3==t.v){var e=t.R++,n=Rr(t.B);Vr(n,"SID",t.J),Vr(n,"RID",e),Vr(n,"TYPE","terminate"),Pi(t,n),(e=new pr(t,t.c,e,void 0)).H=2,e.i=Ur(Rr(n)),n=!1,ie.navigator&&ie.navigator.sendBeacon&&(n=ie.navigator.sendBeacon(e.i.toString(),"")),!n&&ie.Image&&((new Image).src=e.i,n=!0),n||(e.a=zi(e.g,null),e.a.ba(e.i)),e.u=de(),Ir(e)}Gi(t)}function Di(t){t.a&&(Vi(t),t.a.cancel(),t.a=null)}function xi(t){Di(t),t.j&&(ie.clearTimeout(t.j),t.j=null),ji(t),t.b.cancel(),t.h&&("number"==typeof t.h&&ie.clearTimeout(t.h),t.h=null)}function Oi(t,e){t.g.push(new ti(t.Oa++,e)),3==t.v&&Ci(t)}function Ci(t){ri(t.b)||t.h||(t.h=!0,Rn(t.Ba,t),t.u=0)}function Ri(t,e){var n;n=e?e.f:t.R++;var r=Rr(t.B);Vr(r,"SID",t.J),Vr(r,"RID",n),Vr(r,"AID",t.P),Pi(t,r),t.i&&t.l&&Si(r,t.i,t.l),n=new pr(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Li(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),ai(t.b,n),mr(n,r,e)}function Pi(t,e){t.f&&Nr({},(function(t,n){Vr(e,n,t)}))}function Li(t,e,n){n=Math.min(t.g.length,n);var r=t.f?fe(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{li(h,a,"req"+c+"_")}catch(t){r&&r(h)}}if(s){r=a.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Mi(t){t.a||t.j||(t.T=1,Rn(t.Aa,t),t.o=0)}function Fi(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=nr(fe(t.Aa,t),Bi(t,t.o)),t.o++,!0)}function Vi(t){null!=t.s&&(ie.clearTimeout(t.s),t.s=null)}function Ui(t){t.a=new pr(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Rr(t.la);Vr(e,"RID","rpc"),Vr(e,"SID",t.J),Vr(e,"CI",t.H?"0":"1"),Vr(e,"AID",t.P),Pi(t,e),Vr(e,"TYPE","xmlhttp"),t.i&&t.l&&Si(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Ur(Rr(e)),n.j=null,n.I=!0,gr(n,t)}function ji(t){null!=t.m&&(ie.clearTimeout(t.m),t.m=null)}function qi(t,e){var n=null;if(t.a==e){ji(t),Vi(t),t.a=null;var r=2}else{if(!oi(t.b,e))return;n=e.s,si(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=de()-e.u;var i=t.u;_n(r=Xn(),new er(r,n,e,i)),Ci(t)}else Mi(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(ii(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=nr(fe(t.Ba,t,e),Bi(t,t.u)),t.u++,0)))}(t,e)||2==r&&Fi(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Ki(t,5);break;case 4:Ki(t,10);break;case 3:Ki(t,6);break;default:Ki(t,2)}}function Bi(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Ki(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=fe(t.Ya,t);n||(n=new Cr("//www.google.com/images/cleardot.gif"),ie.location&&"http"==ie.location.protocol||Pr(n,"https"),Ur(n)),function(t,e){var n=new zn;if(ie.Image){var r=new Image;r.onload=pe(fi,n,r,"TestLoadImage: loaded",!0,e),r.onerror=pe(fi,n,r,"TestLoadImage: error",!1,e),r.onabort=pe(fi,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=pe(fi,n,r,"TestLoadImage: timeout",!1,e),ie.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else tr(2);t.v=0,t.f&&t.f.ra(e),Gi(t),xi(t)}function Gi(t){t.v=0,t.I=-1,t.f&&(0==ui(t.b).length&&0==t.g.length||(t.b.c.length=0,we(t.g),t.g.length=0),t.f.qa())}function Hi(t,e,n){var r=function(t){return t instanceof Cr?Rr(t):new Cr(t,void 0)}(n);if(""!=r.c)e&&Lr(r,e+"."+r.c),Mr(r,r.h);else{var i=ie.location;r=function(t,e,n,r){var i=new Cr(null,void 0);return t&&Pr(i,t),e&&Lr(i,e),n&&Mr(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&ke(t.V,(function(t,e){Vr(r,e,t)})),e=t.A,n=t.na,e&&n&&Vr(r,e,n),Vr(r,"VER",t.ha),Pi(t,r),r}function zi(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new di(t.Na)).F=t.C,e}function Wi(){}function $i(){if(Me&&!(10<=Number(Qe)))throw Error("Environmental error: no available transport.")}function Qi(t,e){Tn.call(this),this.a=new Ni(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Ie(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ie(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new Ji(this)}function Xi(t){hr.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Yi(){lr.call(this),this.status=1}function Ji(t){this.a=t}(ee=di.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?ar(this.H):ar(ur),this.a.onreadystatechange=fe(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void bi(this,t)}t=n||"";var i=new kr(this.headers);r&&Nr(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=gi,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=ie.FormData&&t instanceof ie.FormData,!(0<=me(mi,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Ti(this),0<this.o&&((this.D=function(t){return Me&&We(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=fe(this.xa,this)):this.m=Un(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){bi(this,t)}},ee.xa=function(){void 0!==re&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,_n(this,"timeout"),this.abort(8))},ee.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,_n(this,"complete"),_n(this,"abort"),Ei(this))},ee.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Ei(this,!0)),di.X.G.call(this)},ee.za=function(){this.j||(this.A||this.l||this.g?Ii(this):this.Ua())},ee.Ua=function(){Ii(this)},ee.W=function(){try{return 2<_i(this)?this.a.status:-1}catch(t){return-1}},ee.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},ee.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),pi(e)}},ee.ua=function(){return this.h},ee.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(ee=Ni.prototype).ha=8,ee.v=1,ee.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new pr(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Oe(r=De(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Li(this,n,e),Vr(i=Rr(this.B),"RID",t),Vr(i,"CVER",22),this.A&&Vr(i,"X-HTTP-Session-Id",this.A),Pi(this,i),this.i&&r&&Si(i,this.i,r),ai(this.b,n),this.Ia&&Vr(i,"TYPE","init"),this.da?(Vr(i,"$req",e),Vr(i,"SID","null"),n.U=!0,mr(n,i,null)):mr(n,i,e),this.v=2}}else 3==this.v&&(t?Ri(this,t):0==this.g.length||ri(this.b)||Ri(this))},ee.Aa=function(){if(this.j=null,Ui(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=nr(fe(this.Ta,this),t)}},ee.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,tr(10),Di(this),Ui(this))},ee.Sa=function(){null!=this.m&&(this.m=null,Di(this),Fi(this),tr(19))},ee.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),tr(2)):(this.c.info("Failed to ping google.com"),tr(1))},(ee=Wi.prototype).ta=function(){},ee.sa=function(){},ee.ra=function(){},ee.qa=function(){},ee.Ja=function(){},$i.prototype.a=function(t,e){return new Qi(t,e)},ve(Qi,Tn),Qi.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;tr(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Hi(t,null,t.fa),Ci(t)},Qi.prototype.close=function(){ki(this.a)},Qi.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Oi(this.a,e)}else this.l?((e={}).__data__=An(t),Oi(this.a,e)):Oi(this.a,t)},Qi.prototype.G=function(){this.a.f=null,delete this.f,ki(this.a),delete this.a,Qi.X.G.call(this)},ve(Xi,hr),ve(Yi,lr),ve(Ji,Wi),Ji.prototype.ta=function(){_n(this.a,"a")},Ji.prototype.sa=function(t){_n(this.a,new Xi(t))},Ji.prototype.ra=function(t){_n(this.a,new Yi(t))},Ji.prototype.qa=function(){_n(this.a,"b")},$i.prototype.createWebChannel=$i.prototype.a,Qi.prototype.send=Qi.prototype.h,Qi.prototype.open=Qi.prototype.g,Qi.prototype.close=Qi.prototype.close,rr.NO_ERROR=0,rr.TIMEOUT=8,rr.HTTP_ERROR=6,ir.COMPLETE="complete",sr.EventType=cr,cr.OPEN="a",cr.CLOSE="b",cr.ERROR="c",cr.MESSAGE="d",Tn.prototype.listen=Tn.prototype.va,di.prototype.listenOnce=di.prototype.wa,di.prototype.getLastError=di.prototype.Qa,di.prototype.getLastErrorCode=di.prototype.ua,di.prototype.getStatus=di.prototype.W,di.prototype.getResponseJson=di.prototype.Pa,di.prototype.getResponseText=di.prototype.$,di.prototype.send=di.prototype.ba;var Zi=rr,to=ir,eo=$n,no=10,ro=11,io=sr,oo=di,ao=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();ao.o=-1;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var so={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},uo=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return ot(e,t),e}(Error),co=new Ft("@firebase/firestore");function ho(){return co.logLevel}function lo(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(co.logLevel<=xt.DEBUG){var r=e.map(vo);co.debug.apply(co,ht(["Firestore (8.3.2): "+t],r))}}function fo(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(co.logLevel<=xt.ERROR){var r=e.map(vo);co.error.apply(co,ht(["Firestore (8.3.2): "+t],r))}}function po(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(co.logLevel<=xt.WARN){var r=e.map(vo);co.warn.apply(co,ht(["Firestore (8.3.2): "+t],r))}}function vo(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var e}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function yo(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.3.2) INTERNAL ASSERTION FAILED: "+t;throw fo(e),new Error(e)}function mo(t,e){t||yo()}function go(t,e){return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function bo(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var wo=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=bo(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Io(t,e){return t<e?-1:t>e?1:0}function Eo(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function To(t){return t+"\0"}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var _o=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new uo(so.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new uo(so.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new uo(so.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new uo(so.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Io(this.nanoseconds,t.nanoseconds):Io(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),So=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new _o(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ao(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function No(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ko(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Do=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&yo(),void 0===n?n=t.length-e:n>t.length-e&&yo(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),xo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ot(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new uo(so.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Do),Oo=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Co=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ot(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Oo.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new uo(so.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new uo(so.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new uo(so.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new uo(so.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Do),Ro=function(){function t(t){this.fields=t,t.sort(Co.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Eo(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Po=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Io(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Po.EMPTY_BYTE_STRING=new Po("");var Lo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mo(t){if(mo(!!t),"string"==typeof t){var e=0,n=Lo.exec(t);if(mo(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Fo(t.seconds),nanos:Fo(t.nanos)}}function Fo(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Vo(t){return"string"==typeof t?Po.fromBase64String(t):Po.fromUint8Array(t)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Uo(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function jo(t){var e=t.mapValue.fields.__previous_value__;return Uo(e)?jo(e):e}function qo(t){var e=Mo(t.mapValue.fields.__local_write_time__.timestampValue);return new _o(e.seconds,e.nanos)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Bo(t){return null==t}function Ko(t){return 0===t&&1/t==-1/0}function Go(t){return"number"==typeof t&&Number.isInteger(t)&&!Ko(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ho=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(xo.fromString(e))},t.fromName=function(e){return new t(xo.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===xo.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return xo.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new xo(e.slice()))},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function zo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Uo(t)?4:10:yo()}function Wo(t,e){var n=zo(t);if(n!==zo(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qo(t).isEqual(qo(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Mo(t.timestampValue),r=Mo(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Vo(t.bytesValue).isEqual(Vo(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Fo(t.geoPointValue.latitude)===Fo(e.geoPointValue.latitude)&&Fo(t.geoPointValue.longitude)===Fo(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Fo(t.integerValue)===Fo(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Fo(t.doubleValue),r=Fo(e.doubleValue);return n===r?Ko(n)===Ko(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Eo(t.arrayValue.values||[],e.arrayValue.values||[],Wo);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Ao(n)!==Ao(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Wo(n[i],r[i])))return!1;return!0}(t,e);default:return yo()}}function $o(t,e){return void 0!==(t.values||[]).find((function(t){return Wo(t,e)}))}function Qo(t,e){var n=zo(t),r=zo(e);if(n!==r)return Io(n,r);switch(n){case 0:return 0;case 1:return Io(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Fo(t.integerValue||t.doubleValue),r=Fo(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Xo(t.timestampValue,e.timestampValue);case 4:return Xo(qo(t),qo(e));case 5:return Io(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Vo(t),r=Vo(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Io(n[i],r[i]);if(0!==o)return o}return Io(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Io(Fo(t.latitude),Fo(e.latitude));return 0!==n?n:Io(Fo(t.longitude),Fo(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Qo(n[i],r[i]);if(o)return o}return Io(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=Io(r[a],o[a]);if(0!==s)return s;var u=Qo(n[r[a]],i[o[a]]);if(0!==u)return u}return Io(r.length,o.length)}(t.mapValue,e.mapValue);default:throw yo()}}function Xo(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Io(t,e);var n=Mo(t),r=Mo(e),i=Io(n.seconds,r.seconds);return 0!==i?i:Io(n.nanos,r.nanos)}function Yo(t){return Jo(t)}function Jo(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Mo(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Vo(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Ho.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Jo(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Jo(t.fields[o])}return e+"}"}(t.mapValue):yo();var e,n}function Zo(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function ta(t){return!!t&&"integerValue"in t}function ea(t){return!!t&&"arrayValue"in t}function na(t){return!!t&&"nullValue"in t}function ra(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ia(t){return!!t&&"mapValue"in t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var oa=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field(Co.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach((function(t,n){t?e.set(n,t):e.delete(n)}))},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return Wo(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===zo(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,o=t.extractNestedValue(this.partialValue,e),a=ia(o)?Object.assign({},o.mapValue.fields):{};return n.forEach((function(t,n){if(t instanceof Map){var o=r.applyOverlay(e.child(n),t);null!=o&&(a[n]=o,i=!0)}else null!==t?(a[n]=t,i=!0):a.hasOwnProperty(n)&&(delete a[n],i=!0)})),i?{mapValue:{fields:a}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay(Co.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!ia(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function aa(t){var e=[];return No(t.fields||{},(function(t,n){var r=new Co([t]);if(ia(n)){var i=aa(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];e.push(r.child(s))}}else e.push(r)})),new Ro(e)
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var sa=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,So.min(),oa.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,oa.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,oa.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=oa.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=oa.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),ua=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ca(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new ua(t,e,n,r,i,o,a)}function ha(t){var e=go(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Yo(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),Bo(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Ta(e.startAt)),e.endAt&&(n+="|ub:",n+=Ta(e.endAt)),e.h=n}return e.h}function la(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Sa(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Wo(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Na(t.startAt,e.startAt)&&Na(t.endAt,e.endAt)}function fa(t){return Ho.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var pa=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return ot(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new da(t,n,r):"array-contains"===n?new ga(t,r):"in"===n?new ba(t,r):"not-in"===n?new wa(t,r):"array-contains-any"===n?new Ia(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new va(t,n):new ya(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Qo(e,this.value)):null!==e&&zo(this.value)===zo(e)&&this.m(Qo(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return yo()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),da=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Ho.fromName(r.referenceValue),i}return ot(e,t),e.prototype.matches=function(t){var e=Ho.comparator(t.key,this.key);return this.m(e)},e}(pa),va=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=ma("in",n),r}return ot(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(pa),ya=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=ma("not-in",n),r}return ot(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(pa);function ma(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Ho.fromName(t.referenceValue)}))}var ga=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return ot(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return ea(e)&&$o(e.arrayValue,this.value)},e}(pa),ba=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return ot(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&$o(this.value.arrayValue,e)},e}(pa),wa=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return ot(e,t),e.prototype.matches=function(t){if($o(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!$o(this.value.arrayValue,e)},e}(pa),Ia=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return ot(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!ea(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return $o(e.value.arrayValue,t)}))},e}(pa),Ea=function(t,e){this.position=t,this.before=e};function Ta(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Yo(t)})).join(",")}var _a=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Sa(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Aa(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?Ho.comparator(Ho.fromName(a.referenceValue),n.key):Qo(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Na(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Wo(t.position[n],e.position[n]))return!1;return!0}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ka=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function Da(t,e,n,r,i,o,a,s){return new ka(t,e,n,r,i,o,a,s)}function xa(t){return new ka(t)}function Oa(t){return!Bo(t.limit)&&"F"===t.limitType}function Ca(t){return!Bo(t.limit)&&"L"===t.limitType}function Ra(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Pa(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function La(t){return null!==t.collectionGroup}function Ma(t){var e=go(t);if(null===e.p){e.p=[];var n=Pa(e),r=Ra(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new _a(n)),e.p.push(new _a(Co.keyField(),"asc"));else{for(var i=!1,o=0,a=e.explicitOrderBy;o<a.length;o++){var s=a[o];e.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new _a(Co.keyField(),u))}}}return e.p}function Fa(t){var e=go(t);if(!e.T)if("F"===e.limitType)e.T=ca(e.path,e.collectionGroup,Ma(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Ma(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new _a(o.field,a))}var s=e.endAt?new Ea(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Ea(e.startAt.position,!e.startAt.before):null;e.T=ca(e.path,e.collectionGroup,n,e.filters,e.limit,s,u)}return e.T}function Va(t,e,n){return new ka(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ua(t,e){return la(Fa(t),Fa(e))&&t.limitType===e.limitType}function ja(t){return ha(Fa(t))+"|lt:"+t.limitType}function qa(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Yo(e.value);var e})).join(", ")+"]"),Bo(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Ta(t.startAt)),t.endAt&&(e+=", endAt: "+Ta(t.endAt)),"Target("+e+")"}(Fa(t))+"; limitType="+t.limitType+")"}function Ba(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Ho.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Aa(t.startAt,Ma(t),e)||t.endAt&&Aa(t.endAt,Ma(t),e))}(t,e)}function Ka(t){return function(e,n){for(var r=!1,i=0,o=Ma(t);i<o.length;i++){var a=o[i],s=Ga(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function Ga(t,e,n){var r=t.field.isKeyField()?Ho.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Qo(r,i):yo()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return yo()}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ha(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ko(e)?"-0":e}}function za(t){return{integerValue:""+t}}function Wa(t,e){return Go(e)?za(e):Ha(t,e)}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var $a=function(){this._=void 0};function Qa(t,e,n){return t instanceof Ja?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Za?ts(t,e):t instanceof es?ns(t,e):function(t,e){var n=Ya(t,e),r=is(n)+is(t.A);return ta(n)&&ta(t.A)?za(r):Ha(t.R,r)}(t,e)}function Xa(t,e,n){return t instanceof Za?ts(t,e):t instanceof es?ns(t,e):n}function Ya(t,e){return t instanceof rs?ta(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Ja=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ot(e,t),e}($a),Za=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return ot(e,t),e}($a);function ts(t,e){for(var n=os(e),r=function(t){n.some((function(e){return Wo(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var es=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return ot(e,t),e}($a);function ns(t,e){for(var n=os(e),r=function(t){n=n.filter((function(e){return!Wo(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var rs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return ot(e,t),e}($a);function is(t){return Fo(t.integerValue||t.doubleValue)}function os(t){return ea(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var as=function(t,e){this.field=t,this.transform=e},ss=function(t,e){this.version=t,this.transformResults=e},us=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function cs(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var hs=function(){};function ls(t,e,n){t instanceof ys?function(t,e,n){var r=t.value.clone(),i=bs(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof ms?function(t,e,n){if(cs(t.precondition,e)){var r=bs(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(gs(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function fs(t,e,n){t instanceof ys?function(t,e,n){if(cs(t.precondition,e)){var r=t.value.clone(),i=ws(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(vs(e),r).setHasLocalMutations()}}(t,e,n):t instanceof ms?function(t,e,n){if(cs(t.precondition,e)){var r=ws(t.fieldTransforms,n,e),i=e.data;i.setAll(gs(t)),i.setAll(r),e.convertToFoundDocument(vs(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){cs(t.precondition,e)&&e.convertToNoDocument(So.min())}(t,e)}function ps(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e.data.field(o.field),s=Ya(o.transform,a||null);null!=s&&(null==n&&(n=oa.empty()),n.set(o.field,s))}return n||null}function ds(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Eo(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Za&&e instanceof Za||t instanceof es&&e instanceof es?Eo(t.elements,e.elements,Wo):t instanceof rs&&e instanceof rs?Wo(t.A,e.A):t instanceof Ja&&e instanceof Ja}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function vs(t){return t.isFoundDocument()?t.version:So.min()}var ys=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return ot(e,t),e}(hs),ms=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=t.call(this)||this).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return ot(e,t),e}(hs);function gs(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function bs(t,e,n){var r=new Map;mo(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,Xa(a,s,n[i]))}return r}function ws(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,Qa(s,u,e))}return r}var Is,Es,Ts=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return ot(e,t),e}(hs),_s=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return ot(e,t),e}(hs),Ss=function(t){this.count=t};function As(t){switch(t){case so.OK:return yo();case so.CANCELLED:case so.UNKNOWN:case so.DEADLINE_EXCEEDED:case so.RESOURCE_EXHAUSTED:case so.INTERNAL:case so.UNAVAILABLE:case so.UNAUTHENTICATED:return!1;case so.INVALID_ARGUMENT:case so.NOT_FOUND:case so.ALREADY_EXISTS:case so.PERMISSION_DENIED:case so.FAILED_PRECONDITION:case so.ABORTED:case so.OUT_OF_RANGE:case so.UNIMPLEMENTED:case so.DATA_LOSS:return!0;default:return yo()}}function Ns(t){if(void 0===t)return fo("GRPC error has no .code"),so.UNKNOWN;switch(t){case Is.OK:return so.OK;case Is.CANCELLED:return so.CANCELLED;case Is.UNKNOWN:return so.UNKNOWN;case Is.DEADLINE_EXCEEDED:return so.DEADLINE_EXCEEDED;case Is.RESOURCE_EXHAUSTED:return so.RESOURCE_EXHAUSTED;case Is.INTERNAL:return so.INTERNAL;case Is.UNAVAILABLE:return so.UNAVAILABLE;case Is.UNAUTHENTICATED:return so.UNAUTHENTICATED;case Is.INVALID_ARGUMENT:return so.INVALID_ARGUMENT;case Is.NOT_FOUND:return so.NOT_FOUND;case Is.ALREADY_EXISTS:return so.ALREADY_EXISTS;case Is.PERMISSION_DENIED:return so.PERMISSION_DENIED;case Is.FAILED_PRECONDITION:return so.FAILED_PRECONDITION;case Is.ABORTED:return so.ABORTED;case Is.OUT_OF_RANGE:return so.OUT_OF_RANGE;case Is.UNIMPLEMENTED:return so.UNIMPLEMENTED;case Is.DATA_LOSS:return so.DATA_LOSS;default:return yo()}}(Es=Is||(Is={}))[Es.OK=0]="OK",Es[Es.CANCELLED=1]="CANCELLED",Es[Es.UNKNOWN=2]="UNKNOWN",Es[Es.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Es[Es.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Es[Es.NOT_FOUND=5]="NOT_FOUND",Es[Es.ALREADY_EXISTS=6]="ALREADY_EXISTS",Es[Es.PERMISSION_DENIED=7]="PERMISSION_DENIED",Es[Es.UNAUTHENTICATED=16]="UNAUTHENTICATED",Es[Es.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Es[Es.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Es[Es.ABORTED=10]="ABORTED",Es[Es.OUT_OF_RANGE=11]="OUT_OF_RANGE",Es[Es.UNIMPLEMENTED=12]="UNIMPLEMENTED",Es[Es.INTERNAL=13]="INTERNAL",Es[Es.UNAVAILABLE=14]="UNAVAILABLE",Es[Es.DATA_LOSS=15]="DATA_LOSS";
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ks=function(){function t(t,e){this.comparator=t,this.root=e||xs.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,xs.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xs.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Ds(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Ds(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Ds(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Ds(this.root,t,this.comparator,!0)},t}(),Ds=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),xs=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw yo();if(this.right.isRed())throw yo();var t=this.left.check();if(t!==this.right.check())throw yo();return t+(this.isRed()?0:1)},t}();xs.EMPTY=null,xs.RED=!0,xs.BLACK=!1,xs.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw yo()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw yo()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw yo()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw yo()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw yo()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new xs(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Os=function(){function t(t){this.comparator=t,this.data=new ks(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Cs(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Cs(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Cs=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Rs=new ks(Ho.comparator);function Ps(){return Rs}var Ls=new ks(Ho.comparator);function Ms(){return Ls}var Fs=new ks(Ho.comparator);var Vs=new Os(Ho.comparator);function Us(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Vs,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var js=new Os(Io);function qs(){return js}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Bs=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Ks.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(So.min(),r,qs(),Ps(),Us())},t}(),Ks=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Po.EMPTY_BYTE_STRING,n,Us(),Us(),Us())},t}(),Gs=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Hs=function(t,e){this.targetId=t,this.V=e},zs=function(t,e,n,r){void 0===n&&(n=Po.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Ws=function(){function t(){this.S=0,this.D=Xs(),this.C=Po.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Us(),e=Us(),n=Us();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:yo()}})),new Ks(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Xs()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),$s=function(){function t(t){this.W=t,this.G=new Map,this.H=Ps(),this.J=Qs(),this.Y=new Os(Io)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:yo()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(fa(i))if(0===n){var o=new Ho(i.path);this.tt(e,o,sa.newNoDocument(o,So.min()))}else mo(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&fa(o.target)){var a=new Ho(o.target.path);null!==e.H.get(a)||e.at(i,a)||e.tt(i,a,sa.newNoDocument(a,t))}r.O&&(n.set(i,r.M()),r.L())}}));var r=Us();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Bs(t,n,this.Y,this.H,r);return this.H=Ps(),this.J=Qs(),this.Y=new Os(Io),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Ws,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Os(Io),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||lo("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Ws),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Qs(){return new ks(Ho.comparator)}function Xs(){return new ks(Ho.comparator)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ys={asc:"ASCENDING",desc:"DESCENDING"},Js={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Zs=function(t,e){this.databaseId=t,this.I=e};function tu(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function eu(t,e){return t.I?e.toBase64():e.toUint8Array()}function nu(t,e){return tu(t,e.toTimestamp())}function ru(t){return mo(!!t),So.fromTimestamp(function(t){var e=Mo(t);return new _o(e.seconds,e.nanos)}(t))}function iu(t,e){return function(t){return new xo(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function ou(t){var e=xo.fromString(t);return mo(ku(e)),e}function au(t,e){return iu(t.databaseId,e.path)}function su(t,e){var n=ou(e);if(n.get(1)!==t.databaseId.projectId)throw new uo(so.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new uo(so.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ho(lu(n))}function uu(t,e){return iu(t.databaseId,e)}function cu(t){var e=ou(t);return 4===e.length?xo.emptyPath():lu(e)}function hu(t){return new xo(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function lu(t){return mo(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function fu(t,e,n){return{name:au(t,e),fields:n.toProto().mapValue.fields}}function pu(t,e){var n;if(e instanceof ys)n={update:fu(t,e.key,e.value)};else if(e instanceof Ts)n={delete:au(t,e.key)};else if(e instanceof ms)n={update:fu(t,e.key,e.data),updateMask:Nu(e.fieldMask)};else{if(!(e instanceof _s))return yo();n={verify:au(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Ja)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Za)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof es)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof rs)return{fieldPath:e.field.canonicalString(),increment:n.A};throw yo()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:nu(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:yo()}(t,e.precondition)),n}function du(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?us.updateTime(ru(t.updateTime)):void 0!==t.exists?us.exists(t.exists):us.none()}(e.currentDocument):us.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)mo("REQUEST_TIME"===e.setToServerValue),n=new Ja;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Za(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new es(i)}else"increment"in e?n=new rs(t,e.increment):yo();var o=Co.fromServerFormat(e.fieldPath);return new as(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=su(t,e.update.name),o=new oa({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new Ro(e.map((function(t){return Co.fromServerFormat(t)})))}(e.updateMask);return new ms(i,o,a,n,r)}return new ys(i,o,n,r)}if(e.delete){var s=su(t,e.delete);return new Ts(s,n)}if(e.verify){var u=su(t,e.verify);return new _s(u,n)}return yo()}function vu(t,e){return{documents:[uu(t,e.path)]}}function yu(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=uu(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=uu(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(ra(t.value))return{unaryFilter:{field:Tu(t.field),op:"IS_NAN"}};if(na(t.value))return{unaryFilter:{field:Tu(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(ra(t.value))return{unaryFilter:{field:Tu(t.field),op:"IS_NOT_NAN"}};if(na(t.value))return{unaryFilter:{field:Tu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tu(t.field),op:Eu(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Tu(t.field),direction:Iu(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.I||Bo(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=bu(e.startAt)),e.endAt&&(n.structuredQuery.endAt=bu(e.endAt)),n}function mu(t){var e=cu(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){mo(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=gu(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return function(t){return new _a(_u(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return Bo(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=wu(n.startAt));var h=null;return n.endAt&&(h=wu(n.endAt)),Da(e,i,s,a,u,"F",c,h)}function gu(t){return t?void 0!==t.unaryFilter?[Au(t)]:void 0!==t.fieldFilter?[Su(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return gu(t)})).reduce((function(t,e){return t.concat(e)})):yo():[]}function bu(t){return{before:t.before,values:t.position}}function wu(t){var e=!!t.before,n=t.values||[];return new Ea(n,e)}function Iu(t){return Ys[t]}function Eu(t){return Js[t]}function Tu(t){return{fieldPath:t.canonicalString()}}function _u(t){return Co.fromServerFormat(t.fieldPath)}function Su(t){return pa.create(_u(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return yo()}}(t.fieldFilter.op),t.fieldFilter.value)}function Au(t){switch(t.unaryFilter.op){case"IS_NAN":var e=_u(t.unaryFilter.field);return pa.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=_u(t.unaryFilter.field);return pa.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=_u(t.unaryFilter.field);return pa.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=_u(t.unaryFilter.field);return pa.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return yo()}}function Nu(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function ku(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Du(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Ou(e)),e=xu(t.get(n),e);return Ou(e)}function xu(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Ou(t){return t+""}function Cu(t){var e=t.length;if(mo(e>=2),2===e)return mo(""===t.charAt(0)&&""===t.charAt(1)),xo.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("",o);switch((a<0||a>n)&&yo(),t.charAt(a+1)){case"":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=t.substring(o,a),i+="\0";break;case"":i+=t.substring(o,a+1);break;default:yo()}o=a+2}return new xo(r)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ru=function(t,e){this.seconds=t,this.nanoseconds=e},Pu=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Pu.store="owner",Pu.key="owner";var Lu=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Lu.store="mutationQueues",Lu.keyPath="userId";var Mu=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Mu.store="mutations",Mu.keyPath="batchId",Mu.userMutationsIndex="userMutationsIndex",Mu.userMutationsKeyPath=["userId","batchId"];var Fu=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Du(e)]},t.key=function(t,e,n){return[t,Du(e),n]},t}();Fu.store="documentMutations",Fu.PLACEHOLDER=new Fu;var Vu=function(t,e){this.path=t,this.readTime=e},Uu=function(t,e){this.path=t,this.version=e},ju=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};ju.store="remoteDocuments",ju.readTimeIndex="readTimeIndex",ju.readTimeIndexPath="readTime",ju.collectionReadTimeIndex="collectionReadTimeIndex",ju.collectionReadTimeIndexPath=["parentPath","readTime"];var qu=function(t){this.byteSize=t};qu.store="remoteDocumentGlobal",qu.key="remoteDocumentGlobalKey";var Bu=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};Bu.store="targets",Bu.keyPath="targetId",Bu.queryTargetsIndexName="queryTargetsIndex",Bu.queryTargetsKeyPath=["canonicalId","targetId"];var Ku=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Ku.store="targetDocuments",Ku.keyPath=["targetId","path"],Ku.documentTargetsIndex="documentTargetsIndex",Ku.documentTargetsKeyPath=["path","targetId"];var Gu=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Gu.key="targetGlobalKey",Gu.store="targetGlobal";var Hu=function(t,e){this.collectionId=t,this.parent=e};Hu.store="collectionParents",Hu.keyPath=["collectionId","parent"];var zu=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};zu.store="clientMetadata",zu.keyPath="clientId";var Wu=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Wu.store="bundles",Wu.keyPath="bundleId";var $u=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};$u.store="namedQueries",$u.keyPath="name";var Qu=ht(ht([],ht(ht([],ht(ht([],ht(ht([],[Lu.store,Mu.store,Fu.store,ju.store,Bu.store,Pu.store,Gu.store,Ku.store]),[zu.store])),[qu.store])),[Hu.store])),[Wu.store,$u.store]),Xu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Yu=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),Ju=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Zu=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&yo(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),tc=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Ju,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new rc(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=uc(e.target.error);n.ft.reject(new rc(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new rc(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(lo("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new oc(e)},t}(),ec=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(pt())&&fo("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return lo("SimpleDb","Removing database:",t),ac(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=pt(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return st(this,void 0,void 0,(function(){var e,n=this;return ut(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(lo("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new rc(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new uo(so.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new rc(t,n))},i.onupgradeneeded=function(t){lo("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){lo("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return st(this,void 0,void 0,(function(){var i,o,a,s,u;return ut(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,a=function(){var e,a,u,c,h;return ut(this,(function(l){switch(l.label){case 0:++o,l.label=1;case 1:return l.trys.push([1,4,,5]),[4,s.At(t)];case 2:return s.db=l.sent(),e=tc.open(s.db,t,i?"readonly":"readwrite",n),a=r(e).catch((function(t){return e.abort(t),Zu.reject(t)})).toPromise(),u={},a.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(l.sent(),a),u)];case 4:return c=l.sent(),h="FirebaseError"!==c.name&&o<3,lo("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),s.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},s=this,c.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),nc=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return ac(this.Pt.delete())},t}(),rc=function(t){function e(e,n){var r=this;return(r=t.call(this,so.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return ot(e,t),e}(uo);function ic(t){return"IndexedDbTransactionError"===t.name}var oc=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(lo("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(lo("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),ac(n)},t.prototype.add=function(t){return lo("SimpleDb","ADD",this.store.name,t,t),ac(this.store.add(t))},t.prototype.get=function(t){var e=this;return ac(this.store.get(t)).next((function(n){return void 0===n&&(n=null),lo("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return lo("SimpleDb","DELETE",this.store.name,t),ac(this.store.delete(t))},t.prototype.count=function(){return lo("SimpleDb","COUNT",this.store.name),ac(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ft=function(t,e){lo("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new Zu((function(n,r){e.onerror=function(t){var e=uc(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new Zu((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new nc(i),a=e(i.primaryKey,i.value,o);if(a instanceof Zu){var s=a.catch((function(t){return o.done(),Zu.reject(t)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return Zu.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function ac(t){return new Zu((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=uc(t.target.error);n(e)}}))}var sc=!1;function uc(t){var e=ec._t(pt());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new uo("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return sc||(sc=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var cc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return ot(e,t),e}(Yu);function hc(t,e){var n=go(t);return ec.It(n.Mt,e)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var lc=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&ls(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&fs(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&fs(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(So.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Us())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Eo(this.mutations,t.mutations,(function(t,e){return ds(t,e)}))&&Eo(this.baseMutations,t.baseMutations,(function(t,e){return ds(t,e)}))},t}(),fc=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){mo(e.mutations.length===r.length);for(var i=Fs,o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),pc=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=So.min()),void 0===o&&(o=So.min()),void 0===a&&(a=Po.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),dc=function(t){this.Lt=t};function vc(t,e){if(e.document)return function(t,e,n){var r=su(t,e.name),i=ru(e.updateTime),o=new oa({mapValue:{fields:e.fields}}),a=sa.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Ho.fromSegments(e.noDocument.path),r=wc(e.noDocument.readTime),i=sa.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=Ho.fromSegments(e.unknownDocument.path);return r=wc(e.unknownDocument.version),sa.newUnknownDocument(o,r)}return yo()}function yc(t,e,n){var r=mc(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:au(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:tu(t,e.version.toTimestamp())}}(t.Lt,e),a=e.hasCommittedMutations;return new ju(null,null,o,a,r,i)}if(e.isNoDocument()){var s=e.key.path.toArray(),u=bc(e.version);return a=e.hasCommittedMutations,new ju(null,new Vu(s,u),null,a,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),h=bc(e.version);return new ju(new Uu(c,h),null,null,!0,r,i)}return yo()}function mc(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function gc(t){var e=new _o(t[0],t[1]);return So.fromTimestamp(e)}function bc(t){var e=t.toTimestamp();return new Ru(e.seconds,e.nanoseconds)}function wc(t){var e=new _o(t.seconds,t.nanoseconds);return So.fromTimestamp(e)}function Ic(t,e){for(var n=(e.baseMutations||[]).map((function(e){return du(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var a=e.mutations.map((function(e){return du(t.Lt,e)})),s=_o.fromMillis(e.localWriteTimeMs);return new lc(e.batchId,s,n,a)}function Ec(t){var e,n,r=wc(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?wc(t.lastLimboFreeSnapshotVersion):So.min();return void 0!==t.query.documents?(mo(1===(n=t.query).documents.length),e=Fa(xa(cu(n.documents[0])))):e=function(t){return Fa(mu(t))}(t.query),new pc(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Po.fromBase64String(t.resumeToken))}function Tc(t,e){var n,r=bc(e.snapshotVersion),i=bc(e.lastLimboFreeSnapshotVersion);n=fa(e.target)?vu(t.Lt,e.target):yu(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Bu(e.targetId,ha(e.target),r,o,e.sequenceNumber,i,n)}function _c(t){var e=mu({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Va(e,e.limit,"L"):e}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Sc=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Ac(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:wc(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return Ac(t).put({bundleId:(n=e).id,createTime:bc(ru(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Nc(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:_c(e.bundledQuery),readTime:wc(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return Nc(t).put(function(t){return{name:t.name,readTime:bc(ru(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Ac(t){return hc(t,Wu.store)}function Nc(t){return hc(t,$u.store)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var kc=function(){function t(){this.Bt=new Dc}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Zu.resolve()},t.prototype.getCollectionParents=function(t,e){return Zu.resolve(this.Bt.getEntries(e))},t}(),Dc=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Os(xo.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Os(xo.comparator)).toArray()},t}(),xc=function(){function t(){this.qt=new Dc}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:Du(i)};return Oc(t).put(o)}return Zu.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[To(e),""],!1,!0);return Oc(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Cu(o.parent))}return n}))},t}();function Oc(t){return hc(t,Hu.store)}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Cc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Rc=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Pc(t,e,n){var r=t.store(Mu.store),i=t.store(Fu.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.Ot({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){mo(1===s)})));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=Fu.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Zu.waitFor(o).next((function(){return c}))}function Lc(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw yo();e=t.noDocument}return JSON.stringify(e).length}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */Rc.DEFAULT_COLLECTION_PERCENTILE=10,Rc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rc.DEFAULT=new Rc(41943040,Rc.DEFAULT_COLLECTION_PERCENTILE,Rc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rc.DISABLED=new Rc(-1,0,0);var Mc=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return mo(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vc(t).Ot({index:Mu.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Uc(t),a=Vc(t);return a.add({}).next((function(s){mo("number"==typeof s);for(var u=new lc(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return pu(t.Lt,e)})),i=n.mutations.map((function(e){return pu(t.Lt,e)}));return new Mu(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),h=[],l=new Os((function(t,e){return Io(t.canonicalString(),e.canonicalString())})),f=0,p=r;f<p.length;f++){var d=p[f],v=Fu.key(i.userId,d.key.path,s);l=l.add(d.key.path.popLast()),h.push(a.put(c)),h.push(o.put(v,Fu.PLACEHOLDER))}return l.forEach((function(e){h.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Qt[s]=u.keys()})),Zu.waitFor(h).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Vc(t).get(e).next((function(t){return t?(mo(t.userId===n.userId),Ic(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?Zu.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Vc(t).Ot({index:Mu.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(mo(e.batchId>=r),o=Ic(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Vc(t).Ot({index:Mu.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Vc(t).Nt(Mu.userMutationsIndex,n).next((function(t){return t.map((function(t){return Ic(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Fu.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Uc(t).Ot({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],h=Cu(u);if(s===n.userId&&e.path.isEqual(h))return Vc(t).get(c).next((function(t){if(!t)throw yo();mo(t.userId===n.userId),o.push(Ic(n.R,t))}));a.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Os(Io),i=[];return e.forEach((function(e){var o=Fu.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=Uc(t).Ot({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],c=Cu(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),Zu.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Fu.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Os(Io);return Uc(t).Ot({range:a},(function(t,e,o){var a=t[0],u=t[1],c=t[2],h=Cu(u);a===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Wt(t,s)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Vc(t).get(e).next((function(t){if(null===t)throw yo();mo(t.userId===n.userId),r.push(Ic(n.R,t))})))})),Zu.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return Pc(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),Zu.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return Zu.resolve();var r=IDBKeyRange.lowerBound(Fu.prefixForUser(e.userId)),i=[];return Uc(t).Ot({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Cu(t[1]);i.push(o)}else r.done()})).next((function(){mo(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return Fc(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return jc(t).get(this.userId).next((function(t){return t||new Lu(e.userId,-1,"")}))},t}();function Fc(t,e,n){var r=Fu.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Uc(t).Ot({range:o,kt:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function Vc(t){return hc(t,Mu.store)}function Uc(t){return hc(t,Fu.store)}function jc(t){return hc(t,Lu.store)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var qc=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Bc=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new qc(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return So.fromTimestamp(new _o(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return Kc(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return mo(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Kc(t).Ot((function(a,s){var u=Ec(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return Zu.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return Kc(t).Ot((function(t,n){var r=Ec(n);e(r)}))},t.prototype.Xt=function(t){return Gc(t).get(Gu.key).next((function(t){return mo(null!==t),t}))},t.prototype.Zt=function(t,e){return Gc(t).put(Gu.key,e)},t.prototype.te=function(t,e){return Kc(t).put(Tc(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=ha(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Kc(t).Ot({range:r,index:Bu.queryTargetsIndexName},(function(t,n,r){var o=Ec(n);la(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Hc(t);return e.forEach((function(e){var a=Du(e.path);i.push(o.put(new Ku(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))})),Zu.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Hc(t);return Zu.forEach(e,(function(e){var o=Du(e.path);return Zu.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Hc(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Hc(t),i=Us();return r.Ot({range:n,kt:!0},(function(t,e,n){var r=Cu(t[1]),o=new Ho(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=Du(e.path),r=IDBKeyRange.bound([n],[To(n)],!1,!0),i=0;return Hc(t).Ot({index:Ku.documentTargetsIndex,kt:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return Kc(t).get(e).next((function(t){return t?Ec(t):null}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Kc(t){return hc(t,Bu.store)}function Gc(t){return hc(t,Gu.store)}function Hc(t){return hc(t,Ku.store)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function zc(t){return st(this,void 0,void 0,(function(){return ut(this,(function(e){if(t.code!==so.FAILED_PRECONDITION||t.message!==Xu)throw t;return lo("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Wc(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Io(n,i);return 0===a?Io(r,o):a}var $c=function(){function t(t){this.ne=t,this.buffer=new Os(Wc),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Wc(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Qc=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;lo("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return st(e,void 0,void 0,(function(){var e;return ut(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return ic(e=n.sent())?(lo("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,zc(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Xc=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Zu.resolve(ao.o);var r=new $c(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(lo("LruGarbageCollector","Garbage collection skipped; disabled"),Zu.resolve(Cc)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(lo("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Cc):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,a,s,u,c=this,h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(lo("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,s=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),ho()<=xt.DEBUG&&lo("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+t+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-h)+"ms"),Zu.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),Yc=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Xc(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return Jc(t,n)},t.prototype.removeReference=function(t,e,n){return Jc(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Jc(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return jc(t).$t((function(r){return Fc(t,r,e).next((function(t){return t&&(n=!0),Zu.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(a,s){if(s<=e){var u=n._e(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),Hc(t).delete([0,Du(a.path)])}))}));i.push(u)}})).next((function(){return Zu.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Jc(t,e)},t.prototype.we=function(t,e){var n,r=Hc(t),i=ao.o;return r.Ot({index:Ku.documentTargetsIndex},(function(t,r){var o=t[0],a=(t[1],r.path),s=r.sequenceNumber;0===o?(i!==ao.o&&e(new Ho(Cu(n)),i),i=s,n=a):i=ao.o})).next((function(){i!==ao.o&&e(new Ho(Cu(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Jc(t,e){return Hc(t).put(function(t,e){return new Ku(0,Du(t.path),e)}(e,t.currentSequenceNumber))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Zc=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){No(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype.isEmpty=function(){return ko(this.inner)},t}(),th=function(){function t(){this.changes=new Zc((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:So.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:sa.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Zu.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),eh=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return ih(t).put(oh(e),n)},t.prototype.removeEntry=function(t,e){var n=ih(t),r=oh(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return ih(t).get(oh(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return ih(t).get(oh(e)).next((function(t){return{document:n.ye(e,t),size:Lc(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=Ps();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=Ps(),i=new ks(Ho.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Lc(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Zu.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return ih(t).Ot({range:r},(function(t,e,r){for(var a=Ho.fromSegments(t);o&&Ho.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Ps(),o=e.path.length+1,a={};if(n.isEqual(So.min())){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.toArray(),c=mc(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=ju.collectionReadTimeIndex}return ih(t).Ot(a,(function(t,n,a){if(t.length===o){var s=vc(r.R,n);e.path.isPrefixOf(s.key.path)?Ba(e,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new nh(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return rh(t).get(qu.key).next((function(t){return mo(!!t),t}))},t.prototype.me=function(t,e){return rh(t).put(qu.key,e)},t.prototype.ye=function(t,e){if(e){var n=vc(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(So.min()))return n}return sa.newInvalidDocument(t)},t}(),nh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Zc((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return ot(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Os((function(t,e){return Io(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s=e.Ae.get(o);if(a.document.isValidDocument()){var u=yc(e.Ie.R,a.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Lc(u);r+=c-s,n.push(e.Ie.addEntry(t,o,u))}else if(r-=s,e.trackRemovals){var h=yc(e.Ie.R,sa.newNoDocument(o,So.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,h))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),Zu.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(th);
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function rh(t){return hc(t,qu.store)}function ih(t){return hc(t,ju.store)}function oh(t){return t.path.toArray()}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ah=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;mo(n<r&&n>=0&&r<=11);var o=new tc("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Pu.store)}(t),function(t){t.createObjectStore(Lu.store,{keyPath:Lu.keyPath}),t.createObjectStore(Mu.store,{keyPath:Mu.keyPath,autoIncrement:!0}).createIndex(Mu.userMutationsIndex,Mu.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Fu.store)}(t),sh(t),function(t){t.createObjectStore(ju.store)}(t));var a=Zu.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Ku.store),t.deleteObjectStore(Bu.store),t.deleteObjectStore(Gu.store)}(t),sh(t)),a=a.next((function(){return function(t){var e=t.store(Gu.store),n=new Gu(0,0,So.min().toTimestamp(),0);return e.put(Gu.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(Mu.store).Nt().next((function(n){t.deleteObjectStore(Mu.store),t.createObjectStore(Mu.store,{keyPath:Mu.keyPath,autoIncrement:!0}).createIndex(Mu.userMutationsIndex,Mu.userMutationsKeyPath,{unique:!0});var r=e.store(Mu.store),i=n.map((function(t){return r.put(t)}));return Zu.waitFor(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(zu.store,{keyPath:zu.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(qu.store)}(t),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(ju.store);e.createIndex(ju.readTimeIndex,ju.readTimeIndexPath,{unique:!1}),e.createIndex(ju.collectionReadTimeIndex,ju.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(t){t.createObjectStore(Wu.store,{keyPath:Wu.keyPath})}(t),function(t){t.createObjectStore($u.store,{keyPath:$u.keyPath})}(t)}))),a},t.prototype.be=function(t){var e=0;return t.store(ju.store).Ot((function(t,n){e+=Lc(n)})).next((function(){var n=new qu(e);return t.store(qu.store).put(qu.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(Lu.store),r=t.store(Mu.store);return n.Nt().next((function(n){return Zu.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Mu.userMutationsIndex,i).next((function(r){return Zu.forEach(r,(function(r){mo(r.userId===n.userId);var i=Ic(e.R,r);return Pc(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(Ku.store),n=t.store(ju.store);return t.store(Gu.store).get(Gu.key).next((function(t){var r=[];return n.Ot((function(n,i){var o=new xo(n),a=function(t){return[0,Du(t)]}(o);r.push(e.get(a).next((function(n){return n?Zu.resolve():function(n){return e.put(new Ku(0,Du(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Zu.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(Hu.store,{keyPath:Hu.keyPath});var n=e.store(Hu.store),r=new Dc,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Du(i)})}};return e.store(ju.store).Ot({kt:!0},(function(t,e){var n=new xo(t);return i(n.popLast())})).next((function(){return e.store(Fu.store).Ot({kt:!0},(function(t,e){t[0];var n=t[1],r=(t[2],Cu(n));return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(Bu.store);return n.Ot((function(t,r){var i=Ec(r),o=Tc(e.R,i);return n.put(o)}))},t}();function sh(t){t.createObjectStore(Ku.store,{keyPath:Ku.keyPath}).createIndex(Ku.documentTargetsIndex,Ku.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Bu.store,{keyPath:Bu.keyPath}).createIndex(Bu.queryTargetsIndexName,Bu.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Gu.store)}var uh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ch=function(){function t(e,n,r,i,o,a,s,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=c,this.Ce=h,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new uo(so.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Yc(this,i),this.Le=n+"main",this.R=new dc(u),this.Be=new ec(this.Le,11,new ah(this.R)),this.qe=new Bc(this.referenceDelegate,this.R),this.Ut=new xc,this.Ue=function(t,e){return new eh(t,e)}(this.R,this.Ut),this.Qe=new Sc,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===h&&fo("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new uo(so.FAILED_PRECONDITION,uh);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new ao(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return st(e,void 0,void 0,(function(){return ut(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return st(e,void 0,void 0,(function(){return ut(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return st(e,void 0,void 0,(function(){return ut(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return lh(e).put(new zu(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(ic(e))return lo("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return lo("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return hh(t).get(Pu.key).next((function(t){return Zu.resolve(e.tn(t))}))},t.prototype.en=function(t){return lh(t).delete(this.clientId)},t.prototype.nn=function(){return st(this,void 0,void 0,(function(){var t,e,n,r,i=this;return ut(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=hc(t,zu.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return Zu.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)r=n[e],this.Ke.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Zu.resolve(!0):hh(t).get(Pu.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new uo(so.FAILED_PRECONDITION,uh);return!1}}return!(!e.networkEnabled||!e.inForeground)||lh(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&lo("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return st(this,void 0,void 0,(function(){var t=this;return ut(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Pu.store,zu.store],(function(e){var n=new cc(e,ao.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return lh(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Mc.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;lo("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,Qu,(function(o){return i=new cc(o,r.Ne?r.Ne.next():ao.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw fo("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new uo(so.FAILED_PRECONDITION,Xu);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return hh(t).get(Pu.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new uo(so.FAILED_PRECONDITION,uh)}))},t.prototype.Ze=function(t){var e=new Pu(this.clientId,this.allowTabSynchronization,Date.now());return hh(t).put(Pu.key,e)},t.yt=function(){return ec.yt()},t.prototype.Xe=function(t){var e=this,n=hh(t);return n.get(Pu.key).next((function(t){return e.tn(t)?(lo("IndexedDbPersistence","Releasing primary lease."),n.delete(Pu.key)):Zu.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(fo("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("unload",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return lo("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return fo("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){fo("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function hh(t){return hc(t,Pu.store)}function lh(t){return hc(t,zu.store)}function fh(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var ph=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return Ho.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):La(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new Ho(e)).next((function(t){var e=Ms();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Ms();return this.Ut.getCollectionParents(t,i).next((function(a){return Zu.forEach(a,(function(a){var s=function(t,e){return new ka(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,a.child(i));return r.An(t,s,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,h=r.get(c);null==h&&(h=sa.newInvalidDocument(c),r=r.insert(c,h)),fs(u,h,o.localWriteTime),h.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){Ba(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=Us(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof ms&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),dh=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Us(),i=Us(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),vh=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(So.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var a=i.Cn(e,o);return(Oa(e)||Ca(e))&&i.Nn(e.limitType,a,r,n)?i.Dn(t,e):(ho()<=xt.DEBUG&&lo("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),qa(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return a.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new Os(Ka(t));return e.forEach((function(e,r){Ba(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return ho()<=xt.DEBUG&&lo("QueryEngine","Using full collection scan to execute query:",qa(e)),this.Sn.getDocumentsMatchingQuery(t,e,So.min())},t}(),yh=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new ks(Io),this.kn=new Zc((function(t){return ha(t)}),la),this.On=So.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new ph(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function mh(t,e,n,r){return new yh(t,e,n,r)}function gh(t,e){return st(this,void 0,void 0,(function(){var n,r,i,o;return ut(this,(function(a){switch(a.label){case 0:return n=go(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(a){return o=a,r=n.persistence.getMutationQueue(e),i=new ph(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],a=Us(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];a=a.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,m=v.mutations;y<m.length;y++){var g=m[y];a=a.add(g.key)}}return i.pn(t,a).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function bh(t,e){var n=go(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=Zu.resolve();return o.forEach((function(t){a=a.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);mo(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),a.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function wh(t){var e=go(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function Ih(t,e){var n=go(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var a=[];e.targetChanges.forEach((function(e,o){var s=i.get(o);if(s){a.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return mo(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,e)&&a.push(n.qe.updateTargetData(t,c))}}}));var s=Ps();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(function(t,e,n,r,i){var o=Us();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Ps();return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(So.min())?(e.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):lo("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}(t,o,e.documentUpdates,r,void 0).next((function(t){s=t}))),!r.isEqual(So.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));a.push(u)}return Zu.waitFor(a).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,s)})).next((function(){return s}))})).then((function(t){return n.Fn=i,t}))}function Eh(t,e){var n=go(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Th(t,e){var n=go(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,Zu.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new pc(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function _h(t,e,n){return st(this,void 0,void 0,(function(){var r,i,o,a;return ut(this,(function(s){switch(s.label){case 0:r=go(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!ic(a=s.sent()))throw a;return lo("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function Sh(t,e,n){var r=go(t),i=So.min(),o=Us();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=go(t),i=r.kn.get(n);return void 0!==i?Zu.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,Fa(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:So.min(),n?o:Us())})).next((function(t){return{documents:t,Bn:o}}))}))}function Ah(t,e){var n=go(t),r=go(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function Nh(t){var e=go(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=go(t),i=Ps(),o=mc(n),a=ih(e),s=IDBKeyRange.lowerBound(o,!0);return a.Ot({index:ju.readTimeIndex,range:s},(function(t,e){var n=vc(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:gc(o)}}))}(e.$n,t,e.On)})).then((function(t){var n=t.wn,r=t.readTime;return e.On=r,n}))}function kh(t){return st(this,void 0,void 0,(function(){var e;return ut(this,(function(n){return[2,(e=go(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=ih(t),n=So.min();return e.Ot({index:ju.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=gc(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.On=t}))]}))}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Dh=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Zu.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:ru(n.createTime)}),Zu.resolve()},t.prototype.getNamedQuery=function(t,e){return Zu.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:_c(t.bundledQuery),readTime:ru(t.readTime)}}(e)),Zu.resolve()},t}(),xh=function(){function t(){this.Wn=new Os(Oh.Gn),this.zn=new Os(Oh.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Oh(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new Oh(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new Ho(new xo([])),r=new Oh(n,t),i=new Oh(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Ho(new xo([])),n=new Oh(e,t),r=new Oh(e,t+1),i=Us();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new Oh(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Oh=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Ho.comparator(t.key,e.key)||Io(t.ns,e.ns)},t.Hn=function(t,e){return Io(t.ns,e.ns)||Ho.comparator(t.key,e.key)},t}(),Ch=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Os(Oh.Gn)}return t.prototype.checkEmpty=function(t){return Zu.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new lc(i,e,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new Oh(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Zu.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Zu.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return Zu.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Zu.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Zu.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Oh(e,0),i=new Oh(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),Zu.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Os(Io);return e.forEach((function(t){var e=new Oh(t,0),i=new Oh(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),Zu.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Ho.isDocumentKey(i)||(i=i.child(""));var o=new Oh(new Ho(i),0),a=new Os(Io);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.ns)),!0)}),o),Zu.resolve(this.us(a))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;mo(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Zu.forEach(e.mutations,(function(i){var o=new Oh(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Oh(e,0),r=this.rs.firstAfterOrEqual(n);return Zu.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,Zu.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Rh=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new ks(Ho.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Zu.resolve(n?n.document.clone():sa.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Ps();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():sa.newInvalidDocument(t))})),Zu.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Ps(),i=new Ho(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.document,h=u.readTime;if(!e.path.isPrefixOf(s.path))break;h.compareTo(n)<=0||Ba(e,c)&&(r=r.insert(c.key,c.clone()))}return Zu.resolve(r)},t.prototype.fs=function(t,e){return Zu.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new Ph(this)},t.prototype.getSize=function(t){return Zu.resolve(this.size)},t}(),Ph=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return ot(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),Zu.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(th),Lh=function(){function t(t){this.persistence=t,this.ds=new Zc((function(t){return ha(t)}),la),this.lastRemoteSnapshotVersion=So.min(),this.highestTargetId=0,this.ws=0,this._s=new xh,this.targetCount=0,this.ys=qc.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),Zu.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Zu.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Zu.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Zu.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Zu.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new qc(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Zu.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Zu.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Zu.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),Zu.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return Zu.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Zu.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Zu.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),Zu.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Zu.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Zu.resolve(n)},t.prototype.containsKey=function(t,e){return Zu.resolve(this._s.containsKey(e))},t}(),Mh=function(){function t(t,e){var n=this;this.gs={},this.Ne=new ao(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Lh(this),this.Ut=new kc,this.Ue=function(t,e){return new Rh(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new dc(e),this.Qe=new Dh(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Ch(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;lo("MemoryPersistence","Starting transaction:",t);var i=new Fh(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return Zu.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),Fh=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return ot(e,t),e}(Yu),Vh=function(){function t(t){this.persistence=t,this.As=new xh,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw yo()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Zu.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Zu.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Zu.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Zu.forEach(this.vs,(function(r){var i=Ho.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Zu.or([function(){return Zu.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Uh=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function jh(t,e){return"firestore_clients_"+t+"_"+e}function qh(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Bh(t,e){return"firestore_targets_"+t+"_"+e}Uh.UNAUTHENTICATED=new Uh(null),Uh.GOOGLE_CREDENTIALS=new Uh("google-credentials-uid"),Uh.FIRST_PARTY=new Uh("first-party-uid");var Kh=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new uo(o.error.code,o.error.message)),a?new t(e,n,o.state,i):(fo("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Gh=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new uo(i.error.code,i.error.message)),o?new t(e,i.state,r):(fo("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Hh=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=qs(),a=0;i&&a<r.activeTargetIds.length;++a)i=Go(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(fo("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),zh=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(fo("SharedClientState","Failed to parse online state: "+e),null)},t}(),Wh=function(){function t(){this.activeTargetIds=qs()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),$h=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new ks(Io),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=jh(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Wh),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return st(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,s,u,c,h,l=this;return ut(this,(function(f){switch(f.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(jh(this.persistenceKey,r)))&&(o=Hh.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(a=this.storage.getItem(this.Us))&&(s=this.js(a))&&this.Ws(s),u=0,c=this.Os;u<c.length;u++)h=c[u],this.Fs(h);return this.Os=[],this.window.addEventListener("unload",(function(){return l.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Bh(this.persistenceKey,t));if(n){var r=Gh.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Bh(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return lo("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){lo("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){lo("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(lo("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void fo("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return st(e,void 0,void 0,(function(){var t,e,r,i,o,a;return ut(this,(function(s){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(a=function(t){var e=ao.o;if(null!=t)try{var n=JSON.parse(t);mo("number"==typeof n),e=n}catch(t){fo("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==ao.o&&this.sequenceNumberHandler(a);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Kh(this.currentUser,t,e,n),i=qh(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=qh(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=Bh(this.persistenceKey,t),i=new Gh(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Hh.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Kh.Vs(new Uh(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Gh.Vs(r,e)},t.prototype.js=function(t){return zh.Vs(t)},t.prototype.ii=function(t){return st(this,void 0,void 0,(function(){return ut(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(lo("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.syncEngine.hi(a,s).then((function(){n.ks=r}))},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=qs();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),Qh=function(){function t(){this.li=new Wh,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Wh,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Xh=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Yh=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){lo("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){lo("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Jh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Zh=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),tl=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return ot(e,t),e.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var a=new oo;a.listenOnce(to.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case Zi.NO_ERROR:var e=a.getResponseJson();lo("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Zi.TIMEOUT:lo("Connection",'RPC "'+t+'" timed out'),o(new uo(so.DEADLINE_EXCEEDED,"Request time out"));break;case Zi.HTTP_ERROR:var n=a.getStatus();if(lo("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(so).indexOf(e)>=0?e:so.UNKNOWN}(r.status);o(new uo(s,r.message))}else o(new uo(so.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new uo(so.UNAVAILABLE,"Connection failed."));break;default:yo()}}finally{lo("Connection",'RPC "'+t+'" completed.')}}));var s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))},e.prototype.$i=function(t,e){var n,r=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new $i,o=Xn(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(a.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pt())||"object"==typeof navigator&&"ReactNative"===navigator.product||pt().indexOf("Electron/")>=0||function(){var t=pt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||pt().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(a.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");lo("Connection","Creating WebChannel: "+s,a);var u=i.createWebChannel(s,a),c=!1,h=!1,l=new Zh({Ei:function(t){h?lo("Connection","Not sending because WebChannel is closed:",t):(c||(lo("Connection","Opening WebChannel transport."),u.open(),c=!0),lo("Connection","WebChannel sending:",t),u.send(t))},Ti:function(){return u.close()}}),f=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(u,io.EventType.OPEN,(function(){h||lo("Connection","WebChannel transport opened.")})),f(u,io.EventType.CLOSE,(function(){h||(h=!0,lo("Connection","WebChannel transport closed"),l.Vi())})),f(u,io.EventType.ERROR,(function(t){h||(h=!0,po("Connection","WebChannel transport errored:",t),l.Vi(new uo(so.UNAVAILABLE,"The operation could not be completed")))})),f(u,io.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];mo(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){lo("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=Is[t];if(void 0!==e)return Ns(e)}(o),s=i.message;void 0===a&&(a=so.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),h=!0,l.Vi(new uo(a,s)),u.close()}else lo("Connection","WebChannel received:",n),l.Si(n)}})),f(o,eo.STAT_EVENT,(function(t){t.stat===no?lo("Connection","Detected buffering proxy"):t.stat===ro&&lo("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Pi()}),0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);lo("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then((function(t){return lo("RestConnection","Received: ",t),t}),(function(e){throw po("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.3.2",t["X-Firebase-GMPID"]=this.databaseInfo.appId,t["Content-Type"]="text/plain",e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=Jh[t];return this.Di+"/v1/"+e+":"+n},t}());
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function el(){return"undefined"!=typeof window?window:null}function nl(){return"undefined"!=typeof document?document:null}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function rl(t){return new Zs(t,!0)}var il=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&lo("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Qi=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),ol=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new il(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return st(this,void 0,void 0,(function(){return ut(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return st(this,void 0,void 0,(function(){return ut(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return st(this,void 0,void 0,(function(){return ut(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===so.RESOURCE_EXHAUSTED?(fo(e.toString()),fo("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===so.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new uo(so.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return st(t,void 0,void 0,(function(){return ut(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return lo("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(lo("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),al=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return ot(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:yo()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(mo(void 0===e||"string"==typeof e),Po.fromBase64String(e||"")):(mo(void 0===e||e instanceof Uint8Array),Po.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(s=e.targetChange.cause)&&function(t){var e=void 0===t.code?so.UNKNOWN:Ns(t.code);return new uo(e,t.message||"")}(s);n=new zs(r,i,o,a||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=su(t,r.document.name),o=ru(r.document.updateTime);var s=new oa({mapValue:{fields:r.document.fields}}),u=(a=sa.newFoundDocument(i,o,s),r.targetIds||[]),c=r.removedTargetIds||[];n=new Gs(u,c,a.key,a)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=su(t,r.document),o=r.readTime?ru(r.readTime):So.min(),s=sa.newNoDocument(i,o),a=r.removedTargetIds||[],n=new Gs([],a,s.key,s);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=su(t,r.document),o=r.removedTargetIds||[],n=new Gs([],o,i,null);else{if(!("filter"in e))return yo();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new Ss(r),o=h.targetId,n=new Hs(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return So.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?So.min():e.readTime?ru(e.readTime):So.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=hu(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=fa(r)?{documents:vu(t,r)}:{query:yu(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=eu(t,e.resumeToken):e.snapshotVersion.compareTo(So.min())>0&&(n.readTime=tu(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return yo()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=hu(this.R),e.removeTarget=t,this.cr(e)},e}(ol),sl=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return ot(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(mo(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(mo(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?ru(t.updateTime):ru(e);return n.isEqual(So.min())&&(n=ru(e)),new ss(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=ru(t.commitTime);return this.listener.Tr(n,e)}return mo(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=hu(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return pu(e.R,t)}))};this.cr(n)},e}(ol),ul=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return ot(e,t),e.prototype.br=function(){if(this.Rr)throw new uo(so.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw t.code===so.UNAUTHENTICATED&&r.credentials.invalidateToken(),t}))},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Oi(t,e,n,i)})).catch((function(t){throw t.code===so.UNAUTHENTICATED&&r.credentials.invalidateToken(),t}))},e.prototype.terminate=function(){this.Rr=!1},e}((function(){})),cl=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(fo(e),this.Vr=!1):lo("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),hl=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return st(o,void 0,void 0,(function(){return ut(this,(function(t){switch(t.label){case 0:return bl(this)?(lo("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return st(this,void 0,void 0,(function(){var e;return ut(this,(function(n){switch(n.label){case 0:return(e=go(t)).$r.add(4),[4,fl(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,ll(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new cl(n,r)};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ll(t){return st(this,void 0,void 0,(function(){var e,n;return ut(this,(function(r){switch(r.label){case 0:if(!bl(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function fl(t){return st(this,void 0,void 0,(function(){var e,n;return ut(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function pl(t,e){var n=go(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),gl(n)?ml(n):Pl(n).er()&&vl(n,e))}function dl(t,e){var n=go(t),r=Pl(n);n.Or.delete(e),r.er()&&yl(n,e),0===n.Or.size&&(r.er()?r.ir():bl(n)&&n.Br.set("Unknown"))}function vl(t,e){t.qr.U(e.targetId),Pl(t).mr(e)}function yl(t,e){t.qr.U(e),Pl(t).yr(e)}function ml(t){t.qr=new $s({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),Pl(t).start(),t.Br.Sr()}function gl(t){return bl(t)&&!Pl(t).tr()&&t.Or.size>0}function bl(t){return 0===go(t).$r.size}function wl(t){t.qr=void 0}function Il(t){return st(this,void 0,void 0,(function(){return ut(this,(function(e){return t.Or.forEach((function(e,n){vl(t,e)})),[2]}))}))}function El(t,e){return st(this,void 0,void 0,(function(){return ut(this,(function(n){return wl(t),gl(t)?(t.Br.Nr(e),ml(t)):t.Br.set("Unknown"),[2]}))}))}function Tl(t,e,n){return st(this,void 0,void 0,(function(){var r,i,o;return ut(this,(function(a){switch(a.label){case 0:if(t.Br.set("Online"),!(e instanceof zs&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return st(this,void 0,void 0,(function(){var n,r,i,o;return ut(this,(function(a){switch(a.label){case 0:n=e.cause,r=0,i=e.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],t.Or.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),t.Or.delete(o),t.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),lo("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,_l(t,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Gs?t.qr.X(e):e instanceof Hs?t.qr.rt(e):t.qr.et(e),n.isEqual(So.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,wh(t.localStore)];case 8:return i=a.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(Po.EMPTY_BYTE_STRING,n.snapshotVersion)),yl(t,e);var r=new pc(n.target,e,1,n.sequenceNumber);vl(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return lo("RemoteStore","Failed to raise snapshot:",o=a.sent()),[4,_l(t,o)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function _l(t,e,n){return st(this,void 0,void 0,(function(){var r=this;return ut(this,(function(i){switch(i.label){case 0:if(!ic(e))throw e;return t.$r.add(1),[4,fl(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return wh(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return st(r,void 0,void 0,(function(){return ut(this,(function(e){switch(e.label){case 0:return lo("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,ll(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Sl(t,e){return e().catch((function(n){return _l(t,n,e)}))}function Al(t){return st(this,void 0,void 0,(function(){var e,n,r,i,o;return ut(this,(function(a){switch(a.label){case 0:e=go(t),n=Ll(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,a.label=1;case 1:if(!function(t){return bl(t)&&t.kr.length<10}(e))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,Eh(e.localStore,r)];case 3:return null===(i=a.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Ll(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=a.sent(),[4,_l(e,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return Nl(e)&&kl(e),[2]}}))}))}function Nl(t){return bl(t)&&!Ll(t).tr()&&t.kr.length>0}function kl(t){Ll(t).start()}function Dl(t){return st(this,void 0,void 0,(function(){return ut(this,(function(e){return Ll(t).Ar(),[2]}))}))}function xl(t){return st(this,void 0,void 0,(function(){var e,n,r,i;return ut(this,(function(o){for(e=Ll(t),n=0,r=t.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function Ol(t,e,n){return st(this,void 0,void 0,(function(){var r,i;return ut(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=fc.from(r,e,n),[4,Sl(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,Al(t)];case 2:return o.sent(),[2]}}))}))}function Cl(t,e){return st(this,void 0,void 0,(function(){return ut(this,(function(n){switch(n.label){case 0:return e&&Ll(t).pr?[4,function(t,e){return st(this,void 0,void 0,(function(){var n,r;return ut(this,(function(i){switch(i.label){case 0:return As(r=e.code)&&r!==so.ABORTED?(n=t.kr.shift(),Ll(t).sr(),[4,Sl(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Al(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Nl(t)&&kl(t),[2]}}))}))}function Rl(t,e){return st(this,void 0,void 0,(function(){var n;return ut(this,(function(r){switch(r.label){case 0:return n=go(t),e?(n.$r.delete(2),[4,ll(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,fl(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Pl(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=go(t);return r.br(),new al(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Il.bind(null,t),Ri:El.bind(null,t),_r:Tl.bind(null,t)}),t.Mr.push((function(n){return st(e,void 0,void 0,(function(){return ut(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),gl(t)?ml(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),wl(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function Ll(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=go(t);return r.br(),new sl(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Dl.bind(null,t),Ri:Cl.bind(null,t),Ir:xl.bind(null,t),Tr:Ol.bind(null,t)}),t.Mr.push((function(n){return st(e,void 0,void 0,(function(){return ut(this,(function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,Al(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(lo("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Qr
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var Ml=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Ju,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new uo(so.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Fl(t,e){if(fo("AsyncQueue",e+": "+t),ic(t))return new uo(so.UNAVAILABLE,e+": "+t);throw t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Vl=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Ho.comparator(e.key,n.key)}:function(t,e){return Ho.comparator(t.key,e.key)},this.keyedMap=Ms(),this.sortedSet=new ks(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Ul=function(){function t(){this.Kr=new ks(Ho.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):yo():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),jl=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Vl.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ua(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),ql=function(){this.Wr=void 0,this.listeners=[]},Bl=function(){this.queries=new Zc((function(t){return ja(t)}),Ua),this.onlineState="Unknown",this.Gr=new Set};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Kl(t,e){return st(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return ut(this,(function(c){switch(c.label){case 0:if(n=go(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new ql),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Wr=c.sent(),[3,4];case 3:return s=c.sent(),u=Fl(s,"Initialization of query '"+qa(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Wl(n),[2]}}))}))}function Gl(t,e){return st(this,void 0,void 0,(function(){var n,r,i,o,a;return ut(this,(function(s){return n=go(t),r=e.query,i=!1,(o=n.queries.get(r))&&(a=o.listeners.indexOf(e))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function Hl(t,e){for(var n=go(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].Hr(a)&&(r=!0);u.Wr=a}}r&&Wl(n)}function zl(t,e,n){var r=go(t),i=r.queries.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(e)}function Wl(t){t.Gr.forEach((function(t){t.next()}))}var $l=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new jl(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=jl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Ql=function(t){this.key=t},Xl=function(t){this.key=t},Yl=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Us(),this.mutatedKeys=Us(),this.lo=Ka(t),this.fo=new Vl(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Ul,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=Oa(this.query)&&i.size===this.query.limit?i.last():null,c=Ca(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var h=i.get(t),l=Ba(n.query,e)?e:null,f=!!h&&n.mutatedKeys.has(h.key),p=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),d=!1;h&&l?h.data.isEqual(l.data)?f!==p&&(r.track({type:3,doc:l}),d=!0):n.yo(h,l)||(r.track({type:2,doc:l}),d=!0,(u&&n.lo(l,u)>0||c&&n.lo(l,c)<0)&&(s=!0)):!h&&l?(r.track({type:0,doc:l}),d=!0):h&&!l&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(s=!0)),d&&(l?(a=a.add(l),o=p?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),Oa(this.query)||Ca(this.query))for(;a.size>this.query.limit;){var h=Oa(this.query)?a.last():a.first();a=a.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yo()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var a=e?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new jl(this.query,t.fo,i,o,t.mutatedKeys,0===s,u,!1),To:a}:{To:a}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Ul,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Us(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new Xl(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new Ql(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Us();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return jl.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Jl=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Zl=function(t){this.key=t,this.bo=!1},tf=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Zc((function(t){return ja(t)}),Ua),this.Vo=new Map,this.So=new Set,this.Do=new ks(Ho.comparator),this.Co=new Map,this.No=new xh,this.xo={},this.Fo=new Map,this.ko=qc.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ef(t,e){return st(this,void 0,void 0,(function(){var n,r,i,o,a,s;return ut(this,(function(u){switch(u.label){case 0:return n=Of(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,Th(n.localStore,Fa(e))];case 2:return a=u.sent(),s=n.sharedClientState.addLocalQueryTarget(a.targetId),r=a.targetId,[4,nf(n,e,r,"current"===s)];case 3:i=u.sent(),n.isPrimaryClient&&pl(n.remoteStore,a),u.label=4;case 4:return[2,i]}}))}))}function nf(t,e,n,r){return st(this,void 0,void 0,(function(){var i,o,a,s,u,c;return ut(this,(function(h){switch(h.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return st(this,void 0,void 0,(function(){var i,o,a;return ut(this,(function(s){switch(s.label){case 0:return(i=e.view._o(n)).Nn?[4,Sh(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),a=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(yf(t,e.targetId,a.To),a.snapshot)]}}))}))}(t,e,n,r)},[4,Sh(t.localStore,e,!0)];case 1:return i=h.sent(),o=new Yl(e,i.Bn),a=o._o(i.documents),s=Ks.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(a,t.isPrimaryClient,s),yf(t,n,u.To),c=new Jl(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}}))}))}function rf(t,e){return st(this,void 0,void 0,(function(){var n,r,i;return ut(this,(function(o){switch(o.label){case 0:return n=go(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!Ua(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,_h(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),dl(n.remoteStore,r.targetId),df(n,r.targetId)})).catch(zc)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return df(n,r.targetId),[4,_h(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function of(t,e,n){return st(this,void 0,void 0,(function(){var r,i,o,a;return ut(this,(function(s){switch(s.label){case 0:r=Cf(t),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,function(t,e){var n,r=go(t),i=_o.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Us());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],h=ps(c,n.get(c.key));null!=h&&a.push(new ms(c.key,h,aa(h.toProto().mapValue),us.exists(!0)))}return r._n.addMutationBatch(t,i,a,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=s.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new ks(Io)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,bf(r,i.changes)];case 3:return s.sent(),[4,Al(r.remoteStore)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),a=Fl(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}function af(t,e){return st(this,void 0,void 0,(function(){var n,r;return ut(this,(function(i){switch(i.label){case 0:n=go(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Ih(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(mo(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?mo(r.bo):t.removedDocuments.size>0&&(mo(r.bo),r.bo=!1))})),[4,bf(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,zc(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function sf(t,e,n){var r=go(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=go(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&Wl(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function uf(t,e,n){return st(this,void 0,void 0,(function(){var r,i,o,a,s,u;return ut(this,(function(c){switch(c.label){case 0:return(r=go(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(a=(a=new ks(Ho.comparator)).insert(o,sa.newNoDocument(o,So.min())),s=Us().add(o),u=new Bs(So.min(),new Map,new Os(Io),a,s),[4,af(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),gf(r),[3,4];case 2:return[4,_h(r.localStore,e,!1).then((function(){return df(r,e,n)})).catch(zc)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function cf(t,e){return st(this,void 0,void 0,(function(){var n,r,i;return ut(this,(function(o){switch(o.label){case 0:n=go(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,bh(n.localStore,e)];case 2:return i=o.sent(),pf(n,r,null),ff(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,bf(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,zc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function hf(t,e,n){return st(this,void 0,void 0,(function(){var r,i;return ut(this,(function(o){switch(o.label){case 0:r=go(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=go(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return mo(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),pf(r,e,n),ff(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,bf(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,zc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function lf(t,e){return st(this,void 0,void 0,(function(){var n,r,i,o,a;return ut(this,(function(s){switch(s.label){case 0:bl((n=go(t)).remoteStore)||lo("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,function(t){var e=go(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=s.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=s.sent(),a=Fl(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}}))}))}function ff(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function pf(t,e,n){var r=go(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function df(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||vf(t,e)}))}function vf(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(dl(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),gf(t))}function yf(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Ql?(t.No.addReference(o.key,e),mf(t,o)):o instanceof Xl?(lo("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||vf(t,o.key)):yo()}}function mf(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(lo("SyncEngine","New document in limbo: "+n),t.So.add(r),gf(t))}function gf(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Ho(xo.fromString(e)),r=t.ko.next();t.Co.set(r,new Zl(n)),t.Do=t.Do.insert(n,r),pl(t.remoteStore,new pc(Fa(xa(n.path)),r,2,ao.o))}}function bf(t,e,n){return st(this,void 0,void 0,(function(){var r,i,o,a;return ut(this,(function(s){switch(s.label){case 0:return r=go(t),i=[],o=[],a=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,s){a.push(r.$o(s,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=dh.Pn(s.targetId,t);o.push(e)}})))})),[4,Promise.all(a)]);case 1:return s.sent(),r.vo._r(i),[4,function(t,e){return st(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,h;return ut(this,(function(l){switch(l.label){case 0:n=go(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Zu.forEach(e,(function(e){return Zu.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return Zu.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return l.sent(),[3,4];case 3:if(!ic(r=l.sent()))throw r;return lo("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=o[i],s=a.targetId,a.fromCache||(u=n.Fn.get(s),c=u.snapshotVersion,h=u.withLastLimboFreeSnapshotVersion(c),n.Fn=n.Fn.insert(s,h));return[2]}}))}))}(r.localStore,o)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function wf(t,e){return st(this,void 0,void 0,(function(){var n,r;return ut(this,(function(i){switch(i.label){case 0:return(n=go(t)).currentUser.isEqual(e)?[3,3]:(lo("SyncEngine","User change. New user:",e.toKey()),[4,gh(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach((function(t){t.forEach((function(t){t.reject(new uo(so.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,bf(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function If(t,e){var n=go(t),r=n.Co.get(e);if(r&&r.bo)return Us().add(r.key);var i=Us(),o=n.Vo.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function Ef(t,e){return st(this,void 0,void 0,(function(){var n,r,i;return ut(this,(function(o){switch(o.label){case 0:return[4,Sh((n=go(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&yf(n,e.targetId,i.To),i)]}}))}))}function Tf(t){return st(this,void 0,void 0,(function(){var e;return ut(this,(function(n){return[2,Nh((e=go(t)).localStore).then((function(t){return bf(e,t)}))]}))}))}function _f(t,e,n,r){return st(this,void 0,void 0,(function(){var i,o;return ut(this,(function(a){switch(a.label){case 0:return[4,function(t,e){var n=go(t),r=go(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):Zu.resolve(null)}))}))}((i=go(t)).localStore,e)];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,Al(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(pf(i,e,r||null),ff(i,e),function(t,e){go(go(t)._n).Gt(e)}(i.localStore,e)):yo(),a.label=4;case 4:return[4,bf(i,o)];case 5:return a.sent(),[3,7];case 6:lo("SyncEngine","Cannot apply mutation batch with id: "+e),a.label=7;case 7:return[2]}}))}))}function Sf(t,e){return st(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return ut(this,(function(h){switch(h.label){case 0:return Of(n=go(t)),Cf(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Af(n,r.toArray())]);case 1:return i=h.sent(),n.Oo=!0,[4,Rl(n.remoteStore,!0)];case 2:for(h.sent(),o=0,a=i;o<a.length;o++)s=a[o],pl(n.remoteStore,s);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then((function(){return df(n,e),_h(n.localStore,e,!0)})),dl(n.remoteStore,e)})),[4,c]);case 4:return h.sent(),[4,Af(n,u)];case 5:return h.sent(),function(t){var e=go(t);e.Co.forEach((function(t,n){dl(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new ks(Ho.comparator)}(n),n.Oo=!1,[4,Rl(n.remoteStore,!1)];case 6:h.sent(),h.label=7;case 7:return[2]}}))}))}function Af(t,e,n){return st(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,h,l,f,p,d,v;return ut(this,(function(y){switch(y.label){case 0:n=go(t),r=[],i=[],o=0,a=e,y.label=1;case 1:return o<a.length?(s=a[o],u=void 0,(c=n.Vo.get(s))&&0!==c.length?[4,Th(n.localStore,Fa(c[0]))]:[3,7]):[3,13];case 2:u=y.sent(),h=0,l=c,y.label=3;case 3:return h<l.length?(f=l[h],p=n.Po.get(f),[4,Ef(n,p)]):[3,6];case 4:(d=y.sent()).snapshot&&i.push(d.snapshot),y.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Ah(n.localStore,s)];case 8:return v=y.sent(),[4,Th(n.localStore,v)];case 9:return u=y.sent(),[4,nf(n,Nf(v),s,!1)];case 10:y.sent(),y.label=11;case 11:r.push(u),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function Nf(t){return Da(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function kf(t){var e=go(t);return go(go(e.localStore).persistence).fn()}function Df(t,e,n,r){return st(this,void 0,void 0,(function(){var i,o,a;return ut(this,(function(s){switch(s.label){case 0:return(i=go(t)).Oo?(lo("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Nh(i.localStore)];case 3:return o=s.sent(),a=Bs.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,bf(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,_h(i.localStore,e,!0)];case 6:return s.sent(),df(i,e,r),[3,8];case 7:yo(),s.label=8;case 8:return[2]}}))}))}function xf(t,e,n){return st(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,h,l,f;return ut(this,(function(p){switch(p.label){case 0:if(!(r=Of(t)).Oo)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(a=o[i],r.Vo.has(a)?(lo("SyncEngine","Adding an already active target "+a),[3,5]):[4,Ah(r.localStore,a)]):[3,6];case 2:return s=p.sent(),[4,Th(r.localStore,s)];case 3:return u=p.sent(),[4,nf(r,Nf(s),u.targetId,!1)];case 4:p.sent(),pl(r.remoteStore,u),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return ut(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,_h(r.localStore,t,!1).then((function(){dl(r.remoteStore,t),df(r,t)})).catch(zc)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,l=n,p.label=7;case 7:return h<l.length?(f=l[h],[5,c(f)]):[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function Of(t){var e=go(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=af.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=If.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uf.bind(null,e),e.vo._r=Hl.bind(null,e.eventManager),e.vo.Mo=zl.bind(null,e.eventManager),e}function Cf(t){var e=go(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cf.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hf.bind(null,e),e}var Rf=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return st(this,void 0,void 0,(function(){return ut(this,(function(e){switch(e.label){case 0:return this.R=rl(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return mh(this.persistence,new vh,t.initialUser,this.R)},t.prototype.qo=function(t){return new Mh(Vh.bs,this.R)},t.prototype.Bo=function(t){return new Qh},t.prototype.terminate=function(){return st(this,void 0,void 0,(function(){return ut(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),Pf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return ot(e,t),e.prototype.initialize=function(e){return st(this,void 0,void 0,(function(){return ut(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,kh(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,Cf(this.Ko.syncEngine)];case 4:return n.sent(),[4,Al(this.Ko.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Qo=function(t){return mh(this.persistence,new vh,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new Qc(e,t.asyncQueue)},e.prototype.qo=function(t){var e=fh(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Rc.withCacheSize(this.cacheSizeBytes):Rc.DEFAULT;return new ch(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,el(),nl(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Qh},e}(Rf),Lf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return ot(e,t),e.prototype.initialize=function(e){return st(this,void 0,void 0,(function(){var n,r=this;return ut(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof $h?(this.sharedClientState.syncEngine={ui:_f.bind(null,n),ai:Df.bind(null,n),hi:xf.bind(null,n),fn:kf.bind(null,n),ci:Tf.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return st(r,void 0,void 0,(function(){return ut(this,(function(e){switch(e.label){case 0:return[4,Sf(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=el();if(!$h.yt(e))throw new uo(so.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=fh(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new $h(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Pf),Mf=function(){function t(){}return t.prototype.initialize=function(t,e){return st(this,void 0,void 0,(function(){var n=this;return ut(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return sf(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=wf.bind(null,this.syncEngine),[4,Rl(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new Bl},t.prototype.createDatastore=function(t){var e,n=rl(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new tl(e));return function(t,e,n){return new ul(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,a=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return sf(a.syncEngine,t,0)},o=Yh.yt()?new Yh:new Xh,new hl(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,a){var s=new tf(t,e,n,r,i,o);return a&&(s.Oo=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return st(this,void 0,void 0,(function(){var e;return ut(this,(function(n){switch(n.label){case 0:return e=go(t),lo("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,fl(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}(),Ff=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Vf=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return st(this,void 0,void 0,(function(){var e,n=this;return ut(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new uo(so.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return st(this,void 0,void 0,(function(){var n,r,i,o,a,s;return ut(this,(function(u){switch(u.label){case 0:return n=go(t),r=hu(n.R)+"/documents",i={documents:e.map((function(t){return au(n.R,t)}))},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=u.sent(),a=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){mo(!!e.found),e.found.name,e.found.updateTime;var n=su(t,e.found.name),r=ru(e.found.updateTime),i=new oa({mapValue:{fields:e.found.fields}});return sa.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){mo(!!e.missing),mo(!!e.readTime);var n=su(t,e.missing),r=ru(e.readTime);return sa.newNoDocument(n,r)}(t,e):yo()}(n.R,t);a.set(e.key.toString(),e)})),s=[],[2,(e.forEach((function(t){var e=a.get(t.toString());mo(!!e),s.push(e)})),s)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Ts(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return st(this,void 0,void 0,(function(){var t,e=this;return ut(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Ho.fromPath(n);e.mutations.push(new _s(r,e.precondition(r)))})),[4,function(t,e){return st(this,void 0,void 0,(function(){var n,r,i;return ut(this,(function(o){switch(o.label){case 0:return n=go(t),r=hu(n.R)+"/documents",i={writes:e.map((function(t){return pu(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw yo();e=So.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new uo(so.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?us.updateTime(e):us.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(So.min()))throw new uo(so.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return us.updateTime(e)}return us.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),Uf=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new il(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return st(t,void 0,void 0,(function(){var t,e,n=this;return ut(this,(function(r){return t=new Vf(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Bo(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!As(e)}return!1},t}(),jf=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Uh.UNAUTHENTICATED,this.clientId=wo.u(),this.credentialListener=function(){},this.receivedInitialUser=new Ju,this.credentials.setChangeListener((function(t){lo("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()}))}return t.prototype.getConfiguration=function(){return st(this,void 0,void 0,(function(){return ut(this,(function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}}))}))},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then((function(){return e.credentialListener(e.user)}))},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new uo(so.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Ju;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return st(t,void 0,void 0,(function(){var t,n;return ut(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Fl(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function qf(t,e){return st(this,void 0,void 0,(function(){var n,r,i=this;return ut(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),lo("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable((function(){return st(i,void 0,void 0,(function(){return ut(this,(function(t){switch(t.label){case 0:return[4,gh(e.localStore,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function Bf(t,e){return st(this,void 0,void 0,(function(){var n,r;return ut(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Kf(t)];case 1:return n=i.sent(),lo("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(n){return t.asyncQueue.enqueueRetryable((function(){return function(t,e){return st(this,void 0,void 0,(function(){var n,r;return ut(this,(function(i){switch(i.label){case 0:return(n=go(t)).asyncQueue.verifyOperationInProgress(),lo("RemoteStore","RemoteStore received new credentials"),r=bl(n),n.$r.add(3),[4,fl(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,ll(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,n)}))})),t.onlineComponents=e,[2]}}))}))}function Kf(t){return st(this,void 0,void 0,(function(){return ut(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(lo("FirestoreClient","Using default OfflineComponentProvider"),[4,qf(t,new Rf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function Gf(t){return st(this,void 0,void 0,(function(){return ut(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(lo("FirestoreClient","Using default OnlineComponentProvider"),[4,Bf(t,new Mf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function Hf(t){return Kf(t).then((function(t){return t.persistence}))}function zf(t){return Kf(t).then((function(t){return t.localStore}))}function Wf(t){return Gf(t).then((function(t){return t.remoteStore}))}function $f(t){return Gf(t).then((function(t){return t.syncEngine}))}function Qf(t){return st(this,void 0,void 0,(function(){var e,n;return ut(this,(function(r){switch(r.label){case 0:return[4,Gf(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=ef.bind(null,e.syncEngine),n.onUnlisten=rf.bind(null,e.syncEngine),n)]}}))}))}function Xf(t,e,n){var r=this;void 0===n&&(n={});var i=new Ju;return t.asyncQueue.enqueueAndForget((function(){return st(r,void 0,void 0,(function(){var r;return ut(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Ff({next:function(o){e.enqueueAndForget((function(){return Gl(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new uo(so.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new uo(so.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new $l(xa(n.path),o,{includeMetadataChanges:!0,so:!0});return Kl(t,a)},[4,Qf(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function Yf(t,e,n){var r=this;void 0===n&&(n={});var i=new Ju;return t.asyncQueue.enqueueAndForget((function(){return st(r,void 0,void 0,(function(){var r;return ut(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Ff({next:function(n){e.enqueueAndForget((function(){return Gl(t,a)})),n.fromCache&&"server"===r.source?i.reject(new uo(so.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new $l(n,o,{includeMetadataChanges:!0,so:!0});return Kl(t,a)},[4,Qf(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var Jf=function(t,e,n,r,i,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a},Zf=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),tp=new Map,ep=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},np=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(Uh.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),rp=function(){function t(t){var e=this;this.oc=null,this.currentUser=Uh.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){e.cc++,e.currentUser=e.uc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then((function(t){e.auth=t,e.oc&&e.auth.addAuthTokenListener(e.oc)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(lo("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(mo("string"==typeof n.accessToken),new ep(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},t.prototype.uc=function(){var t=this.auth&&this.auth.getUid();return mo(null===t||"string"==typeof t),new Uh(t)},t}(),ip=function(){function t(t,e){this.ac=t,this.hc=e,this.type="FirstParty",this.user=Uh.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),op=function(){function t(t,e){this.ac=t,this.hc=e}return t.prototype.getToken=function(){return Promise.resolve(new ip(this.ac,this.hc))},t.prototype.setChangeListener=function(t){t(Uh.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ap(t,e,n){if(!n)throw new uo(so.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function sp(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new uo(so.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function up(t,e,n,r){if(!0===e&&!0===r)throw new uo(so.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function cp(t){if(!Ho.isDocumentKey(t))throw new uo(so.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function hp(t){if(Ho.isDocumentKey(t))throw new uo(so.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function lp(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":yo()}function fp(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new uo(so.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=lp(t);throw new uo(so.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function pp(t,e){if(e<=0)throw new uo(so.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var dp=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new uo(so.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new uo(so.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,up("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),vp=function(){function t(t,e){this._persistenceKey="(lite)",this._settings=new dp({}),this._settingsFrozen=!1,t instanceof Zf?(this._databaseId=t,this._credentials=new np):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new uo(so.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zf(t.options.projectId)}(t),this._credentials=new rp(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new uo(so.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new uo(so.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dp(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new np;switch(t.type){case"gapi":var e=t.client;return mo(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new op(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new uo(so.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return this,(t=tp.get(this))&&(lo("ComponentProvider","Removing Datastore"),tp.delete(this),t.terminate()),Promise.resolve();var t},t}(),yp=function(){function t(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new gp(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),mp=function(){function t(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),gp=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,xa(r))||this).firestore=e,i._path=r,i.type="collection",i}return ot(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new yp(this.firestore,null,new Ho(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(mp);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function bp(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Tt(t),ap("collection","path",e),t instanceof vp)return hp(n=xo.fromString.apply(xo,ht([e],r))),new gp(t,null,n);if(!(t instanceof yp||t instanceof gp))throw new uo(so.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return hp(n=xo.fromString.apply(xo,ht([t.path],r)).child(xo.fromString(e))),new gp(t.firestore,null,n)}function wp(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Tt(t),1===arguments.length&&(e=wo.u()),ap("doc","path",e),t instanceof vp)return cp(n=xo.fromString.apply(xo,ht([e],r))),new yp(t,null,new Ho(n));if(!(t instanceof yp||t instanceof gp))throw new uo(so.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return cp(n=t._path.child(xo.fromString.apply(xo,ht([e],r)))),new yp(t.firestore,t instanceof gp?t._converter:null,new Ho(n))}function Ip(t,e){return t=Tt(t),e=Tt(e),(t instanceof yp||t instanceof gp)&&(e instanceof yp||e instanceof gp)&&t.firestore===e.firestore&&t.path===e.path&&t._converter===e._converter}function Ep(t,e){return t=Tt(t),e=Tt(e),t instanceof mp&&e instanceof mp&&t.firestore===e.firestore&&Ua(t._query,e._query)&&t._converter===e._converter
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var Tp=function(){function t(){var t=this;this.lc=Promise.resolve(),this.fc=[],this.dc=!1,this.wc=[],this._c=null,this.mc=!1,this.yc=[],this.Zi=new il(this,"async_queue_retry"),this.gc=function(){var e=nl();e&&lo("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=nl();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.gc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.dc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ec(),this.Tc(t)},t.prototype.enterRestrictedMode=function(){if(!this.dc){this.dc=!0;var t=nl();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.gc)}},t.prototype.enqueue=function(t){return this.Ec(),this.dc?new Promise((function(t){})):this.Tc(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.fc.push(t),e.Ic()}))},t.prototype.Ic=function(){return st(this,void 0,void 0,(function(){var t,e=this;return ut(this,(function(n){switch(n.label){case 0:if(0===this.fc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.fc[0]()];case 2:return n.sent(),this.fc.shift(),this.Zi.reset(),[3,4];case 3:if(!ic(t=n.sent()))throw t;return lo("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.fc.length>0&&this.Zi.ji((function(){return e.Ic()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Tc=function(t){var e=this,n=this.lc.then((function(){return e.mc=!0,t().catch((function(t){throw e._c=t,e.mc=!1,fo("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.mc=!1,t}))}));return this.lc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ec(),this.yc.indexOf(t)>-1&&(e=0);var i=Ml.createAndSchedule(this,t,e,n,(function(t){return r.Ac(t)}));return this.wc.push(i),i},t.prototype.Ec=function(){this._c&&yo()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Rc=function(){return st(this,void 0,void 0,(function(){var t;return ut(this,(function(e){switch(e.label){case 0:return[4,t=this.lc];case 1:e.sent(),e.label=2;case 2:if(t!==this.lc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.bc=function(t){for(var e=0,n=this.wc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.vc=function(t){var e=this;return this.Rc().then((function(){e.wc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.wc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Rc()}))},t.prototype.Pc=function(t){this.yc.push(t)},t.prototype.Ac=function(t){var e=this.wc.indexOf(t);this.wc.splice(e,1)},t}();function _p(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Sp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._queue=new Tp,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return ot(e,t),e.prototype._terminate=function(){return this._firestoreClient||Np(this),this._firestoreClient.terminate()},e}(vp);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ap(t){return t._firestoreClient||Np(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Np(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Jf(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new jf(t._credentials,t._queue,r)}function kp(t,e,n){var r=this,i=new Ju;return t.asyncQueue.enqueue((function(){return st(r,void 0,void 0,(function(){var r;return ut(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,qf(t,n)];case 1:return o.sent(),[4,Bf(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===so.FAILED_PRECONDITION||t.code===so.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function Dp(t){if(t._initialized||t._terminated)throw new uo(so.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var xp=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new uo(so.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Co(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Op=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Po.fromBase64String(e))}catch(e){throw new uo(so.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Po.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Cp=function(t){this._methodName=t},Rp=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new uo(so.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new uo(so.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Io(this._lat,t._lat)||Io(this._long,t._long)},t}(),Pp=/^__.*__$/,Lp=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new ms(t,this.data,this.fieldMask,e,this.fieldTransforms):new ys(t,this.data,e,this.fieldTransforms)},t}(),Mp=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new ms(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Fp(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yo()}}var Vp=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Vc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Sc",{get:function(){return this.settings.Sc},enumerable:!1,configurable:!0}),t.prototype.Dc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Cc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Dc({path:n,Nc:!1});return r.xc(t),r},t.prototype.Fc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Dc({path:n,Nc:!1});return r.Vc(),r},t.prototype.kc=function(t){return this.Dc({path:void 0,Nc:!0})},t.prototype.Oc=function(t){return id(t,this.settings.methodName,this.settings.$c||!1,this.path,this.settings.Mc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Vc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.xc(this.path.get(t))},t.prototype.xc=function(t){if(0===t.length)throw this.Oc("Document fields must not be empty");if(Fp(this.Sc)&&Pp.test(t))throw this.Oc('Document fields cannot begin and end with "__"')},t}(),Up=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||rl(t)}return t.prototype.Lc=function(t,e,n,r){return void 0===r&&(r=!1),new Vp({Sc:t,methodName:e,Mc:n,path:Co.emptyPath(),Nc:!1,$c:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function jp(t){var e=t._freezeSettings(),n=rl(t._databaseId);return new Up(t._databaseId,!!e.ignoreUndefinedProperties,n)}function qp(t,e,n,r,i,o){void 0===o&&(o={});var a=t.Lc(o.merge||o.mergeFields?2:0,e,n,i);td("Data must be an object, but it was:",a,r);var s,u,c=Jp(r,a);if(o.merge)s=new Ro(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var p=ed(e,f[l],n);if(!a.contains(p))throw new uo(so.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");od(h,p)||h.push(p)}s=new Ro(h),u=a.fieldTransforms.filter((function(t){return s.covers(t.field)}))}else s=null,u=a.fieldTransforms;return new Lp(new oa(c),s,u)}var Bp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ot(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Sc)throw 1===t.Sc?t.Oc(this._methodName+"() can only appear at the top level of your update data"):t.Oc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Cp);function Kp(t,e,n){return new Vp({Sc:3,Mc:e.settings.Mc,methodName:t._methodName,Nc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Gp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ot(e,t),e.prototype._toFieldTransform=function(t){return new as(t.path,new Ja)},e.prototype.isEqual=function(t){return t instanceof e},e}(Cp),Hp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Bc=n,r}return ot(e,t),e.prototype._toFieldTransform=function(t){var e=Kp(this,t,!0),n=this.Bc.map((function(t){return Yp(t,e)})),r=new Za(n);return new as(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Cp),zp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Bc=n,r}return ot(e,t),e.prototype._toFieldTransform=function(t){var e=Kp(this,t,!0),n=this.Bc.map((function(t){return Yp(t,e)})),r=new es(n);return new as(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Cp),Wp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return ot(e,t),e.prototype._toFieldTransform=function(t){var e=new rs(t.R,Wa(t.R,this.qc));return new as(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Cp);function $p(t,e,n,r){var i=t.Lc(1,e,n);td("Data must be an object, but it was:",i,r);var o=[],a=oa.empty();No(r,(function(t,r){var s=rd(e,t,n);r=Tt(r);var u=i.Fc(s);if(r instanceof Bp)o.push(s);else{var c=Yp(r,u);null!=c&&(o.push(s),a.set(s,c))}}));var s=new Ro(o);return new Mp(a,s,i.fieldTransforms)}function Qp(t,e,n,r,i,o){var a=t.Lc(1,e,n),s=[ed(e,r,n)],u=[i];if(o.length%2!=0)throw new uo(so.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(ed(e,o[c])),u.push(o[c+1]);for(var h=[],l=oa.empty(),f=s.length-1;f>=0;--f)if(!od(h,s[f])){var p=s[f],d=u[f];d=Tt(d);var v=a.Fc(p);if(d instanceof Bp)h.push(p);else{var y=Yp(d,v);null!=y&&(h.push(p),l.set(p,y))}}var m=new Ro(h);return new Mp(l,m,a.fieldTransforms)}function Xp(t,e,n,r){return void 0===r&&(r=!1),Yp(n,t.Lc(r?4:3,e))}function Yp(t,e){if(Zp(t=Tt(t)))return td("Unsupported field value:",e,t),Jp(t,e);if(t instanceof Cp)return function(t,e){if(!Fp(e.Sc))throw e.Oc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Oc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Nc&&4!==e.Sc)throw e.Oc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=Yp(o[i],e.kc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Tt(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Wa(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=_o.fromDate(t);return{timestampValue:tu(e.R,n)}}if(t instanceof _o)return n=new _o(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:tu(e.R,n)};if(t instanceof Rp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Op)return{bytesValue:eu(e.R,t._byteString)};if(t instanceof yp){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Oc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:iu(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Oc("Unsupported field value: "+lp(t))}(t,e)}function Jp(t,e){var n={};return ko(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):No(t,(function(t,r){var i=Yp(r,e.Cc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Zp(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof _o||t instanceof Rp||t instanceof Op||t instanceof yp||t instanceof Cp)}function td(t,e,n){if(!Zp(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=lp(n);throw"an object"===r?e.Oc(t+" a custom object"):e.Oc(t+" "+r)}}function ed(t,e,n){if((e=Tt(e))instanceof xp)return e._internalPath;if("string"==typeof e)return rd(t,e);throw id("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var nd=new RegExp("[~\\*/\\[\\]]");function rd(t,e,n){if(e.search(nd)>=0)throw id("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(xp.bind.apply(xp,ht([void 0],e.split(".")))))._internalPath}catch(r){throw id("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function id(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new uo(so.INVALID_ARGUMENT,(s+=". ")+t+u)}function od(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ad=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new yp(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new sd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(ud("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),sd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ot(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(ad);function ud(t,e){return"string"==typeof e?rd(t,e):e instanceof xp?e._internalPath:e._delegate._internalPath}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var cd=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),hd=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,a)||this)._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return ot(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new ld(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(ud("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(ad),ld=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ot(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(hd),fd=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new cd(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new ld(n._firestore,n._userDataWriter,r.key,r,new cd(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new uo(so.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){var r=new ld(t._firestore,t._userDataWriter,e.doc.key,e.doc,new cd(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new ld(t._firestore,t._userDataWriter,e.doc.key,e.doc,new cd(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:pd(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function pd(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yo()}}function dd(t,e){return t instanceof hd&&e instanceof hd?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof fd&&e instanceof fd&&t._firestore===e._firestore&&Ep(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function vd(t){if(Ca(t)&&0===t.explicitOrderBy.length)throw new uo(so.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var yd=function(){};function md(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var gd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Uc=e,i.Qc=n,i.Kc=r,i.type="where",i}return ot(e,t),e.prototype._apply=function(t){var e=jp(t.firestore),n=function(t,e,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new uo(so.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Sd(a,o);for(var u=[],c=0,h=a;c<h.length;c++){var l=h[c];u.push(_d(r,t,l))}s={arrayValue:{values:u}}}else s=_d(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Sd(a,o),s=Xp(n,"where",a,"in"===o||"not-in"===o);var f=pa.create(i,o,s);return function(t,e){if(e.g()){var n=Pa(t);if(null!==n&&!n.isEqual(e.field))throw new uo(so.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Ra(t);null!==r&&Ad(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new uo(so.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new uo(so.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,e,t.firestore._databaseId,this.Uc,this.Qc,this.Kc);return new mp(t.firestore,t._converter,function(t,e){var n=t.filters.concat([e]);return new ka(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(yd),bd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Uc=e,r.jc=n,r.type="orderBy",r}return ot(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new uo(so.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new uo(so.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new _a(e,n);return function(t,e){if(null===Ra(t)){var n=Pa(t);null!==n&&Ad(t,n,e.field)}}(t,r),r}(t._query,this.Uc,this.jc);return new mp(t.firestore,t._converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new ka(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(yd),wd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Wc=n,i.Gc=r,i}return ot(e,t),e.prototype._apply=function(t){return new mp(t.firestore,t._converter,Va(t._query,this.Wc,this.Gc))},e}(yd),Id=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.zc=n,i.Hc=r,i}return ot(e,t),e.prototype._apply=function(t){var e=Td(t,this.type,this.zc,this.Hc);return new mp(t.firestore,t._converter,function(t,e){return new ka(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(yd),Ed=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.zc=n,i.Hc=r,i}return ot(e,t),e.prototype._apply=function(t){var e=Td(t,this.type,this.zc,this.Hc);return new mp(t.firestore,t._converter,function(t,e){return new ka(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(yd);function Td(t,e,n,r){if(n[0]=Tt(n[0]),n[0]instanceof ad)return function(t,e,n,r,i){if(!r)throw new uo(so.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=Ma(t);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(Zo(e,r.key));else{var c=r.data.field(u.field);if(Uo(c))throw new uo(so.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.canonicalString();throw new uo(so.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Ea(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=jp(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new uo(so.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new uo(so.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!La(t)&&-1!==c.indexOf("/"))throw new uo(so.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(xo.fromString(c));if(!Ho.isDocumentKey(h))throw new uo(so.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new Ho(h);s.push(Zo(e,l))}else{var f=Xp(n,r,c);s.push(f)}}return new Ea(s,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function _d(t,e,n){if("string"==typeof(n=Tt(n))){if(""===n)throw new uo(so.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!La(e)&&-1!==n.indexOf("/"))throw new uo(so.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(xo.fromString(n));if(!Ho.isDocumentKey(r))throw new uo(so.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Zo(t,new Ho(r))}if(n instanceof yp)return Zo(t,n._key);throw new uo(so.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+lp(n)+".")}function Sd(t,e){if(!Array.isArray(t)||0===t.length)throw new uo(so.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new uo(so.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Ad(t,e,n){if(!n.isEqual(e))throw new uo(so.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Nd=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),zo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Fo(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Vo(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw yo()}},t.prototype.convertObject=function(t,e){var n=this,r={};return No(t.fields||{},(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new Rp(Fo(t.latitude),Fo(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=jo(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(qo(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Mo(t);return new _o(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=xo.fromString(t);mo(ku(n));var r=new Zf(n.get(1),n.get(3)),i=new Ho(n.popFirst(5));return r.isEqual(e)||fo("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function kd(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Dd=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return ot(e,t),e.prototype.convertBytes=function(t){return new Op(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new yp(this.firestore,null,e)},e}(Nd),xd=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=jp(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Od(t,this._firestore),i=kd(r._converter,e,n),o=qp(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(o.toMutation(r._key,us.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,a=Od(t,this._firestore);return o="string"==typeof(e=Tt(e))||e instanceof xp?Qp(this._dataReader,"WriteBatch.update",a._key,e,n,r):$p(this._dataReader,"WriteBatch.update",a._key,e),this._mutations.push(o.toMutation(a._key,us.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Od(t,this._firestore);return this._mutations=this._mutations.concat(new Ts(e._key,us.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new uo(so.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Od(t,e){if((t=Tt(t)).firestore!==e)throw new uo(so.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Cd=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return ot(e,t),e.prototype.convertBytes=function(t){return new Op(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new yp(this.firestore,null,e)},e}(Nd);function Rd(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=fp(t,yp);var o=fp(t.firestore,Sp),a=jp(o);return Ld(o,[("string"==typeof(e=Tt(e))||e instanceof xp?Qp(a,"updateDoc",t._key,e,n,r):$p(a,"updateDoc",t._key,e)).toMutation(t._key,us.exists(!0))])}function Pd(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Tt(t);var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||_p(i[s])||(a=i[s],s++);var u,c,h,l={includeMetadataChanges:a.includeMetadataChanges};if(_p(i[s])){var f=i[s];i[s]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[s+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[s+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof yp)c=fp(t.firestore,Sp),h=xa(t._key.path),u={next:function(e){i[s]&&i[s](Md(c,t,e))},error:i[s+1],complete:i[s+2]};else{var p=fp(t,mp);c=fp(p.firestore,Sp),h=p._query;var d=new Cd(c);u={next:function(t){i[s]&&i[s](new fd(c,d,p,t))},error:i[s+1],complete:i[s+2]},vd(t._query)}return function(t,e,n,r){var i=this,o=new Ff(r),a=new $l(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return st(i,void 0,void 0,(function(){var e;return ut(this,(function(n){switch(n.label){case 0:return e=Kl,[4,Qf(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return st(i,void 0,void 0,(function(){var e;return ut(this,(function(n){switch(n.label){case 0:return e=Gl,[4,Qf(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))}))}}(Ap(c),h,l,u)}function Ld(t,e){return function(t,e){var n=this,r=new Ju;return t.asyncQueue.enqueueAndForget((function(){return st(n,void 0,void 0,(function(){var n;return ut(this,(function(i){switch(i.label){case 0:return n=of,[4,$f(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Ap(t),e)}function Md(t,e,n){var r=n.docs.get(e._key),i=new Cd(t);return new hd(t,i,e._key,r,new cd(n.hasPendingWrites,n.fromCache),e._converter)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Fd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return ot(e,t),e.prototype.get=function(e){var n=this,r=Od(e,this._firestore),i=new Cd(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new hd(n._firestore,i,r._key,t._document,new cd(!1,!1),r._converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=jp(t)}return t.prototype.get=function(t){var e=this,n=Od(t,this._firestore),r=new Dd(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return yo();var i=t[0];if(i.isFoundDocument())return new ad(e._firestore,r,i.key,i,n._converter);if(i.isNoDocument())return new ad(e._firestore,r,n._key,null,n._converter);throw yo()}))},t.prototype.set=function(t,e,n){var r=Od(t,this._firestore),i=kd(r._converter,e,n),o=qp(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a=Od(t,this._firestore);return o="string"==typeof(e=Tt(e))||e instanceof xp?Qp(this._dataReader,"Transaction.update",a._key,e,n,r):$p(this._dataReader,"Transaction.update",a._key,e),this._transaction.update(a._key,o),this},t.prototype.delete=function(t){var e=Od(t,this._firestore);return this._transaction.delete(e._key),this},t}());
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Vd(){if("undefined"==typeof Uint8Array)throw new uo(so.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Ud(){if("undefined"==typeof atob)throw new uo(so.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var jd=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return Ud(),new t(Op.fromBase64String(e))},t.fromUint8Array=function(e){return Vd(),new t(Op.fromUint8Array(e))},t.prototype.toBase64=function(){return Ud(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return Vd(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),qd=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Dp(t=fp(t,Sp));var n=Ap(t),r=t._freezeSettings(),i=new Mf;return kp(n,i,new Pf(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Dp(t=fp(t,Sp));var e=Ap(t),n=t._freezeSettings(),r=new Mf;return kp(e,r,new Lf(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new uo(so.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Ju;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return st(e,void 0,void 0,(function(){var e;return ut(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return st(this,void 0,void 0,(function(){var e;return ut(this,(function(n){switch(n.label){case 0:return ec.yt()?(e=t+"main",[4,ec.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(fh(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),Bd=function(){function t(t,e,n){var r=this;this._delegate=e,this.Jc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Zf||(this.Yc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=fp(t,vp))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==e&&po("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._delegate,t,e)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return st(e,void 0,void 0,(function(){var e,n;return ut(this,(function(r){switch(r.label){case 0:return[4,Hf(t)];case 1:return e=r.sent(),[4,Wf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=go(t);return e.$r.delete(0),ll(e)}(n))]}}))}))}))}(Ap(fp(this._delegate,Sp)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return st(e,void 0,void 0,(function(){var e,n;return ut(this,(function(r){switch(r.label){case 0:return[4,Hf(t)];case 1:return e=r.sent(),[4,Wf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return st(this,void 0,void 0,(function(){var e;return ut(this,(function(n){switch(n.label){case 0:return(e=go(t)).$r.add(0),[4,fl(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Ap(fp(this._delegate,Sp)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&up("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Jc.enableMultiTabIndexedDbPersistence(this):this.Jc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Jc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Yc&&(this.Yc._removeServiceInstance("firestore"),this.Yc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Ju;return t.asyncQueue.enqueueAndForget((function(){return st(e,void 0,void 0,(function(){var e;return ut(this,(function(r){switch(r.label){case 0:return e=lf,[4,$f(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Ap(fp(this._delegate,Sp)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Ff(e);return t.asyncQueue.enqueueAndForget((function(){return st(n,void 0,void 0,(function(){var e;return ut(this,(function(n){switch(n.label){case 0:return e=function(t,e){go(t).Gr.add(e),e.next()},[4,Qf(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return st(n,void 0,void 0,(function(){var e;return ut(this,(function(n){switch(n.label){case 0:return e=function(t,e){go(t).Gr.delete(e)},[4,Qf(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Ap(t=fp(t,Sp)),_p(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Yc)throw new uo(so.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Yc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new nv(this,bp(this._delegate,t))}catch(t){throw $d(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Wd(this,wp(this._delegate,t))}catch(t){throw $d(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Zd(this,function(t,e){if(t=fp(t,vp),ap("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new uo(so.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new mp(t,null,function(t){return new ka(xo.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw $d(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Ju;return t.asyncQueue.enqueueAndForget((function(){return st(n,void 0,void 0,(function(){var n;return ut(this,(function(i){switch(i.label){case 0:return[4,function(t){return Gf(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new Uf(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(Ap(t),(function(n){return e(new Fd(t,n))}))}(this._delegate,(function(n){return t(new Gd(e,n))}))},t.prototype.batch=function(){var t=this;return Ap(this._delegate),new Hd(new xd(this._delegate,(function(e){return Ld(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new uo(so.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new uo(so.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Kd=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return ot(e,t),e.prototype.convertBytes=function(t){return new jd(new Op(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Wd.Xc(e,this.firestore,null)},e}(Nd);var Gd=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Kd(t)}return t.prototype.get=function(t){var e=this,n=rv(t);return this._delegate.get(n).then((function(t){return new Yd(e._firestore,new hd(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n._converter))}))},t.prototype.set=function(t,e,n){var r=rv(t);return n?(sp("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=rv(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,ht([a,e,n],i)),this},t.prototype.delete=function(t){var e=rv(t);return this._delegate.delete(e),this},t}(),Hd=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=rv(t);return n?(sp("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=rv(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,ht([a,e,n],i)),this},t.prototype.delete=function(t){var e=rv(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),zd=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new ld(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Jd(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.Zc=function(e,n){var r=t.tu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Kd(e),n),i.set(n,o)),o},t}();zd.tu=new WeakMap;var Wd=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Kd(t)}return t.eu=function(e,n,r){if(e.length%2!=0)throw new uo(so.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new yp(n._delegate,r,new Ho(e)))},t.Xc=function(e,n,r){return new t(n,new yp(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new nv(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new nv(this.firestore,bp(this._delegate,t))}catch(t){throw $d(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Tt(t))instanceof yp&&Ip(this._delegate,t)},t.prototype.set=function(t,e){e=sp("DocumentReference.set",e);try{return function(t,e,n){t=fp(t,yp);var r=fp(t.firestore,Sp),i=kd(t._converter,e,n);return Ld(r,[qp(jp(r),"setDoc",t._key,i,null!==t._converter,n).toMutation(t._key,us.none())])}(this._delegate,t,e)}catch(t){throw $d(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Rd(this._delegate,t):Rd.apply(void 0,ht([this._delegate,t,e],n))}catch(t){throw $d(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Ld(fp((t=this._delegate).firestore,Sp),[new Ts(t._key,us.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Qd(e),i=Xd(e,(function(e){return new Yd(t.firestore,new hd(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))}));return Pd(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=fp(t,yp);var e=fp(t.firestore,Sp),n=Ap(e),r=new Cd(e);return function(t,e){var n=this,r=new Ju;return t.asyncQueue.enqueueAndForget((function(){return st(n,void 0,void 0,(function(){var n;return ut(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return st(this,void 0,void 0,(function(){var r,i;return ut(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=go(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new uo(so.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Fl(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,zf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new hd(e,r,t._key,n,new cd(null!==n&&n.hasLocalMutations,!0),t._converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=fp(t,yp);var e=fp(t.firestore,Sp);return Xf(Ap(e),t._key,{source:"server"}).then((function(n){return Md(e,t,n)}))}(this._delegate):function(t){t=fp(t,yp);var e=fp(t.firestore,Sp);return Xf(Ap(e),t._key).then((function(n){return Md(e,t,n)}))}(this._delegate)).then((function(t){return new Yd(e.firestore,new hd(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(zd.Zc(this.firestore,e)):this._delegate.withConverter(null))},t}();function $d(t,e,n){return t.message=t.message.replace(e,n),t}function Qd(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!_p(r))return r}return{}}function Xd(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=_p(t[0])?t[0]:_p(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Yd=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Wd(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return dd(this._delegate,t._delegate)},t}(),Jd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ot(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Yd),Zd=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Kd(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,md(this._delegate,function(t,e,n){var r=e,i=ud("where",t);return new gd(i,r,n)}(e,n,r)))}catch(e){throw $d(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,md(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=ud("orderBy",t);return new bd(r,n)}(e,n)))}catch(e){throw $d(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,md(this._delegate,function(t){return pp("limit",t),new wd("limit",t,"F")}(e)))}catch(e){throw $d(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,md(this._delegate,function(t){return pp("limitToLast",t),new wd("limitToLast",t,"L")}(e)))}catch(e){throw $d(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,md(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Id("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw $d(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,md(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Id("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw $d(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,md(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ed("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw $d(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,md(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ed("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw $d(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Ep(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=fp(t,mp);var e=fp(t.firestore,Sp),n=Ap(e),r=new Cd(e);return function(t,e){var n=this,r=new Ju;return t.asyncQueue.enqueueAndForget((function(){return st(n,void 0,void 0,(function(){var n;return ut(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return st(this,void 0,void 0,(function(){var r,i,o,a,s;return ut(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Sh(t,e,!0)];case 1:return s=u.sent(),r=new Yl(e,s.Bn),i=r._o(s.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return a=u.sent(),s=Fl(a,"Failed to execute query '"+e+" against cache"),n.reject(s),[3,3];case 3:return[2]}}))}))},[4,zf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new fd(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=fp(t,mp);var e=fp(t.firestore,Sp),n=Ap(e),r=new Cd(e);return Yf(n,t._query,{source:"server"}).then((function(n){return new fd(e,r,t,n)}))}(this._delegate):function(t){t=fp(t,mp);var e=fp(t.firestore,Sp),n=Ap(e),r=new Cd(e);return vd(t._query),Yf(n,t._query).then((function(n){return new fd(e,r,t,n)}))}(this._delegate)).then((function(t){return new ev(e.firestore,new fd(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Qd(e),i=Xd(e,(function(e){return new ev(t.firestore,new fd(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return Pd(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(zd.Zc(this.firestore,e)):this._delegate.withConverter(null))},t}(),tv=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Jd(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),ev=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Zd(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new Jd(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new tv(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new Jd(n._firestore,r))}))},t.prototype.isEqual=function(t){return dd(this._delegate,t._delegate)},t}(),nv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return ot(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Wd(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Wd(this.firestore,void 0===t?wp(this._delegate):wp(this._delegate,t))}catch(t){throw $d(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=fp(t.firestore,Sp),r=wp(t),i=kd(t._converter,e);return Ld(n,[qp(jp(t.firestore),"addDoc",r._key,i,null!==t._converter,{}).toMutation(r._key,us.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new Wd(e.firestore,t)}))},e.prototype.isEqual=function(t){return Ip(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(zd.Zc(this.firestore,t)):this._delegate.withConverter(null))},e}(Zd);function rv(t){return fp(t,yp)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var iv,ov=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(xp.bind.apply(xp,ht([void 0],t)))}return t.documentId=function(){return new t(Co.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Tt(t))instanceof xp&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),av=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Gp("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Bp("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Hp("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new zp("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Wp("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),sv={Firestore:Bd,GeoPoint:Rp,Timestamp:_o,Blob:jd,Transaction:Gd,WriteBatch:Hd,DocumentReference:Wd,DocumentSnapshot:Yd,Query:Zd,QueryDocumentSnapshot:Jd,QuerySnapshot:ev,CollectionReference:nv,FieldPath:ov,FieldValue:av,setLogLevel:function(t){var e;e=t,co.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new _t("firestore",(function(t){return function(t,e){return new Bd(t,new Sp(t,e),new qd)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},sv)))})(iv=Jt),iv.registerVersion("@firebase/firestore","2.2.2");Jt.initializeApp({apiKey:"AIzaSyD_8uLiOVl0Q7HOxBlpSdAcbA6jV2zatS8",authDomain:"expense-sv.firebaseapp.com",projectId:"expense-sv",storageBucket:"expense-sv.appspot.com",messagingSenderId:"484954172945",appId:"1:484954172945:web:1daefd5f05d4634c1f0bb0",measurementId:"G-6K66EZ5S32"}),Jt.auth(),new Jt.auth.GoogleAuthProvider;const uv=Jt.firestore();function cv(t,e,n){const r=t.slice();return r[17]=e[n],r[19]=n,r}function hv(e){let n;return{c(){n=d("div"),n.textContent="Loading...",I(n,"class","flex items-center justify-center p-4 text-sm font-light text-gray-400 border border-gray-200 shadow-sm rounded-2xl")},m(t,e){l(t,n,e)},p:t,i:t,o:t,d(t){t&&f(n)}}}function lv(t){let e,n,r,i,o,a,s,u,c;e=new rt({props:{data:t[2]}});let m=!t[1]&&fv(t),g=t[2],b=[];for(let e=0;e<g.length;e+=1)b[e]=dv(cv(t,g,e));let w=t[1]&&vv(t);return{c(){z(e.$$.fragment),n=y(),r=d("div"),i=d("h3"),o=v(t[0]),a=y(),m&&m.c(),s=y();for(let t=0;t<b.length;t+=1)b[t].c();u=y(),w&&w.c(),I(i,"class","pl-2 mb-2 font-semibold text-gray-600 bg-transparent dark:text-gray-100 "),I(r,"class","px-4 py-8 transition-all duration-200 border border-gray-200 shadow-lg dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100 rounded-2xl ")},m(t,f){W(e,t,f),l(t,n,f),l(t,r,f),h(r,i),h(i,o),h(i,a),m&&m.m(i,null),h(r,s);for(let t=0;t<b.length;t+=1)b[t].m(r,null);h(r,u),w&&w.m(r,null),c=!0},p(t,n){const a={};if(4&n&&(a.data=t[2]),e.$set(a),(!c||1&n)&&T(o,t[0]),t[1]?m&&(m.d(1),m=null):m?m.p(t,n):(m=fv(t),m.c(),m.m(i,null)),518&n){let e;for(g=t[2],e=0;e<g.length;e+=1){const i=cv(t,g,e);b[e]?b[e].p(i,n):(b[e]=dv(i),b[e].c(),b[e].m(r,u))}for(;e<b.length;e+=1)b[e].d(1);b.length=g.length}t[1]?w?w.p(t,n):(w=vv(t),w.c(),w.m(r,null)):w&&(w.d(1),w=null)},i(t){c||(G(e.$$.fragment,t),c=!0)},o(t){H(e.$$.fragment,t),c=!1},d(t){$(e,t),t&&f(n),t&&f(r),m&&m.d(),p(b,t),w&&w.d()}}}function fv(e){let n,r,i;return{c(){n=d("button"),n.textContent="Edit",I(n,"class","float-right text-sm font-light text-yellow-400 border-none focus:outline-none p4")},m(t,o){l(t,n,o),r||(i=g(n,"click",e[5]),r=!0)},p:t,d(t){t&&f(n),r=!1,i()}}}function pv(t){let e,n,r;function i(){return t[13](t[19])}return{c(){e=d("button"),e.textContent="-",I(e,"class","flex items-center justify-center w-6 h-6 ml-auto mr-0 text-sm font-light text-red-400 duration-200 border border-red-400 inline-blockpx-8 duration focus:outline-none rounded-2xl hover:border-opacity-0 hover:text-gray-50 hover:bg-red-400")},m(t,o){l(t,e,o),n||(r=g(e,"click",i),n=!0)},p(e,n){t=e},d(t){t&&f(e),n=!1,r()}}}function dv(t){let e,n,r,i,o,a,s,u=t[17].title+"",c=t[17].value+"",p=t[1]&&pv(t);return{c(){e=d("div"),n=v(u),r=y(),i=d("span"),o=v("  : "),a=v(c),s=y(),p&&p.c(),I(i,"class","bg-transparent"),S(i,"color",t[17].color),I(e,"class","flex items-center px-2 py-2 mb-4 overflow-hidden text-sm font-light text-gray-600 duration-100 bg-transparent border-b border-gray-200 dark:text-gray-100 dark:border-gray-600 whitespace-nowrap")},m(t,u){l(t,e,u),h(e,n),h(e,r),h(e,i),h(i,o),h(i,a),h(e,s),p&&p.m(e,null)},p(t,r){4&r&&u!==(u=t[17].title+"")&&T(n,u),4&r&&c!==(c=t[17].value+"")&&T(a,c),4&r&&S(i,"color",t[17].color),t[1]?p?p.p(t,r):(p=pv(t),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},d(t){t&&f(e),p&&p.d()}}}function vv(t){let e,n,i,o,a,s,u,c,p,m,b,w,T;return{c(){e=d("div"),n=d("input"),i=v("\n                      :  \n\n                    "),o=d("input"),a=y(),s=d("button"),s.textContent="+",u=y(),c=d("div"),p=d("button"),p.textContent="Save",m=y(),b=d("button"),b.textContent="Delete",I(n,"class","flex-grow font-light text-gray-600 bg-transparent border-t-0 border-l-0 border-r-0 border-blue-400 rounded-none dark:text-gray-100 focus:border-b-2 focus:outline-none "),S(n,"max-width","100px"),I(n,"name","title"),I(n,"placeholder","expense name"),I(o,"class","flex-grow font-light text-gray-600 bg-transparent border-t-0 border-l-0 border-r-0 border-blue-400 rounded-none dark:text-gray-100 focus:border-b-2 focus:outline-none "),S(o,"max-width","100px"),I(o,"name","value"),I(o,"type","number"),I(o,"placeholder","expense cost"),I(s,"class","flex items-center justify-center w-6 h-6 ml-auto mr-0 text-sm font-light text-blue-400 duration-200 border border-blue-400 inline-blockpx-8 duration focus:outline-none rounded-2xl hover:border-opacity-0 hover:text-gray-50 hover:bg-blue-400"),I(e,"class","flex items-center px-2 py-2 mb-4 overflow-hidden text-sm font-light text-gray-600 duration-100 bg-transparent border-b border-gray-200 dark:text-gray-100 dark:border-gray-600 whitespace-nowrap"),I(p,"class","px-8 py-2 mr-2 text-sm font-light text-green-400 duration-200 border border-green-400 duration focus:outline-none rounded-2xl hover:border-opacity-0 hover:text-gray-50 hover:bg-green-400"),I(b,"class","px-8 py-2 text-sm font-light text-red-400 duration-200 border border-red-400 duration focus:outline-none rounded-2xl hover:border-opacity-0 hover:text-gray-50 hover:bg-red-400"),I(c,"class","flex justify-end w-full bg-transparent")},m(r,f){l(r,e,f),h(e,n),_(n,t[3]),h(e,i),h(e,o),_(o,t[4]),h(e,a),h(e,s),l(r,u,f),l(r,c,f),h(c,p),h(c,m),h(c,b),w||(T=[g(n,"input",t[14]),g(o,"input",t[15]),g(s,"click",t[8]),g(p,"click",t[7]),g(b,"click",t[6])],w=!0)},p(t,e){8&e&&n.value!==t[3]&&_(n,t[3]),16&e&&E(o.value)!==t[4]&&_(o,t[4])},d(t){t&&f(e),t&&f(u),t&&f(c),w=!1,r(T)}}}function yv(t){let e,n,r,i;const o=[lv,hv],a=[];function s(t,e){return t[2]?0:1}return n=s(t),r=a[n]=o[n](t),{c(){e=d("div"),r.c(),I(e,"class","flex flex-col flex-grow w-full max-w-xs mb-4 mr-4 text-lg bg-transparent rounded-2xl")},m(t,r){l(t,e,r),a[n].m(e,null),i=!0},p(t,[i]){let u=n;n=s(t),n===u?a[n].p(t,i):(B(),H(a[u],1,1,(()=>{a[u]=null})),K(),r=a[n],r?r.p(t,i):(r=a[n]=o[n](t),r.c()),G(r,1),r.m(e,null))},i(t){i||(G(r),i=!0)},o(t){H(r),i=!1},d(t){t&&f(e),a[n].d()}}}function mv(t,e,n){let{data:r}=e,{title:i}=e,{index:o}=e,{id:a}=e;const s=k();let u=!1,c=null,h="",l=null;const f=t=>{c.splice(t,1),n(2,c=[...c])};return t.$$set=t=>{"data"in t&&n(10,r=t.data),"title"in t&&n(0,i=t.title),"index"in t&&n(11,o=t.index),"id"in t&&n(12,a=t.id)},t.$$.update=()=>{1024&t.$$.dirty&&n(2,c=r)},[i,u,c,h,l,()=>{n(1,u=!0)},()=>{n(1,u=!1),s("delete",{index:o})},()=>{n(1,u=!1),uv.collection("expenses").doc(a).update({expenses:c})},()=>{if(0==h.length||!l)return null;let t=()=>256*Math.random()>>0,e=`rgb(${t()}, ${t()}, ${t()})`;n(2,c=[...c,{title:h,value:l,color:e}]),n(3,h=""),n(4,l=null)},f,r,o,a,t=>{f(t)},function(){h=this.value,n(3,h)},function(){l=E(this.value),n(4,l)}]}class gv extends Y{constructor(t){super(),X(this,t,mv,yv,o,{data:10,title:0,index:11,id:12})}}const bv=t=>({}),wv=t=>({class:"w-full"});function Iv(t){let e,n,i,o,a,c,p,m;const b=t[5].default,E=function(t,e,n,r){if(t){const i=s(t,e,n,r);return t[0](i)}}(b,t,t[4],wv);return{c(){e=d("div"),n=d("div"),i=d("h3"),o=v(t[0]),a=y(),E&&E.c(),I(i,"class","w-full mb-4 font-semibold text-gray-600"),I(n,"class","w-full max-w-xs p-4 mx-auto border-gray-200 rounded-2xl dark:border-gray-600"),I(e,"class","absolute top-0 left-0 flex items-center w-screen h-screen p-0 m-0 duration-200 bg-gray-600 bg-opacity-50")},m(r,s){l(r,e,s),h(e,n),h(n,i),h(i,o),h(n,a),E&&E.m(n,null),c=!0,p||(m=[g(n,"click",w(Tv)),g(e,"click",t[2],{once:!0})],p=!0)},p(t,e){(!c||1&e)&&T(o,t[0]),E&&E.p&&16&e&&u(E,b,t,t[4],e,bv,wv)},i(t){c||(G(E,t),c=!0)},o(t){H(E,t),c=!1},d(t){t&&f(e),E&&E.d(t),p=!1,r(m)}}}function Ev(t){let e,n,r=t[1]&&Iv(t);return{c(){r&&r.c(),e=m()},m(t,i){r&&r.m(t,i),l(t,e,i),n=!0},p(t,[n]){t[1]?r?(r.p(t,n),2&n&&G(r,1)):(r=Iv(t),r.c(),G(r,1),r.m(e.parentNode,e)):r&&(B(),H(r,1,1,(()=>{r=null})),K())},i(t){n||(G(r),n=!0)},o(t){H(r),n=!1},d(t){r&&r.d(t),t&&f(e)}}}const Tv=()=>{};function _v(t,e,n){let{$$slots:r={},$$scope:i}=e;const o=k();let a=!1,{open:s}=e;let{title:u}=e;return t.$$set=t=>{"open"in t&&n(3,s=t.open),"title"in t&&n(0,u=t.title),"$$scope"in t&&n(4,i=t.$$scope)},t.$$.update=()=>{8&t.$$.dirty&&n(1,a=s)},[u,a,t=>{o("close")},s,i,r]}class Sv extends Y{constructor(t){super(),X(this,t,_v,Ev,o,{open:3,title:0})}}const Av=[];const Nv=function(e,n=t){let r;const i=[];function a(t){if(o(e,t)&&(e=t,r)){const t=!Av.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),Av.push(n,e)}if(t){for(let t=0;t<Av.length;t+=2)Av[t][0](Av[t+1]);Av.length=0}}}return{set:a,update:function(t){a(t(e))},subscribe:function(o,s=t){const u=[o,s];return i.push(u),1===i.length&&(r=n(a)||t),o(e),()=>{const t=i.indexOf(u);-1!==t&&i.splice(t,1),0===i.length&&(r(),r=null)}}}}([]);function kv(t,e,n){const r=t.slice();return r[13]=e[n],r[15]=n,r}function Dv(t){let e,n,i,o,a,s;return{c(){e=d("form"),n=d("input"),i=y(),o=d("button"),o.textContent="Add",I(n,"placeholder","Insert list name..."),I(n,"class","w-full h-8 mb-4 text-sm font-light border-t-0 border-b border-l-0 border-r-0 border-blue-400 focus:outline-none"),I(o,"type","submit"),I(o,"class","float-right px-8 py-2 mr-2 text-sm font-light text-green-400 duration-200 border border-green-400 duration focus:outline-none rounded-2xl hover:border-opacity-0 hover:text-gray-50 hover:bg-green-400"),I(e,"class","w-full")},m(r,u){l(r,e,u),h(e,n),_(n,t[0]),h(e,i),h(e,o),a||(s=[g(n,"input",t[9]),g(e,"submit",b(t[6]))],a=!0)},p(t,e){1&e&&n.value!==t[0]&&_(n,t[0])},d(t){t&&f(e),a=!1,r(s)}}}function xv(t){let e,n;return e=new gv({props:{index:t[15],id:t[13].id,title:t[13].title,data:t[13].expenses}}),e.$on("save",t[4]),e.$on("delete",t[5]),{c(){z(e.$$.fragment)},m(t,r){W(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.id=t[13].id),4&n&&(r.title=t[13].title),4&n&&(r.data=t[13].expenses),e.$set(r)},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){H(e.$$.fragment,t),n=!1},d(t){$(e,t)}}}function Ov(t){let e,n,i,o,a,s,u,c,v,m,b,w,E,T,_;e=new Sv({props:{open:t[1],title:"Add new list",$$slots:{default:[Dv]},$$scope:{ctx:t}}}),e.$on("close",t[10]);let S=t[2],A=[];for(let e=0;e<S.length;e+=1)A[e]=xv(kv(t,S,e));const N=t=>H(A[t],1,1,(()=>{A[t]=null}));return{c(){z(e.$$.fragment),n=y(),i=d("h1"),i.textContent="Expense-SV",o=y(),a=d("h2"),a.textContent="by Purinat Sanbundit",s=y(),u=d("div"),c=d("div"),c.textContent="Toggle Dark mode",v=y(),m=d("div"),m.textContent="Add new list",b=y(),w=d("div");for(let t=0;t<A.length;t+=1)A[t].c();I(i,"class","w-full text-4xl font-extrabold text-gray-600 bg-transparent dark:text-gray-100 max-w-screen-2xl"),I(a,"class","w-full mb-8 text-xl text-gray-600 bg-transparent dark:text-gray-100 max-w-screen-2xl"),I(c,"class","px-4 py-2 mx-auto ml-0 mr-4 font-light text-gray-600 duration-200 border border-gray-200 rounded-full shadow-lg cursor-pointer w-min whitespace-nowrap hover:bg-yellow-400 hover:text-gray-100 dark:text-gray-100 dark:border-gray-600 dark:bg-yellow-400"),I(m,"class","px-4 py-2 mx-auto ml-0 font-light text-gray-100 duration-200 bg-green-400 border border-green-200 rounded-full shadow-lg cursor-pointer w-min whitespace-nowrap dark:text-gray-100 dark:border-gray-600 dark:bg-green-400"),I(u,"class","flex w-full mb-8 bg-transparent max-w-screen-2xl"),I(w,"class","flex flex-wrap w-full mx-auto bg-transparent xw max-w-screen-2xl")},m(r,f){W(e,r,f),l(r,n,f),l(r,i,f),l(r,o,f),l(r,a,f),l(r,s,f),l(r,u,f),h(u,c),h(u,v),h(u,m),l(r,b,f),l(r,w,f);for(let t=0;t<A.length;t+=1)A[t].m(w,null);E=!0,T||(_=[g(c,"click",t[3]),g(m,"click",t[7])],T=!0)},p(t,[n]){const r={};if(2&n&&(r.open=t[1]),65537&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r),52&n){let e;for(S=t[2],e=0;e<S.length;e+=1){const r=kv(t,S,e);A[e]?(A[e].p(r,n),G(A[e],1)):(A[e]=xv(r),A[e].c(),G(A[e],1),A[e].m(w,null))}for(B(),e=S.length;e<A.length;e+=1)N(e);K()}},i(t){if(!E){G(e.$$.fragment,t);for(let t=0;t<S.length;t+=1)G(A[t]);E=!0}},o(t){H(e.$$.fragment,t),A=A.filter(Boolean);for(let t=0;t<A.length;t+=1)H(A[t]);E=!1},d(t){$(e,t),t&&f(n),t&&f(i),t&&f(o),t&&f(a),t&&f(s),t&&f(u),t&&f(b),t&&f(w),p(A,t),T=!1,r(_)}}}function Cv(t,e,n){let r;a(t,Nv,(t=>n(8,r=t)));let i,o,s=!1,u=!1;Nv.subscribe((t=>{n(2,o=t)}));return t.$$.update=()=>{256&t.$$.dirty&&console.log("> $expensesList : ",r)},[i,u,o,()=>{s=!s,s?document.querySelector("html").classList.add("dark"):document.querySelector("html").classList.remove("dark")},t=>{let e=[...r];e.splice(t.detail.index,1,t.detail.newExpenses),c(Nv,r=e,r)},t=>{let e=[...r];e.splice(t.detail.index,1),c(Nv,r=e,r)},()=>{n(1,u=!1),c(Nv,r=[...r,{title:i??"-",id:Date.now(),expenses:[]}],r),n(0,i=void 0)},()=>{n(1,u=!0)},r,function(){i=this.value,n(0,i)},()=>{n(1,u=!1)}]}class Rv extends Y{constructor(t){super(),X(this,t,Cv,Ov,o,{})}}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var Pv=function(){return(Pv=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Lv=function(t,e){return(Lv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function Mv(t,e){function n(){this.constructor=t}Lv(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function Fv(t){return"function"==typeof t}var Vv=!1,Uv={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;Vv=t},get useDeprecatedSynchronousErrorHandling(){return Vv}};function jv(t){setTimeout((function(){throw t}),0)}var qv={closed:!0,next:function(t){},error:function(t){if(Uv.useDeprecatedSynchronousErrorHandling)throw t;jv(t)},complete:function(){}},Bv=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();function Kv(t){return null!==t&&"object"==typeof t}var Gv=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),Hv=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var n=this,r=n._parentOrParents,i=n._ctorUnsubscribe,o=n._unsubscribe,a=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof t)r.remove(this);else if(null!==r)for(var s=0;s<r.length;++s){r[s].remove(this)}if(Fv(o)){i&&(this._unsubscribe=void 0);try{o.call(this)}catch(t){e=t instanceof Gv?zv(t.errors):[t]}}if(Bv(a)){s=-1;for(var u=a.length;++s<u;){var c=a[s];if(Kv(c))try{c.unsubscribe()}catch(t){e=e||[],t instanceof Gv?e=e.concat(zv(t.errors)):e.push(t)}}}if(e)throw new Gv(e)}},t.prototype.add=function(e){var n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof t){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function zv(t){return t.reduce((function(t,e){return t.concat(e instanceof Gv?e.errors:e)}),[])}var Wv=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),$v=function(t){function e(n,r,i){var o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=qv;break;case 1:if(!n){o.destination=qv;break}if("object"==typeof n){n instanceof e?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new Qv(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new Qv(o,n,r,i)}return o}return Mv(e,t),e.prototype[Wv]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(Hv),Qv=function(t){function e(e,n,r,i){var o,a=t.call(this)||this;a._parentSubscriber=e;var s=a;return Fv(n)?o=n:n&&(o=n.next,r=n.error,i=n.complete,n!==qv&&(Fv((s=Object.create(n)).unsubscribe)&&a.add(s.unsubscribe.bind(s)),s.unsubscribe=a.unsubscribe.bind(a))),a._context=s,a._next=o,a._error=r,a._complete=i,a}return Mv(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;Uv.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=Uv.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):jv(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;jv(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};Uv.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),Uv.useDeprecatedSynchronousErrorHandling)throw t;jv(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!Uv.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return Uv.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(jv(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}($v);var Xv=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function Yv(t){return t}function Jv(t){return 0===t.length?Yv:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var Zv=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,i=function(t,e,n){if(t){if(t instanceof $v)return t;if(t[Wv])return t[Wv]()}return t||e||n?new $v(t,e,n):new $v(qv)}(t,e,n);if(r?i.add(r.call(i,this.source)):i.add(this.source||Uv.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),Uv.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){Uv.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),!function(t){for(;t;){var e=t,n=e.closed,r=e.destination,i=e.isStopped;if(n||i)return!1;t=r&&r instanceof $v?r:null}return!0}(t)?console.warn(e):t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=ty(e))((function(e,r){var i;i=n.subscribe((function(e){try{t(e)}catch(t){r(t),i&&i.unsubscribe()}}),r,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[Xv]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:Jv(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=ty(t))((function(t,n){var r;e.subscribe((function(t){return r=t}),(function(t){return n(t)}),(function(){return t(r)}))}))},t.create=function(e){return new t(e)},t}();function ty(t){if(t||(t=Promise),!t)throw new Error("no Promise impl found");return t}function ey(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new ny(t,e))}}var ny=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new ry(t,this.project,this.thisArg))},t}(),ry=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return Mv(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}($v);function iy(t,e){
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
return function(t,e){return new Zv((function(n){return{unsubscribe:t.onSnapshot(e||{},n)}}))}(t,e)}function oy(t){return(e=t,iy(e,n)).pipe(ey((function(t){return t.docs})));var e,n}function ay(t,e){return oy(t).pipe(ey((function(t){return t.map((function(t){return function(t,e){var n;return Pv(Pv({},t.data()),e?((n={})[e]=t.id,n):null)}(t,e)}))})))}function sy(e){let n,r,i;return r=new Rv({}),{c(){n=d("main"),z(r.$$.fragment),I(n,"class","duration-200 dark:bg-gray-800 svelte-1fwqskf")},m(t,e){l(t,n,e),W(r,n,null),i=!0},p:t,i(t){i||(G(r.$$.fragment,t),i=!0)},o(t){H(r.$$.fragment,t),i=!1},d(t){t&&f(n),$(r)}}}function uy(t,e,n){let r;a(t,Nv,(t=>n(0,r=t)));return ay(uv.collection("expenses"),"id").subscribe((t=>{console.log("> data : ",t),c(Nv,r=t,r)})),[]}return new class extends Y{constructor(t){super(),X(this,t,uy,sy,o,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
